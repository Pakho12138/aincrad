(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{551:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ionic-解决-picker-选择器组件动态刷新选项重叠、消失的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ionic-解决-picker-选择器组件动态刷新选项重叠、消失的问题"}},[s._v("#")]),s._v(" ionic 解决 picker 选择器组件动态刷新选项重叠、消失的问题")]),s._v(" "),t("h2",{attrs:{id:"本地环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地环境"}},[s._v("#")]),s._v(" 本地环境")]),s._v(" "),t("div",{staticClass:"language-dart line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-dart"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ionic")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ionic")]),s._v(" CLI                     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.17")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Ionic")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Framework")]),s._v("               "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token metadata function"}},[s._v("@ionic")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("angular "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.9")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".2")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token metadata function"}},[s._v("@angular")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devkit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("build"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("angular "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token metadata function"}},[s._v("@angular")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devkit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schematics    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token metadata function"}},[s._v("@angular")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cli                  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".5")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token metadata function"}},[s._v("@ionic")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("angular"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("toolkit        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"问题说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题说明"}},[s._v("#")]),s._v(" 问题说明")]),s._v(" "),t("p",[s._v("多列选择的时候，动态刷新其他列，出现选项全挤在一行的情况，滑动后恢复正常。 属于官方未解决的 bug： "),t("a",{attrs:{href:"https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Fionic-team%2Fionic-framework%2Fissues%2F17664",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/ionic-team/ionic-framework/issues/17664"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"解决方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[s._v("#")]),s._v(" 解决方案")]),s._v(" "),t("p",[s._v("每列的选项数量固定为可能性的最大值，实际选项不足的时候填补空白选项，并设置 disabled 属性。这样空选项不会显示出来。")]),s._v(" "),t("div",{staticClass:"language-csharp line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-csharp"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("newOptions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" max"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" j "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" newOptions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" j "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" max"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" j"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" disabledOption"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" PickerColumnOption "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            text"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ''"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token named-parameter punctuation"}},[s._v("disabled")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 空白选项不显示")]),s._v("\n            transform"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ''"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 解决切换选项后，有时选项不会显示的问题")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        newOptions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("disabledOption"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("触发刷新还需要保证列 PickerColumn 的 prevSelected ！= selectedIndex，比如新建列前者不设置，后者设为 0.")])])}),[],!1,null,null,null);t.default=e.exports}}]);