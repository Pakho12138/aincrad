(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{350:function(e,t,i){"use strict";function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function l(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,i){return(t=_(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=d(e);if(t){var r=d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p(this,i)}}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function m(){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=g(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}}).apply(this,arguments)}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}i.d(t,"a",(function(){return f})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return l})),i.d(t,"d",(function(){return v})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return m})),i.d(t,"g",(function(){return d})),i.d(t,"h",(function(){return u})),i.d(t,"i",(function(){return r})),i.d(t,"j",(function(){return p})),i.d(t,"k",(function(){return y})),i.d(t,"l",(function(){return s}))},351:function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return d})),i.d(t,"d",(function(){return u}));var n=i(350),r=i(352),s=function(){function e(t){Object(n.b)(this,e),this.bufferedList=t}return Object(n.c)(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),a={};function o(e,t){for(var i=0,n=t.length;i<n;i++)if(e.indexOf(t[i])>-1)return!0;return!1}function l(e){var t=Object(n.l)(e);return null!==e&&("object"===t||"function"===t)}function c(e,t,i){var n,r,s,a,o,c,u=0,d=!1,h=!1,f=!0,p=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var i=n,s=r;return n=r=void 0,u=t,a=e.apply(s,i)}function g(e,t){return p?(window.cancelAnimationFrame(o),window.requestAnimationFrame(e)):setTimeout(e,t)}function m(e){return u=e,o=g(b,t),d?v(e):a}function y(e){var i=e-c;return void 0===c||i>=t||i<0||h&&e-u>=s}function b(){var e=Date.now();if(y(e))return _(e);o=g(b,function(e){var i=e-u,n=t-(e-c);return h?Math.min(n,s-i):n}(e))}function _(e){return o=void 0,f&&n?v(e):(n=r=void 0,a)}function k(){for(var e=Date.now(),i=y(e),s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(n=l,r=this,c=e,i){if(void 0===o)return m(c);if(h)return o=g(b,t),v(c)}return void 0===o&&(o=g(b,t)),a}return t=+t||0,l(i)&&(d=!!i.leading,s=(h="maxWait"in i)?Math.max(+i.maxWait||0,t):s,f="trailing"in i?!!i.trailing:f),k.cancel=function(){void 0!==o&&function(e){if(p)return window.cancelAnimationFrame(e);clearTimeout(e)}(o),u=0,n=c=r=o=void 0},k.flush=function(){return void 0===o?a:_(Date.now())},k.pending=function(){return void 0!==o},k}function u(e,t,i){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return l(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),c(e,t,{leading:n,trailing:r,maxWait:t})}function d(){var e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return"zh-cn"===e&&(e="zh"),e}function h(e,t,i){if(e){var n=e.getAttribute(i);return!(!n||n!==t||"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)}}a.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=n,r.innerHTML=t,Object.keys(i).forEach((function(t){var n=t,s=i[t];"video"===e||"audio"===e||"live-video"===e?s&&r.setAttribute(n,s):r.setAttribute(n,s)})),r},a.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var n=document.createElement("div");n.innerHTML=e;var s=n.children;return n=null,s.length>0?(s=s[0],i&&a.addClass(s,i),t&&Object.keys(t).forEach((function(e){s.setAttribute(e,t[e])})),s):null}catch(e){return r.b.logError("util.createDomFromHtml",e),null}},a.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(r){var i=e.className&&"object"===Object(n.l)(e.className)?e.getAttribute("class"):e.className;return i&&!!i.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},a.addClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(i){a.hasClass(e,t)||(e.className&&"object"===Object(n.l)(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},a.removeClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(i){a.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===Object(n.l)(e.className)?e.setAttribute("class",e.getAttribute("class").replace(i," ")):e.className=e.className.replace(i," ")}))}},a.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){a.hasClass(e,t)?a.removeClass(e,t):a.addClass(e,t)}))},a.classNames=function(){for(var e=arguments,t=[],i=function(i){"String"===a.typeOf(e[i])?t.push(e[i]):"Object"===a.typeOf(e[i])&&Object.keys(e[i]).map((function(n){e[i][n]&&t.push(n)}))},n=0;n<arguments.length;n++)i(n);return t.join(" ")},a.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,i=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(i)}catch(n){r.b.logError("util.findDom",n),0===i.indexOf("#")&&(e=t.getElementById(i.slice(1)))}return e},a.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},a.padStart=function(e,t,i){for(var n=String(i),r=t>>0,s=Math.ceil(r/n.length),a=[],o=String(e);s--;)a.push(n);return a.join("").substring(0,r-o.length)+o},a.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=a.padStart(Math.floor(e/3600),2,0),i=a.padStart(Math.floor((e-3600*t)/60),2,0),n=a.padStart(Math.floor(e-3600*t-60*i),2,0);return("00"===t?[i,n]:[t,i,n]).join(":")},a.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},a.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},a.deepCopy=function(e,t){if("Object"===a.typeOf(t)&&"Object"===a.typeOf(e))return Object.keys(t).forEach((function(i){"Object"!==a.typeOf(t[i])||t[i]instanceof Node?"Array"===a.typeOf(t[i])?e[i]="Array"===a.typeOf(e[i])?e[i].concat(t[i]):t[i]:e[i]=t[i]:void 0===e[i]||void 0===e[i]?e[i]=t[i]:a.deepCopy(e[i],t[i])})),e},a.deepMerge=function(e,t){return Object.keys(t).map((function(i){var r;"Array"===a.typeOf(t[i])&&"Array"===a.typeOf(e[i])?"Array"===a.typeOf(e[i])&&(r=e[i]).push.apply(r,Object(n.k)(t[i])):a.typeOf(e[i])!==a.typeOf(t[i])||null===e[i]||"Object"!==a.typeOf(e[i])||t[i]instanceof window.Node?null!==t[i]&&(e[i]=t[i]):a.deepMerge(e[i],t[i])})),e},a.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var i=document.createElement("a");return i.href=t.replace(/url\("|"\)/g,""),i.href},a.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},a.setInterval=function(e,t,i,n){e._interval[t]||(e._interval[t]=window.setInterval(i.bind(e),n))},a.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},a.setTimeout=function(e,t,i){e._timers||(e._timers=[]);var n=setTimeout((function(){t(),a.clearTimeout(e,n)}),i);return e._timers.push(n),n},a.clearTimeout=function(e,t){var i=e._timers;if("Array"===a.typeOf(i)){for(var n=0;n<i.length;n++)if(i[n]===t){i.splice(n,1),clearTimeout(t);break}}else clearTimeout(t)},a.clearAllTimers=function(e){var t=e._timers;"Array"===a.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},a.createImgBtn=function(e,t,i,n){var r,s,o,l=a.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));(l.style.backgroundImage='url("'.concat(t,'")'),i&&n)&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(i.indexOf(e)>-1&&n.indexOf(e)>-1)||(r=parseFloat(i.slice(0,i.indexOf(e)).trim()),s=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=e,!1)})),l.style.width="".concat(r).concat(o),l.style.height="".concat(s).concat(o),l.style.backgroundSize="".concat(r).concat(o," ").concat(s).concat(o),l.style.margin="start"===e?"-".concat(s/2).concat(o," auto auto -").concat(r/2).concat(o):"auto 5px auto 5px");return l},a.Hex2RGBA=function(e,t){var i=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var n="#";e.replace(/[0-9A-F]/gi,(function(e){n+=e+e})),e=n}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){i.push(parseInt(e,16))})),"rgba(".concat(i.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},a.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},a.checkIsFunction=function(e){return e&&"function"==typeof e},a.checkIsObject=function(e){return null!==e&&"object"===Object(n.l)(e)},a.hide=function(e){e.style.display="none"},a.show=function(e,t){e.style.display=t||"block"},a.isUndefined=function(e){if(null==e)return!0},a.isNotNull=function(e){return!(null==e)},a.setStyleFromCsstext=function(e,t){t&&("String"===a.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var i=t.split(":");i.length>1&&(e.style[i[0]]=i[1])}})):Object.keys(t).map((function(i){e.style[i]=t[i]})))},a.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],i=e.style.cssText;if(!i)return{};var n=i.replace(/\s+/g,"").split(";"),r={},s={};return n.map((function(e){if(e){var i=e.split(":");i.length>1&&(o(i[0],t)?r[i[0]]=i[1]:s[i[0]]=i[1])}})),e.setAttribute("style",""),Object.keys(s).map((function(t){e.style[t]=s[t]})),r},a.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var i=t.replace(/\s+/g,"").split(";"),n={};return i.map((function(e){if(e){var t=e.split(":");t.length>1&&(n[t[0]]=t[1])}})),n},a.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var n=new window.Image;n.onload=function(e){n=null,t&&t(e)},n.onerror=function(e){n=null,i&&i(e)},n.src=e}},a.stopPropagation=function(e){e&&e.stopPropagation()},a.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},a.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},a.checkTouchSupport=function(){return"ontouchstart"in window},a.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=[],n=0;n<e.length;n++)i.push({start:e.start(n)<.5?0:e.start(n),end:e.end(n)});i.sort((function(e,t){var i=e.start-t.start;return i||t.end-e.end}));var r=[];if(t)for(var a=0;a<i.length;a++){var o=r.length;if(o){var l=r[o-1].end;i[a].start-l<t?i[a].end>l&&(r[o-1].end=i[a].end):r.push(i[a])}else r.push(i[a])}else r=i;return new s(r)},a.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.touches&&e.touches.length>0&&(e=e.touches[0]),{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},a.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},a.getHostFromUrl=function(e){if("String"!==a.typeOf(e))return"";var t=e.split("/"),i="";return t.length>3&&t[2]&&(i=t[2]),i},a.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)},a.isMSE=function(e){return e.media&&(e=e.media),!!(e&&e instanceof HTMLMediaElement)&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))},a.isBlob=function(e){return"string"==typeof e&&/^blob/.test(e)},a.generateSessionId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new Date).getTime();try{e=parseInt(e)}catch(t){e=0}t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=parseInt(window.performance.now()));var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)}));return i},a.createEvent=function(e){var t;return"function"==typeof window.Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t},a.adjustTimeByDuration=function(e,t,i){return t&&e&&(e>t||i&&e<t)?t:e},a.createPositionBar=function(e,t){var i=a.createDom("xg-bar","",{"data-index":-1},e);return t.appendChild(i),i},a.getTransformStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,scale:1,rotate:0},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i={scale:"".concat(e.scale||1),translate:"".concat(e.x||0,"%, ").concat(e.y||0,"%"),rotate:"".concat(e.rotate||0,"deg")},n=Object.keys(i);return n.forEach((function(e){var n=new RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),r="".concat(e,"(").concat(i[e],")");n.test(t)?(n.lastIndex=-1,t=t.replace(n,r)):t+="".concat(r," ")})),t},a.convertDeg=function(e){return Math.abs(e)<=1?360*e:e%360},a.getIndexByTime=function(e,t){var i=t.length,n=-1;if(i<1)return n;if(e<=t[0].end||i<2)n=0;else if(e>t[i-1].end)n=i-1;else for(var r=1;r<i;r++)if(e>t[r-1].end&&e<=t[r].end){n=r;break}return n},a.getOffsetCurrentTime=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=-1;if((n=i>=0&&i<t.length?i:a.getIndexByTime(e,t))<0)return-1;var r=t.length,s=t[n],o=s.start,l=s.end,c=s.cTime,u=s.offset;return e<o?c:e>=o&&e<=l?e-u:e>l&&n>=r-1?l:-1},a.getCurrentTimeByOffset=function(e,t){var i=-1;if(!t||t.length<0)return e;for(var n=0;n<t.length;n++)if(e<=t[n].duration){i=n;break}if(-1!==i){var r=t[i].start;return i-1<0?r+e:r+(e-t[i-1].duration)}return e}},352:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return a}));var n="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,r={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},s="%c[xgplayer]",a={config:{debug:n?3:0},logInfo:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];this.config.debug>=3&&(t=console).log.apply(t,[s,r.info,e].concat(n))},logWarn:function(e){for(var t,i=arguments.length,n=new Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];this.config.debug>=1&&(t=console).warn.apply(t,[s,r.warn,e].concat(n))},logError:function(e){var t;if(!(this.config.debug<1)){for(var i=this.config.debug>=2?"trace":"error",n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];(t=console)[i].apply(t,[s,r.error,e].concat(a))}}};function o(e){e.logInfo=a.logInfo.bind(e),e.logWarn=a.logWarn.bind(e),e.logError=a.logError.bind(e)}},353:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return v}));var n=i(350),r=i(358),s=i(368),a=i.n(s),o=i(352),l=i(351),c={CONTROLS:"controls",ROOT:"root"},u={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"},d="xg-icon-disable";function h(e){return!!e&&(e.indexOf&&/^(?:http|data:|\/)/.test(e))}function f(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=null;if(e instanceof window.Element)return l.b.addClass(e,i),Object.keys(n).map((function(t){e.setAttribute(t,n[t])})),e;if(h(e)||h(e.url))return n.src=h(e)?e:e.url||"",s=l.b.createDom(e.tag||"img","",n,"xg-img ".concat(i));if("function"==typeof e)try{return(s=e())instanceof window.Element?(l.b.addClass(s,i),Object.keys(n).map((function(e){s.setAttribute(e,n[e])})),s):(o.b.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is a function mast return an Element Object")),null)}catch(e){return o.b.logError("Plugin named [".concat(r,"]:createIcon"),e),null}return"string"==typeof e?l.b.createDomFromHtml(e,n,i):(o.b.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is invalid")),null)}function p(e,t){var i=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(r){var s=e[r],a=s&&s.class?s.class:"",o=s&&s.attr?s.attr:{},l=null;i&&i[r]&&(a=function(e,t){return"object"===Object(n.l)(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}(i[r],a),o=function(e,t){return"object"===Object(n.l)(e)&&e.attr&&"object"===Object(n.l)(e.attr)&&Object.keys(e.attr).map((function(i){t[i]=e.attr[i]})),t}(i[r],o),l=f(i[r],r,a,o,t.pluginName)),!l&&s&&(l=f(s.icon?s.icon:s,o,a,{},t.pluginName)),t.icons[r]=l}))}var v=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.b)(this,i),(e=t.call(this,r)).__delegates=[],e}return Object(n.c)(i,[{key:"__init",value:function(e){if(Object(n.f)(Object(n.g)(i.prototype),"__init",this).call(this,e),e.root){var t=e.root,r=null;this.icons={},this.root=null,this.parent=null,p(this.registerIcons()||{},this),this.langText={};var s,a,c=this.registerLanguageTexts()||{};s=c,a=this,Object.keys(s).map((function(e){Object.defineProperty(a.langText,e,{get:function(){var t=a.lang,i=a.i18n;return i[e]?i[e]:s[e]&&s[e][t]||""}})}));var u="";try{u=this.render()}catch(e){throw o.b.logError("Plugin:".concat(this.pluginName,":render"),e),new Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(u)(r=i.insert(u,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(r=l.b.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(r)}this.root=r,this.parent=t;var d=this.config.attr||{},h=this.config.style||{};this.setAttr(d),this.setStyle(h),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===Object(n.l)(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(i){var r,s,a=i,o=t[a],c={root:e.root};"function"==typeof o?(r=e.config[a]||{},s=o):"object"===Object(n.l)(o)&&"function"==typeof o.plugin&&(r=o.options?l.b.deepCopy(e.config[a]||{},o.options):e.config[a]||{},s=o.plugin),c.config=r,void 0!==r.index&&(c.index=r.index),r.root&&(c.root=r.root),e.registerPlugin(s,c,a)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,i=this.i18n,n=this.langText;t&&function e(t,i){for(var n=0;n<t.children.length;n++)t.children[n].children.length>0?e(t.children[n],i):i(t.children[n])}(t,(function(t){var r=t.getAttribute&&t.getAttribute("lang-key");if(r){var s=i[r.toUpperCase()]||n[r];s&&(t.innerHTML="function"==typeof s?s(e):s)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this.i18n||{},n=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var r=i[t]||n[t]||"";r&&(e.innerHTML=r)}},{key:"plugins",value:function(){return this._children}},{key:"disable",value:function(){this.config.disable=!0,l.b.addClass(this.find(".xgplayer-icon"),d)}},{key:"enable",value:function(){this.config.disable=!1,l.b.removeClass(this.find(".xgplayer-icon"),d)}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var s=Object(n.f)(Object(n.g)(i.prototype),"registerPlugin",this).call(this,e,t,r);return this._children.push(s),s}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,n){var r=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){r.bindEL(e,t)})):this.bindEL(e,t);else{var s=i.delegate.call(this,this.root,e,t,n);this.__delegates=this.__delegates.concat(s)}}},{key:"unbind",value:function(e,t){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){i.unbindEL(e,t)})):this.unbindEL(e,t);else for(var n="".concat(e,"_").concat(t),r=0;r<this.__delegates.length;r++)if(this.__delegates[r].key===n){this.__delegates[r].destroy(),this.__delegates.splice(r,1);break}}},{key:"setStyle",value:function(e,t){var i=this;if(this.root)return"String"===l.b.typeOf(e)?this.root.style[e]=t:void("Object"===l.b.typeOf(e)&&Object.keys(e).map((function(t){i.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var i=this;if(this.root)return"String"===l.b.typeOf(e)?this.root.setAttribute(e,t):void("Object"===l.b.typeOf(e)&&Object.keys(e).map((function(t){i.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,i)}},{key:"unbindEL",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,i)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(e){return o.b.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),Object(n.f)(Object(n.g)(i.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],[{key:"insert",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.children.length,r=Number(i),s=e instanceof window.Node;if(n){for(var a=0,o=null,l="";a<n;a++){o=t.children[a];var c=Number(o.getAttribute("data-index"));if(c>=r){l="beforebegin";break}c<r&&(l="afterend")}return s?"afterend"===l?t.appendChild(e):t.insertBefore(e,o):o.insertAdjacentHTML(l,e),"afterend"===l?t.children[t.children.length-1]:t.children[a]}return s?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=[];if(e instanceof window.Node&&"function"==typeof n)if(Array.isArray(i))i.forEach((function(i){var o=a()(e,t,i,n,r);o.key="".concat(t,"_").concat(i),s.push(o)}));else{var o=a()(e,t,i,n,r);o.key="".concat(t,"_").concat(i),s.push(o)}return s}},{key:"ROOT_TYPES",get:function(){return c}},{key:"POSITIONS",get:function(){return u}}]),i}(r.a)},354:function(e,t,i){"use strict";i.r(t),i.d(t,"ABORT",(function(){return w})),i.d(t,"AFTER_DEFINITION_CHANGE",(function(){return $})),i.d(t,"AUTOPLAY_PREVENTED",(function(){return L})),i.d(t,"AUTOPLAY_STARTED",(function(){return A})),i.d(t,"BEFORE_DEFINITION_CHANGE",(function(){return V})),i.d(t,"BUFFER_CHANGE",(function(){return T})),i.d(t,"CANPLAY",(function(){return h})),i.d(t,"CANPLAY_THROUGH",(function(){return f})),i.d(t,"COMPLETE",(function(){return I})),i.d(t,"CSS_FULLSCREEN_CHANGE",(function(){return H})),i.d(t,"DEFINITION_CHANGE",(function(){return G})),i.d(t,"DESTROY",(function(){return M})),i.d(t,"DOWNLOAD_SPEED_CHANGE",(function(){return j})),i.d(t,"DURATION_CHANGE",(function(){return p})),i.d(t,"EMPTIED",(function(){return k})),i.d(t,"ENDED",(function(){return s})),i.d(t,"ENTER_PLAYER",(function(){return B})),i.d(t,"ERROR",(function(){return o})),i.d(t,"FPS_STUCK",(function(){return le})),i.d(t,"FULLSCREEN_CHANGE",(function(){return U})),i.d(t,"LEAVE_PLAYER",(function(){return N})),i.d(t,"LOADED_DATA",(function(){return g})),i.d(t,"LOADED_METADATA",(function(){return m})),i.d(t,"LOADING",(function(){return F})),i.d(t,"LOAD_START",(function(){return _})),i.d(t,"MINI_STATE_CHANGE",(function(){return z})),i.d(t,"PAUSE",(function(){return a})),i.d(t,"PIP_CHANGE",(function(){return K})),i.d(t,"PLAY",(function(){return n})),i.d(t,"PLAYER_BLUR",(function(){return C})),i.d(t,"PLAYER_FOCUS",(function(){return x})),i.d(t,"PLAYING",(function(){return r})),i.d(t,"PLAYNEXT",(function(){return J})),i.d(t,"PROGRESS",(function(){return b})),i.d(t,"RATE_CHANGE",(function(){return y})),i.d(t,"READY",(function(){return O})),i.d(t,"REPLAY",(function(){return D})),i.d(t,"RESET",(function(){return ie})),i.d(t,"RETRY",(function(){return W})),i.d(t,"ROTATE",(function(){return q})),i.d(t,"SCREEN_SHOT",(function(){return Z})),i.d(t,"SEEKED",(function(){return c})),i.d(t,"SEEKING",(function(){return l})),i.d(t,"SEI_PARSED",(function(){return Y})),i.d(t,"SHORTCUT",(function(){return Q})),i.d(t,"SOURCE_ERROR",(function(){return ne})),i.d(t,"SOURCE_SUCCESS",(function(){return re})),i.d(t,"STALLED",(function(){return E})),i.d(t,"STATS_EVENTS",(function(){return oe})),i.d(t,"SUSPEND",(function(){return S})),i.d(t,"SWITCH_SUBTITLE",(function(){return se})),i.d(t,"TIME_UPDATE",(function(){return u})),i.d(t,"URL_CHANGE",(function(){return R})),i.d(t,"URL_NULL",(function(){return P})),i.d(t,"USER_ACTION",(function(){return te})),i.d(t,"VIDEO_EVENTS",(function(){return ae})),i.d(t,"VIDEO_RESIZE",(function(){return X})),i.d(t,"VOLUME_CHANGE",(function(){return v})),i.d(t,"WAITING",(function(){return d})),i.d(t,"XGLOG",(function(){return ee}));var n="play",r="playing",s="ended",a="pause",o="error",l="seeking",c="seeked",u="timeupdate",d="waiting",h="canplay",f="canplaythrough",p="durationchange",v="volumechange",g="loadeddata",m="loadedmetadata",y="ratechange",b="progress",_="loadstart",k="emptied",E="stalled",S="suspend",w="abort",T="bufferedChange",x="focus",C="blur",O="ready",P="urlNull",A="autoplay_started",L="autoplay_was_prevented",I="complete",D="replay",M="destroy",R="urlchange",j="download_speed_change",N="leaveplayer",B="enterplayer",F="loading",U="fullscreen_change",H="cssFullscreen_change",z="mini_state_change",G="definition_change",V="before_definition_change",$="after_definition_change",Y="SEI_PARSED",W="retry",X="video_resize",K="pip_change",q="rotate",Z="screenShot",J="playnext",Q="shortcut",ee="xglog",te="user_action",ie="reset",ne="source_error",re="source_success",se="switch_subtitle",ae=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],oe={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},le="fps_stuck"},356:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=/(Android)\s([\d.]+)/,r=/(Version)\/([\d.]+)/,s=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],a={get device(){return a.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(i){return t[i].test(e)})))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),s=/(?:iPad|PlayBook)/.test(e)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,a=s||n&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),o=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isPhone:o,isIpad:s,isIos:o||s,isAndroid:n,isPc:!(o||n||i||a),isSymbian:i,isWindowsPhone:t,isFireFox:r}},get osVersion(){if("undefined"==typeof navigator)return 0;var e=navigator.userAgent,t="",i=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?r:n)?t.exec(e):[];if(i&&i.length>=3){var s=i[2].split(".");return s.length>0?parseInt(s[0]):0}return 0},get isWeixin(){if("undefined"==typeof navigator)return!1;return!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())},isSupportMP4:function(){var e={isSupport:!1,mime:""};if("undefined"==typeof document)return e;if(this.supportResult)return this.supportResult;var t=document.createElement("video");return"function"==typeof t.canPlayType&&s.map((function(i){"probably"===t.canPlayType('video/mp4; codecs="'.concat(i,'"'))&&(e.isSupport=!0,e.mime+="||".concat(i))})),this.supportResult=e,t=null,e},isMSESupport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if("undefined"==typeof MediaSource||!MediaSource)return!1;try{return MediaSource.isTypeSupported(e)}catch(t){return this._logger.error(e,t),!1}},isHevcSupported:function(){return!("undefined"==typeof MediaSource||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))},probeConfigSupported:function(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||"undefined"==typeof navigator)return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var i=e.video||{},n=e.audio||{};try{var r=MediaSource.isTypeSupported(i.contentType),s=MediaSource.isTypeSupported(n.contentType);return Promise.resolve({supported:r&&s,smooth:!1,powerEfficient:!1})}catch(e){return Promise.resolve(t)}}}},357:function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return v}));var n=i(370),r=i.n(n),s=(i(361),i(0)),a=i(2),o=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};const l=/^(\w+)\-/,c=s.b.extend({props:{icon:{type:String,default:""},link:{type:String,default:""}}});let u=class extends c{getClass(e){return l.test(e)?e.replace(l,(...e)=>"reco"===e[1]?"iconfont "+e[0]:`${e[1]} ${e[0]}`):e}go(e){""!==e&&window.open(e)}render(){return(0,arguments[0])("i",r()([{},{class:this.getClass(this.icon),on:{click:this.go.bind(this,this.link)}}]),[this.$slots.default])}};u=o([a.b],u);var d=u,h=function(e,t,i,n){var r,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(s<3?r(a):s>3?r(t,i,a):r(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a};const f=s.b.extend({props:{delay:{type:String,default:"0"},duration:{type:String,default:".25"},transform:{type:Array,default:()=>["translateY(-20px)","translateY(0)"]}}});let p=class extends f{setStyle(e){e.style.transition=`transform ${this.duration}s ease-in-out ${this.delay}s, opacity ${this.duration}s ease-in-out ${this.delay}s`,e.style.transform=this.transform[0],e.style.opacity=0}unsetStyle(e){e.style.transform=this.transform[1],e.style.opacity=1}render(){return(0,arguments[0])("transition",{attrs:{name:"module"},on:{enter:this.setStyle,appear:this.setStyle,"before-leave":this.setStyle,"after-appear":this.unsetStyle,"after-enter":this.unsetStyle}},[this.$slots.default])}};p=h([a.b],p);var v=p},358:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(350),r=i(351),s=i(352),a=i(384);function o(e,t){s.b.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var l=function(){function e(t){Object(n.b)(this,e),r.b.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),Object(a.a)(this),this.__args=t,this.__events={},this.__onceEvents={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return Object(n.c)(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||(e=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=r.b.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var i=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){i.__events[e]=t,i.player.on(e,t)})):o(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){var i=this;e&&t&&this.player?"string"==typeof e?(this.__onceEvents[e]=t,this.player.once(e,t)):Array.isArray(e)&&e.forEach((function(n){i.__onceEvents[n]=t,i.player.once(e,t)})):o(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var i=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(n){delete i.__events[e],i.player.off(n,t)})):o(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;["__events","__onceEvents"].forEach((function(t){Object.keys(e[t]).forEach((function(i){e[t][i]&&e.off(i,e[t][i]),i&&delete e[t][i]}))})),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(e){var t;if(this.player){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(t=this.player).emit.apply(t,[e].concat(n))}}},{key:"emitUserAction",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.player){var r=Object(n.i)(Object(n.i)({},i),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,r)}}},{key:"hook",value:function(e,t){return a.c.call.apply(a.c,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return a.g.call.apply(a.g,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return a.d.call.apply(a.d,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return i&&(t.pluginName=i),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,i=this.pluginName;this.offAll(),r.b.clearAllTimers(this),r.b.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(i),Object(a.b)(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.defineProperty(e,i,t[i])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}()},361:function(e,t,i){"use strict";var n=i(22),r=i(4),s=i(371);n({global:!0},{Reflect:{}}),s(r.Reflect,"Reflect",!0)},362:function(e,t){var i={utf8:{stringToBytes:function(e){return i.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(i.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],i=0;i<e.length;i++)t.push(255&e.charCodeAt(i));return t},bytesToString:function(e){for(var t=[],i=0;i<e.length;i++)t.push(String.fromCharCode(e[i]));return t.join("")}}};e.exports=i},364:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"}},365:function(e,t,i){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function s(){}function a(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function o(e,t,i,n,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new a(i,n||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new s:delete e._events[t]}function c(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(r=!1)),c.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},c.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a},c.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},c.prototype.emit=function(e,t,i,n,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,n),!0;case 5:return u.fn.call(u.context,t,i,n,s),!0;case 6:return u.fn.call(u.context,t,i,n,s,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,i);break;case 4:u[c].fn.call(u[c].context,t,i,n);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},c.prototype.on=function(e,t,i){return o(this,e,t,i,!1)},c.prototype.once=function(e,t,i){return o(this,e,t,i,!0)},c.prototype.removeListener=function(e,t,i,n){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return l(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||n&&!a.once||i&&a.context!==i||l(this,s);else{for(var o=0,c=[],u=a.length;o<u;o++)(a[o].fn!==t||n&&!a[o].once||i&&a[o].context!==i)&&c.push(a[o]);c.length?this._events[s]=1===c.length?c[0]:c:l(this,s)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&l(this,t)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c},367:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return l}));var n=i(350),r=i(419),s=i(351),a={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},o={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},l=Object(n.c)((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};Object(n.b)(this,e);var a=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.media){var l=i.mediaError?i.mediaError:t.media.error||{},c=t.duration,u=t.currentTime,d=t.ended,h=t.src,f=t.currentSrc,p=t.media,v=p.readyState,g=p.networkState,m=i.errorCode||l.code;o[m]&&(m=o[m]);var y={playerVersion:r.a,currentTime:u,duration:c,ended:d,readyState:v,networkState:g,src:h||f,errorType:i.errorType,errorCode:m,message:i.errorMessage||l.message,mediaError:l,originError:i.originError?i.originError.stack:"",host:s.b.getHostFromUrl(h||f)};return i.ext&&Object.keys(i.ext).map((function(e){y[e]=i.ext[e]})),y}if(arguments.length>1){for(var b={playerVersion:r.a,domain:document.domain},_=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],k=0;k<arguments.length;k++)b[_[k]]=arguments[k];return b.ex=a?(a[arguments[0]]||{}).msg:"",b}}))},368:function(e,t,i){var n=i(466);function r(e,t,i,n,r){var a=s.apply(this,arguments);return e.addEventListener(i,a,r),{destroy:function(){e.removeEventListener(i,a,r)}}}function s(e,t,i,r){return function(i){i.delegateTarget=n(i.target,t),i.delegateTarget&&r.call(e,i)}}e.exports=function(e,t,i,n,s){return"function"==typeof e.addEventListener?r.apply(null,arguments):"function"==typeof i?r.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return r(e,t,i,n,s)})))}},369:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(350),r=i(351),s={lang:{},langKeys:[],textKeys:[]};function a(e,t){return Object.keys(t).forEach((function(i){var s,o=r.b.typeOf(t[i]),l=r.b.typeOf(e[i]);"Array"===o?("Array"!==l&&(e[i]=[]),(s=e[i]).push.apply(s,Object(n.k)(t[i]))):"Object"===o?("Object"!==l&&(e[i]={}),a(e[i],t[i])):e[i]=t[i]})),e}function o(){Object.keys(s.lang.en).map((function(e){s.textKeys[e]=e}))}function l(e,t){var i=e.LANG;if(t||(t=s),t.lang){var n=e.TEXT||{};"zh"===i&&(i="zh-cn"),t.lang[i]?a(t.lang[i],n):(t.langKeys.push(i),t.lang[i]=n),o()}}l({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var c={get textKeys(){return s.textKeys},get langKeys(){return s.langKeys},get lang(){var e={};return s.langKeys.map((function(t){e[t]=s.lang[t]})),s.lang["zh-cn"]&&(e.zh=s.lang["zh-cn"]||{}),e},extend:function(e,t){var i=[];if(t||(t=s),t.lang){i="Array"!==r.b.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e;var n=t.lang;i.map((function(e){"zh"===e.LANG&&(e.LANG="zh-cn"),n[e.LANG]?a(n[e.LANG]||{},e.TEXT||{}):l(e,t)})),o()}},use:l,init:function(e){var t,i={lang:{},langKeys:[],textKeys:{},pId:e};return a(i.lang,s.lang),(t=i.langKeys).push.apply(t,Object(n.k)(s.langKeys)),a(i.textKeys,s.textKeys),i}}},370:function(e,t,i){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t,i=1;i<arguments.length;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)}var r=["attrs","props","domProps"],s=["class","style","directives"],a=["on","nativeOn"],o=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=function(e){return e.reduce((function(e,t){for(var i in t)if(e[i])if(-1!==r.indexOf(i))e[i]=n({},e[i],t[i]);else if(-1!==s.indexOf(i)){var l=e[i]instanceof Array?e[i]:[e[i]],c=t[i]instanceof Array?t[i]:[t[i]];e[i]=[].concat(l,c)}else if(-1!==a.indexOf(i))for(var u in t[i])if(e[i][u]){var d=e[i][u]instanceof Array?e[i][u]:[e[i][u]],h=t[i][u]instanceof Array?t[i][u]:[t[i][u]];e[i][u]=[].concat(d,h)}else e[i][u]=t[i][u];else if("hook"===i)for(var f in t[i])e[i][f]=e[i][f]?o(e[i][f],t[i][f]):t[i][f];else e[i]=t[i];else e[i]=t[i];return e}),{})}},371:function(e,t,i){"use strict";var n=i(18).f,r=i(14),s=i(27)("toStringTag");e.exports=function(e,t,i){e&&!i&&(e=e.prototype),e&&!r(e,s)&&n(e,s,{configurable:!0,value:t})}},372:function(e,t){var i,n;i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],i=0,n=0;i<e.length;i++,n+=8)t[n>>>5]|=e[i]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],i=0;i<32*e.length;i+=8)t.push(e[i>>>5]>>>24-i%32&255);return t},bytesToHex:function(e){for(var t=[],i=0;i<e.length;i++)t.push((e[i]>>>4).toString(16)),t.push((15&e[i]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var r=e[n]<<16|e[n+1]<<8|e[n+2],s=0;s<4;s++)8*n+6*s<=8*e.length?t.push(i.charAt(r>>>6*(3-s)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,r=0;n<e.length;r=++n%4)0!=r&&t.push((i.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|i.indexOf(e.charAt(n))>>>6-2*r);return t}},e.exports=n},373:function(e,t){function i(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(i(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&i(e.slice(0,0))}(e)||!!e._isBuffer)}},374:function(e,t){!function(e,t){"use strict";if(!e.setImmediate){var i,n,r,s,a,o=1,l={},c=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){process.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){f(e.data)},i=function(e){r.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,i=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):i=function(e){setTimeout(f,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),i=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[o]=r,i(o),o++},d.clearImmediate=h}function h(e){delete l[e]}function f(e){if(c)setTimeout(f,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(void 0,i)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?"undefined"==typeof global?this:global:self)},379:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},r=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"]},383:function(e,t,i){var n,r,s,a,o;n=i(372),r=i(362).utf8,s=i(373),a=i(362).bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):r.stringToBytes(e):s(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var i=n.bytesToWords(e),l=8*e.length,c=1732584193,u=-271733879,d=-1732584194,h=271733878,f=0;f<i.length;f++)i[f]=16711935&(i[f]<<8|i[f]>>>24)|4278255360&(i[f]<<24|i[f]>>>8);i[l>>>5]|=128<<l%32,i[14+(l+64>>>9<<4)]=l;var p=o._ff,v=o._gg,g=o._hh,m=o._ii;for(f=0;f<i.length;f+=16){var y=c,b=u,_=d,k=h;c=p(c,u,d,h,i[f+0],7,-680876936),h=p(h,c,u,d,i[f+1],12,-389564586),d=p(d,h,c,u,i[f+2],17,606105819),u=p(u,d,h,c,i[f+3],22,-1044525330),c=p(c,u,d,h,i[f+4],7,-176418897),h=p(h,c,u,d,i[f+5],12,1200080426),d=p(d,h,c,u,i[f+6],17,-1473231341),u=p(u,d,h,c,i[f+7],22,-45705983),c=p(c,u,d,h,i[f+8],7,1770035416),h=p(h,c,u,d,i[f+9],12,-1958414417),d=p(d,h,c,u,i[f+10],17,-42063),u=p(u,d,h,c,i[f+11],22,-1990404162),c=p(c,u,d,h,i[f+12],7,1804603682),h=p(h,c,u,d,i[f+13],12,-40341101),d=p(d,h,c,u,i[f+14],17,-1502002290),c=v(c,u=p(u,d,h,c,i[f+15],22,1236535329),d,h,i[f+1],5,-165796510),h=v(h,c,u,d,i[f+6],9,-1069501632),d=v(d,h,c,u,i[f+11],14,643717713),u=v(u,d,h,c,i[f+0],20,-373897302),c=v(c,u,d,h,i[f+5],5,-701558691),h=v(h,c,u,d,i[f+10],9,38016083),d=v(d,h,c,u,i[f+15],14,-660478335),u=v(u,d,h,c,i[f+4],20,-405537848),c=v(c,u,d,h,i[f+9],5,568446438),h=v(h,c,u,d,i[f+14],9,-1019803690),d=v(d,h,c,u,i[f+3],14,-187363961),u=v(u,d,h,c,i[f+8],20,1163531501),c=v(c,u,d,h,i[f+13],5,-1444681467),h=v(h,c,u,d,i[f+2],9,-51403784),d=v(d,h,c,u,i[f+7],14,1735328473),c=g(c,u=v(u,d,h,c,i[f+12],20,-1926607734),d,h,i[f+5],4,-378558),h=g(h,c,u,d,i[f+8],11,-2022574463),d=g(d,h,c,u,i[f+11],16,1839030562),u=g(u,d,h,c,i[f+14],23,-35309556),c=g(c,u,d,h,i[f+1],4,-1530992060),h=g(h,c,u,d,i[f+4],11,1272893353),d=g(d,h,c,u,i[f+7],16,-155497632),u=g(u,d,h,c,i[f+10],23,-1094730640),c=g(c,u,d,h,i[f+13],4,681279174),h=g(h,c,u,d,i[f+0],11,-358537222),d=g(d,h,c,u,i[f+3],16,-722521979),u=g(u,d,h,c,i[f+6],23,76029189),c=g(c,u,d,h,i[f+9],4,-640364487),h=g(h,c,u,d,i[f+12],11,-421815835),d=g(d,h,c,u,i[f+15],16,530742520),c=m(c,u=g(u,d,h,c,i[f+2],23,-995338651),d,h,i[f+0],6,-198630844),h=m(h,c,u,d,i[f+7],10,1126891415),d=m(d,h,c,u,i[f+14],15,-1416354905),u=m(u,d,h,c,i[f+5],21,-57434055),c=m(c,u,d,h,i[f+12],6,1700485571),h=m(h,c,u,d,i[f+3],10,-1894986606),d=m(d,h,c,u,i[f+10],15,-1051523),u=m(u,d,h,c,i[f+1],21,-2054922799),c=m(c,u,d,h,i[f+8],6,1873313359),h=m(h,c,u,d,i[f+15],10,-30611744),d=m(d,h,c,u,i[f+6],15,-1560198380),u=m(u,d,h,c,i[f+13],21,1309151649),c=m(c,u,d,h,i[f+4],6,-145523070),h=m(h,c,u,d,i[f+11],10,-1120210379),d=m(d,h,c,u,i[f+2],15,718787259),u=m(u,d,h,c,i[f+9],21,-343485551),c=c+y>>>0,u=u+b>>>0,d=d+_>>>0,h=h+k>>>0}return n.endian([c,u,d,h])})._ff=function(e,t,i,n,r,s,a){var o=e+(t&i|~t&n)+(r>>>0)+a;return(o<<s|o>>>32-s)+t},o._gg=function(e,t,i,n,r,s,a){var o=e+(t&n|i&~n)+(r>>>0)+a;return(o<<s|o>>>32-s)+t},o._hh=function(e,t,i,n,r,s,a){var o=e+(t^i^n)+(r>>>0)+a;return(o<<s|o>>>32-s)+t},o._ii=function(e,t,i,n,r,s,a){var o=e+(i^(t|~n))+(r>>>0)+a;return(o<<s|o>>>32-s)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var i=n.wordsToBytes(o(e,t));return t&&t.asBytes?i:t&&t.asString?a.bytesToString(i):n.bytesToHex(i)}},384:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return s})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return c})),i.d(t,"f",(function(){return h})),i.d(t,"g",(function(){return a})),i.d(t,"h",(function(){return l}));var n=i(350);function r(e,t,i){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];var a=t.call.apply(t,[e].concat(r));i&&"function"==typeof i&&(a&&a.then?a.then((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];i.call.apply(i,[e].concat(n))})):i.call.apply(i,[e].concat(r)))}function s(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var s=arguments,a=this;if(i.pre)try{var o;(o=i.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(t.message),t}if(this.__hooks&&this.__hooks[e])try{var l,c=(l=this.__hooks[e]).call.apply(l,[this,this].concat(Array.prototype.slice.call(arguments)));c?c.then?c.then((function(e){!1!==e&&r.apply(void 0,[a,t,i.next].concat(Object(n.k)(s)))})).catch((function(e){throw e})):r.apply(void 0,[this,t,i.next].concat(Array.prototype.slice.call(arguments))):void 0===c&&r.apply(void 0,[this,t,i.next].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(t.message),t}else r.apply(void 0,[this,t,i.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function a(e,t){var i=this.__hooks;if(i)return i.hasOwnProperty(e)?(i&&(i[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function o(e,t){var i=this.__hooks;i&&delete i[e]}function l(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.useHooks&&t.useHooks.apply(t,n)}}function c(e){if(this.plugins&&this.plugins[e.toLowerCase()]){var t=this.plugins[e.toLowerCase()];if(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.removeHooks&&t.removeHooks.apply(t,n)}}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function d(e){e.__hooks=null}function h(e,t,i){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];if(!e.__hooks||!e.__hooks[t])return i.call.apply(i,[e,e].concat(r));var a,o=(a=e.__hooks[t]).call.apply(a,[e,e].concat(r));if(o&&o.then)o.then((function(t){return!1===t?null:i.call.apply(i,[e,e].concat(r))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==o)return i.call.apply(i,[e,e].concat(r))}},385:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return l}));var n=i(350),r=i(365),s={},a=null,o=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"add",value:function(e){e&&(s[e.playerId]=e,1===Object.keys(s).length&&this.setActive(e.playerId,!0))}},{key:"remove",value:function(e){e&&(e.isUserActive,delete s[e.playerId])}},{key:"_iterate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var i in s)if(Object.prototype.hasOwnProperty.call(s,i)){var n=s[i];if(t){if(e(n))break}else e(n)}}},{key:"forEach",value:function(e){this._iterate(e)}},{key:"find",value:function(e){var t=null;return this._iterate((function(i){var n=e(i);return n&&(t=i),n}),!0),t}},{key:"findAll",value:function(e){var t=[];return this._iterate((function(i){e(i)&&t.push(i)})),t}},{key:"setActive",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(s[e])return t?this.forEach((function(t){e===t.playerId?(t.isUserActive=!0,t.isInstNext=!1):t.isUserActive=!1})):s[e].isUserActive=t,e}},{key:"getActiveId",value:function(){for(var e=Object.keys(s),t=0;t<e.length;t++){var i=s[e[t]];if(i&&i.isUserActive)return e[t]}return null}},{key:"setNext",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(s[e])return t?this.forEach((function(t){e===t.playerId?(t.isUserActive=!1,t.isInstNext=!0):t.isInstNext=!1})):s[e].isInstNext=t,e}}],[{key:"getInstance",value:function(){return a||(a=new i),a}}]),i}(r.EventEmitter);function l(e){for(var t=Object.keys(s),i=0;i<t.length;i++){var n=s[t[i]];if(n.root===e)return n}return null}},387:function(e,t,i){var n="undefined"!=typeof global&&global||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(r.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(r.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i(374),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof global&&global.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof global&&global.clearImmediate||this&&this.clearImmediate},392:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}}},393:function(e,t,i){"use strict";var n=i(354);i.d(t,"a",(function(){return n}))},394:function(e,t,i){"use strict";i.d(t,"a",(function(){return At}));var n=i(350),r=i(356),s=i(351),a=i(354),o=i(352),l=i(353);function c(){return(new Date).getTime()}var u="loadstart",d="loadeddata",h="firstFrame",f="waitingStart",p="waitingEnd",v="seekStart",g="seekEnd",m=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a)),Object(n.e)(Object(n.a)(e),"_onTimeupdate",(function(){e._state.isTimeUpdate=!0,e._state.autoplayStart&&(o.b.logInfo("[xgLogger]".concat(e.player.playerId," _onTimeupdate")),e._sendFF("onTimeupdate"))})),Object(n.e)(Object(n.a)(e),"_onAutoplayStart",(function(){o.b.logInfo("[xgLogger]".concat(e.player.playerId," _onAutoplayStart")),e._state.autoplayStart=!0,e.vt&&e._sendFF("onAutoplayStart")})),Object(n.e)(Object(n.a)(e),"_onReset",(function(){e._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},e.vt=0,e.pt=0,e.fvt=0,e.newPointTime=c(),e.loadedCostTime=0,e.startCostTime=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e.fixedWaitingStart=0,e._isWaiting=!1,e._waitTimer&&s.b.clearTimeout(Object(n.a)(e),e._waitTimer),e._waittTimer&&s.b.clearTimeout(Object(n.a)(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0})),Object(n.e)(Object(n.a)(e),"_onSeeking",(function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=c(),e.emitLog(v,{start:c()}))})),Object(n.e)(Object(n.a)(e),"_onSeeked",(function(){e.suspendSeekingStatus("seeked")})),Object(n.e)(Object(n.a)(e),"_onWaitingLoadStart",(function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=c(),e.fixedWaitingStart=c(),e._waitType=1,e.emitLog(f,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:1,endType:"loadstart"}))})),Object(n.e)(Object(n.a)(e),"_onWaiting",(function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e.fixedWaitingStart=c(),e._waitTimer=s.b.setTimeout(Object(n.a)(e),(function(){e._isWaiting&&(e.waitingStart=c(),s.b.clearTimeout(Object(n.a)(e),e._waitTimer),e._waitTimer=null,e._startWaitTimeout(),e.emitLog(f,{fixedStart:e.fixedWaitingStart,start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))}),200))})),Object(n.e)(Object(n.a)(e),"_onError",(function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")})),Object(n.e)(Object(n.a)(e),"_onPlaying",(function(){e._isWaiting&&e.suspendWaitingStatus("playing")})),e}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=c(),this.loadedCostTime=0,this.startCostTime=0,this.on(a.LOAD_START,(function(){var t=e._state,i=t.autoplayStart,n=t.isFFSend;e.startCostTime=c()-e.newPointTime,o.b.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(i," isFFSend:").concat(n," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),n||(!t.isLs&&e.emitLog(u,{}),t.isLs=!0,t.isTimeUpdate=!1,t.isFFLoading=!0,e.pt=c(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())})),this.on(a.LOADED_DATA,(function(){e.vt=c(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var t=e._state,i=t.isTimeUpdate,n=t.isFFSend,r=t.autoplayStart;o.b.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(i||r)&&e._sendFF("loadedData"),n||e.emitLog(d,{}),e.suspendWaitingStatus("loadeddata")})),this.on(a.SEEKING,this._onSeeking),this.on(a.SEEKED,this._onSeeked),this.on(a.DESTROY,(function(){e.endState("destroy")})),this.on(a.URL_CHANGE,(function(){e.endState("urlChange"),o.b.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()})),this.on([a.PLAYING,a.CANPLAY],this._onPlaying),this.on(a.WAITING,this._onWaiting),this.on(a.ERROR,this._onError),this.on(a.RESET,(function(){o.b.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()}))}},{key:"_initOnceEvents",value:function(){this.off(a.AUTOPLAY_STARTED,this._onAutoplayStart),this.off(a.TIME_UPDATE,this._onTimeupdate),this.once(a.AUTOPLAY_STARTED,this._onAutoplayStart),this.once(a.TIME_UPDATE,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=c();var t=this._state,i=t.isFFLoading,n=t.isFFSend;o.b.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(i," !isFFSend:").concat(!n)),this.vt>0&&i&&!n&&(o.b.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(h,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&s.b.clearTimeout(this,this._waittTimer),this._waittTimer=s.b.setTimeout(this,(function(){e.suspendWaitingStatus("timeout"),s.b.clearTimeout(e,e._waittTimer),e._waittTimer=null}),this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var t=c(),i=t-this.seekingStart;this.seekingStart=0,this.emitLog(g,{end:t,costTime:i,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(s.b.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(s.b.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var t=c(),i=t-this.waitingStart,n=t-this.fixedWaitingStart,r=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(p,{fixedCostTime:n>r?r:n,costTime:i>r?r:i,type:"loadeddata"===e?1:this._waitType,endType:2===this._waitType?"seek":e})}}},{key:"emitLog",value:function(e,t){var i=this.player;this.emit(a.XGLOG,Object(n.i)({t:c(),host:s.b.getHostFromUrl(i.currentSrc),vtype:i.vtype,eventType:e,currentTime:this.player.currentTime,readyState:i.video.readyState,networkState:i.video.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),i}(l.b);function y(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var b=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"registerIcons",value:function(){return{replay:y}}},{key:"afterCreate",value:function(){var e=this;l.b.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",(function(){e.player.replay()}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(a.ENDED,(function(){if(e.playerConfig.loop||s.b.addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var i=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof i&&i.indexOf("none")>-1)return null;t.setAttribute("transform",i)}}})),this.on(a.PLAY,(function(){e.hide()}))}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),s.b.removeClass(this.player.root,"replay")}},{key:"show",value:function(e){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),i}(l.b),_=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){s.b.addClass(this.root,"hide")}},{key:"show",value:function(e){s.b.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(a.ENDED,(function(){e.isEndedShow&&s.b.removeClass(e.root,"hide")})),this.config.hideCanplay?(this.once(a.TIME_UPDATE,(function(){e.onTimeUpdate()})),this.on(a.URL_CHANGE,(function(){s.b.removeClass(e.root,"hide"),s.b.addClass(e.root,"xg-showplay"),e.once(a.TIME_UPDATE,(function(){e.onTimeUpdate()}))}))):this.on(a.PLAY,(function(){s.b.addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?s.b.removeClass(this.root,"xg-showplay"):this.once(a.TIME_UPDATE,(function(){e.onTimeUpdate()}))}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"getBgSize",value:function(e){var t="";switch(e){case"cover":t="cover";break;case"contain":t="contain";break;case"fixHeight":t="auto 100%";break;default:t=""}return t?"background-size: ".concat(t,";"):""}},{key:"render",value:function(){var e=this.config,t=e.poster,i=e.hideCanplay,n=e.fillMode,r=e.notHidden,s=this.getBgSize(n),a=t?"background-image:url(".concat(t,");").concat(s):s;return'<xg-poster class="xgplayer-poster '.concat(r?"xg-not-hidden":i?"xg-showplay":"",'" style="').concat(a,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,notHidden:!1,poster:"",fillMode:"fixWidth"}}}]),i}(l.b),k=i(379);function E(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function S(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var w={};function T(e){e?window.clearTimeout(e):Object.keys(w).map((function(e){window.clearTimeout(w[e].id),delete w[e]}))}var x=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),r=t.call(this,e),Object(n.e)(Object(n.a)(r),"onPlayerReset",(function(){r.autoPlayStart=!1;var e="auto"===r.config.mode?"auto-hide":"hide";r.setAttr("data-state","play"),s.b.removeClass(r.root,e),r.show()})),Object(n.e)(Object(n.a)(r),"onAutoplayStart",(function(){if(!r.autoPlayStart){var e="auto"===r.config.mode?"auto-hide":"hide";s.b.addClass(r.root,e),r.autoPlayStart=!0,r.onPlayPause("play")}})),r.autoPlayStart=!1,r}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this,t=this.player,i=this.playerConfig;this.initIcons(),this.once(a.READY,(function(){i&&(i.lang&&"en"===i.lang?s.b.addClass(t.root,"lang-is-en"):"jp"===i.lang&&s.b.addClass(t.root,"lang-is-jp"))})),this.on(a.AUTOPLAY_STARTED,this.onAutoplayStart),i.autoplay||this.show(),this.on(a.AUTOPLAY_PREVENTED,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),s.b.removeClass(e.root,t),e.show()})),this.on(a.PLAY,(function(){e.onPlayPause("play")})),this.on(a.PAUSE,(function(){e.onPlayPause("pause")})),this.on(a.RESET,(function(){e.onPlayerReset()})),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(t){t.cancelable&&t.preventDefault(),t.stopPropagation();var i=e.player.paused;e.emitUserAction(t,"switch_play_pause",{props:"paused",from:i,to:!i})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:E,class:"xg-icon-play"},startPause:{icon:S,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){s.b.addClass(this.root,"hide")}},{key:"show",value:function(e){s.b.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){s.b.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){s.b.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;this._animateId=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};return w[e]&&window.clearTimeout(w[e].id),w[e]={},i.start&&i.start(),w[e].id=window.setTimeout((function(){i.end&&i.end(),window.clearTimeout(w[e].id),delete w[e]}),t),w[e].id}("pauseplay",400,{start:function(){s.b.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){s.b.removeClass(t.root,"interact"),!e&&t.hide(),t._animateId=null}})}},{key:"endAnimate",value:function(){s.b.removeClass(this.root,"interact"),T(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var t=this.player;(e.cancelable&&e.preventDefault(),e.stopPropagation(),t.state<k.a.READY)||(this.player.paused||t.state!==k.a.RUNNING?t.play():t.pause())}},{key:"onPlayPause",value:function(e){var t=this.config,i=this.player;if(i&&!(i.state<k.a.RUNNING)&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"!==t.mode){if(t.isShowPause&&i.paused&&!i.ended||t.isShowEnd&&i.ended)return this.switchStatus(),this.show(),void this.endAnimate();if(t.disableAnimate)return this.switchStatus(),void this.hide();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||i.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),T(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),i}(l.b),C=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"render",value:function(){var e=this.config.innerHtml,t=s.b.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var i="",n=1;n<=12;n++)i+='<div class="xgplayer-enter-bar'.concat(n,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(i,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),i}(l.b);function O(e,t,i){try{return' <div class="xg-tips '.concat(i?"hide":" ",'" lang-key="').concat(e.i18nKeys[t],'">\n    ').concat(e.i18n[t],"\n    </div>")}catch(e){return'<div class="xg-tips hide"></div>'}}var P=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys.MINISCREEN,'">').concat(this.i18n.MINISCREEN,"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_RIGHT,index:10}}}]),i}(l.b),A=i(365);function L(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!Number.isNaN(t)&&t}var I=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],D=I.length;function M(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"===Object(n.l)(e)&&e.nodeType){var t=function(e){return window.getComputedStyle(e)}(e);if("none"===t.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<D;t++){e[I[t]]=0}return e}();var i={};i.width=e.offsetWidth,i.height=e.offsetHeight;for(var r=i.isBorderBox="border-box"===t.boxSizing,s=0;s<D;s++){var a=I[s],o=t[a],l=parseFloat(o);i[a]=Number.isNaN(l)?0:l}var c=i.paddingLeft+i.paddingRight,u=i.paddingTop+i.paddingBottom,d=i.marginLeft+i.marginRight,h=i.marginTop+i.marginBottom,f=i.borderLeftWidth+i.borderRightWidth,p=i.borderTopWidth+i.borderBottomWidth,v=r,g=L(t.width);!1!==g&&(i.width=g+(v?0:c+f));var m=L(t.height);return!1!==m&&(i.height=m+(v?0:u+p)),i.innerWidth=i.width-(c+f),i.innerHeight=i.height-(u+p),i.outerWidth=i.width+d,i.outerHeight=i.height+h,i}}function R(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.identifier===t)return n}}var j="dragStart",N="dragMove",B="dragEnded",F={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},U=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.b)(this,i),(r=t.call(this)).isEnabled=!0,r.isDragging=!1,r.isDown=!1,r.position={},r.downPoint={},r.dragPoint={x:0,y:0},r.startPos={x:0,y:0},r._root=e instanceof Element?e:document.querySelector(e),r._handlerDom=s.handle instanceof Element?s.handle:document.querySelector(s.handle),r._root&&r._handlerDom?(r._bindStartEvent(),r):Object(n.j)(r)}return Object(n.c)(i,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),F[this._startKey].map((function(t){e["on".concat(t)]=e["on".concat(t)].bind(e)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;if(e){var i=F[this._startKey];i.map((function(e){window.addEventListener(e,t["on".concat(e)])})),this._boundPointerEvents=i}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(t){window.removeEventListener(t,e["on".concat(t)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){e.animate()})))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=R(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=R(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=R(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var i=M(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-i.height,this.startPos.maxX=window.innerWidth-i.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit(j,this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(B)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var i={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(i)&&this.dragRealStart(e,t),i}},{key:"dragMove",value:function(e,t){if(e=e||window.event,this.isDown){var i=this.startPos,n=i.x,r=i.y,s=this._dragPointerMove(e,t),a=s.x,o=s.y;a=this.checkContain("x",a,n),o=this.checkContain("y",o,r),this.position.x=n+a,this.position.y=r+o,this.dragPoint.x=a,this.dragPoint.y=o,this.emit(N,this.position)}}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,t,i){return t+i<0?0-i:"x"===e&&t+i>this.startPos.maxX?this.startPos.maxX-i:"y"===e&&t+i>this.startPos.maxY?this.startPos.maxY-i:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),i=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(t)?0:t,this.position.y=Number.isNaN(i)?0:i,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t=e.transform;if(0===t.indexOf("matrix")){var i=t.split(","),n=0===t.indexOf("matrix3d")?12:4,r=parseInt(i[n],10),s=parseInt(i[n+1],10);this.position.x+=r,this.position.y+=s}}},{key:"_getPositionCoord",value:function(e,t){if(-1!==e.indexOf("%")){var i=M(this._root.parentNode);return i?parseFloat(e)/100*i[t]:0}return parseInt(e,10)}}]),i}(i.n(A).a),H=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;Object(n.b)(this,i),r=t.call(this,e),Object(n.e)(Object(n.a)(r),"onCancelClick",(function(e){r.exitMini(),r.isClose=!0})),Object(n.e)(Object(n.a)(r),"onCenterClick",(function(e){var t=Object(n.a)(r).player;t.paused?t.play():t.pause()})),Object(n.e)(Object(n.a)(r),"onScroll",(function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-r.pos.scrollY)<50)){var t=parseInt(s.b.getCss(r.player.root,"height"));t+=r.config.scrollTop,r.pos.scrollY=window.scrollY,window.scrollY>t+5?!r.isMini&&!r.isClose&&r.getMini():window.scrollY<=t&&(r.isMini&&r.exitMini(),r.isClose=!1)}})),r.isMini=!1,r.isClose=!1;var a=Object(n.a)(r).config;return r.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:r.config.height,width:r.config.width,scrollY:window.scrollY||0},r.lastStyle=null,r}return Object(n.c)(i,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(a.PAUSE,(function(){e.setAttr("data-state","pause")})),this.on(a.PLAY,(function(){e.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var i={config:{onClick:function(){e.getMini()}}};t.controls.registerPlugin(P,i,P.pluginName)}var n=s.b.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",n,this.onCancelClick),this.bind(".play-icon",n,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new U(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:E,class:"xg-icon-play"},pause:{icon:S,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,i=this.playerConfig,n=this.config.target||this.player.root;this.lastStyle={},s.b.addClass(t.root,"xgplayer-mini"),["width","height","top","left"].map((function(t){e.lastStyle[t]=n.style[t],n.style[t]="".concat(e.pos[t],"px")})),i.fluid&&(n.style["padding-top"]=""),this.emit(a.MINI_STATE_CHANGE,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,i=this.playerConfig,n=this.config.target||this.player.root;s.b.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(t){n.style[t]=e.lastStyle[t]})),this.lastStyle=null,i.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]="".concat(100*i.height/i.width,"%")),this.emit(a.MINI_STATE_CHANGE,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=s.b.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      '.concat(O(this,"MINI_DRAG",this.playerConfig.isHideTips),'\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),i}(l.b),z=i(358),G=(i(368),i(384)),V={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},$=["videoClick","videoDbClick"],Y=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s)),Object(n.e)(Object(n.a)(e),"onMouseMove",(function(t){var i=Object(n.a)(e),r=i.player,s=i.playerConfig;r.isActive||(r.focus({autoHide:!s.closeDelayBlur}),!s.closeFocusVideoFocus&&r.media.focus())})),Object(n.e)(Object(n.a)(e),"onMouseEnter",(function(t){var i=Object(n.a)(e),r=i.playerConfig,s=i.player;!r.closeFocusVideoFocus&&s.media.focus(),r.closeDelayBlur?s.focus({autoHide:!1}):s.focus(),e.emit(a.ENTER_PLAYER)})),Object(n.e)(Object(n.a)(e),"onMouseLeave",(function(t){var i=e.playerConfig,n=i.closePlayerBlur,r=i.leavePlayerTime,s=i.closeDelayBlur;n||s||(r?e.player.focus({autoHide:!0,delay:r}):e.player.blur({ignorePaused:!0})),e.emit(a.LEAVE_PLAYER)})),Object(n.e)(Object(n.a)(e),"onVideoClick",(function(t){var i=Object(n.a)(e),r=i.player,s=i.playerConfig;t.target&&s.closeVideoClick||t.target!==r.root&&t.target!==r.media&&t.target!==r.innerContainer&&t.target!==r.media.__canvas||(t.preventDefault(),s.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout((function(){e._clickCount&&(e._clickCount--,Object(G.f)(Object(n.a)(e),$[0],(function(t,i){e.switchPlayPause(i.e)}),{e:t,paused:r.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)}),300))})),Object(n.e)(Object(n.a)(e),"onVideoDblClick",(function(t){var i=Object(n.a)(e),r=i.player,s=i.playerConfig;s.closeVideoDblclick||!t.target||t.target!==r.media&&t.target!==r.media.__canvas||(!s.closeVideoClick&&e._clickCount<2?e._clickCount=0:(e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),Object(G.f)(Object(n.a)(e),$[1],(function(t,i){e.emitUserAction(i.e,"switch_fullscreen",{props:"fullscreen",from:r.fullscreen,to:!r.fullscreen}),r.fullscreen?r.exitFullscreen():r.getFullscreen()}),{e:t,fullscreen:r.fullscreen})))})),e}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,$.map((function(t){e.__hooks[t]=null})),"mobile"===this.playerConfig.isMobileSimulateMode||"mobile"===r.a.device&&!r.a.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,t=this.player,i=t.media,n=t.root,r=this.playerConfig.enableContextmenu;n&&n.addEventListener("click",this.onVideoClick,!1),n&&n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(V).map((function(t){n.addEventListener(t,e[V[t]],!1)})),!r&&i&&i.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,i=t.video,n=t.root;this.clickTimer&&clearTimeout(this.clickTimer),n.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),i.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(V).map((function(t){n.removeEventListener(t,e[V[t]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),i}(z.a),W="press",X="pressend",K="doubleclick",q="click",Z="touchmove",J="touchstart",Q="touchend",ee={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},te={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function ie(e){return e&&e.length>0?e[e.length-1]:null}var ne=function(){function e(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};Object(n.b)(this,e),Object(n.e)(this,"onTouchStart",(function(e){var t=i._pos,n=i.root,r=ie(e.touches);t.x=r?parseInt(r.pageX,10):e.pageX,t.y=r?parseInt(r.pageX,10):e.pageX,t.start=!0,i.__setPress(e),n.addEventListener(i.events.end,i.onTouchEnd),n.addEventListener(i.events.cancel,i.onTouchCancel),n.addEventListener(i.events.move,i.onTouchMove),i.trigger(J,e)})),Object(n.e)(this,"onTouchCancel",(function(e){i.onTouchEnd(e)})),Object(n.e)(this,"onTouchEnd",(function(e){var t=i._pos,n=i.root;i.__clearPress(),n.removeEventListener(i.events.cancel,i.onTouchCancel),n.removeEventListener(i.events.end,i.onTouchEnd),n.removeEventListener(i.events.move,i.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&i.trigger(X,e),i.trigger(Q,e),!t.press&&!t.moving&&i.__setDb(e),t.press=!1,t.start=!1,t.moving=!1})),Object(n.e)(this,"onTouchMove",(function(e){var t=i._pos,n=i.config,r=ie(e.touches),s=r?parseInt(r.pageX,10):e.pageX,a=r?parseInt(r.pageY,10):e.pageX,o=s-t.x,l=a-t.y;Math.abs(l)<n.miniStep&&Math.abs(o)<n.miniStep||(i.__clearPress(),t.press&&i.trigger(X,e),t.press=!1,t.moving=!0,i.trigger(Z,e))})),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(r).map((function(e){i.config[e]=r[e]})),this.root=t,this.events="mouse"===r.eventType?te:ee,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return Object(n.c)(e,[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,i=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){t.trigger(W,e),t._pos.press=!0,t.__clearPress()}),i.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,i=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger(K,e);this.dbIntrvalId=setTimeout((function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger(q,e)}),i.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var i=this.__handlers[e],n=-1,r=0;r<i.length;r++)if(i[r]===t){n=r;break}n>=0&&this.__handlers[e].splice(n,1)}}},{key:"trigger",value:function(e,t){this.__handlers[e]&&this.__handlers[e].map((function(i){try{i(t)}catch(t){console.error("trigger>>:".concat(e),t)}}))}},{key:"destroy",value:function(){var e=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).forEach((function(i){e.root.removeEventListener(i,e[t[i]])}))}}]),e}();function re(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var se="auto",ae="seeking",oe="playbackrate",le=["videoClick","videoDbClick"],ce=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),r=t.call(this,e),Object(n.e)(Object(n.a)(r),"onTouchStart",(function(e){var t=Object(n.a)(r),i=t.player,a=t.config,o=t.pos,l=t.playerConfig,c=r.getTouche(e);if(c&&!a.disableGesture&&r.duration>0&&!i.ended){o.isStart=!0,r.timer&&clearTimeout(r.timer),s.b.checkIsFunction(l.disableSwipeHandler)&&l.disableSwipeHandler(),r.find(".xg-dur").innerHTML=s.b.format(r.duration);var u=r.root.getBoundingClientRect();90===i.rotateDeg?(o.top=u.left,o.left=u.top,o.width=u.height,o.height=u.width):(o.top=u.top,o.left=u.left,o.width=u.width,o.height=u.height);var d=parseInt(c.pageX-o.left,10),h=parseInt(c.pageY-o.top,10);o.x=90===i.rotateDeg?h:d,o.y=90===i.rotateDeg?d:h,o.scopeL=a.scopeL*o.width,o.scopeR=(1-a.scopeR)*o.width,o.scopeM1=o.width*(1-a.scopeM)/2,o.scopeM2=o.width-o.scopeM1}})),Object(n.e)(Object(n.a)(r),"onTouchMove",(function(e){var t=r.getTouche(e),i=Object(n.a)(r),s=i.pos,a=i.config,o=i.player;if(t&&!a.disableGesture&&r.duration&&s.isStart){var l=a.miniMoveStep,c=a.hideControlsActive,u=parseInt(t.pageX-s.left,10),d=parseInt(t.pageY-s.top,10),h=90===o.rotateDeg?d:u,f=90===o.rotateDeg?u:d;if(Math.abs(h-s.x)>l||Math.abs(f-s.y)>l){var p=h-s.x,v=f-s.y,g=s.scope;if(-1===g&&(0===(g=r.checkScope(h,f,p,v,s))&&(c?o.blur():o.focus({autoHide:!1}),!s.time&&(s.time=parseInt(1e3*o.currentTime,10)+1e3*r.timeOffset)),s.scope=g),-1===g||g>0&&!a.gestureY||0===g&&!a.gestureX)return;e.cancelable&&e.preventDefault(),r.executeMove(p,v,g,s.width,s.height),s.x=h,s.y=f}}})),Object(n.e)(Object(n.a)(r),"onTouchEnd",(function(e){var t=Object(n.a)(r),i=t.player,a=t.pos,o=t.playerConfig;if(setTimeout((function(){i.getPlugin("progress")&&i.getPlugin("progress").resetSeekState()}),10),a.isStart){a.scope>-1&&e.cancelable&&e.preventDefault();var l=r.config,c=l.disableGesture,u=l.gestureX;!c&&u?r.endLastMove(a.scope):a.time=0,a.scope=-1,r.resetPos(),s.b.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),r.changeAction(se)}})),Object(n.e)(Object(n.a)(r),"onRootTouchMove",(function(e){!r.config.disableGesture&&r.config.gestureX&&r.checkIsRootTarget(e)&&(e.stopPropagation(),r.pos.isStart?r.onTouchMove(e):r.onTouchStart(e))})),Object(n.e)(Object(n.a)(r),"onRootTouchEnd",(function(e){r.pos.isStart&&r.checkIsRootTarget(e)&&(e.stopPropagation(),r.onTouchEnd(e))})),r.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},r.timer=null,r}return Object(n.c)(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:re,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;le.map((function(t){e.__hooks[t]=null}));var t=this.playerConfig,i=this.config,n=this.player;!0===t.closeVideoDblclick&&(i.closedbClick=!0),this.resetPos(),s.b.isUndefined(t.disableGesture)||(i.disableGesture=!!t.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=s.b.createDom("xg-mask","",{},"xgmask"),n.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var r="mouse"===this.domEventType?"mouse":"touch";this.touch=new ne(this.root,{eventType:r,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(e){e.preventDefault()})),n.root.addEventListener("touchmove",this.onRootTouchMove,!0),n.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(a.DURATION_CHANGE,(function(){var t=e.player,i=e.config;1e3*t.duration<i.moveDuration&&(i.moveDuration=1e3*t.duration)})),this.on([a.CANPLAY,a.ENDED],(function(){var t=e.pos,i=t.time;!t.isStart&&i>0&&(e.pos.time=0)}));var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).map((function(t){e.touch.on(t,(function(i){e[o[t]](i)}))})),!i.disableActive){var l=n.plugins.progress;l&&(l.addCallBack("dragmove",(function(t){e.activeSeekNote(t.currentTime,t.forward)})),["dragend","click"].forEach((function(t){l.addCallBack(t,(function(){e.changeAction(se)}))})))}}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;if(e&&e.usable){this.thumbnail=e.createThumbnail(null,"mobile-thumbnail");var t=this.find(".time-preview");t.insertBefore(this.thumbnail,t.children[0])}}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,i=e.progressColor,n=e.timePreviewStyle,r=e.curTimeColor,a=e.durationColor;if(t&&(this.find(".xg-curbar").style.backgroundColor=t),i&&(this.find(".xg-bar").style.backgroundColor=i),n){var o=this.find(".time-preview");Object.keys(n).forEach((function(e){o.style[e]=n[e]}))}var l=r||t,c=a;l&&(this.find(".xg-cur").style.color=l),c&&(this.find(".xg-dur").style.color=c),this.config.disableTimeProgress&&s.b.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(t){e.pos[t]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player;this.root.setAttribute("data-xg-action",e);var i=t.plugins.start;i&&i.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;var t=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return{pageX:t.pageX,pageY:t.pageY}}},{key:"checkScope",value:function(e,t,i,n,r){var s=r.width,a=-1;if(e<0||e>s)return a;var o=0===n?Math.abs(i):Math.abs(i/n);return Math.abs(i)>0&&o>=1.73&&e>r.scopeM1&&e<r.scopeM2?a=0:(0===Math.abs(i)||o<=.57)&&(a=e<r.scopeL?1:e>r.scopeR?2:3),a}},{key:"executeMove",value:function(e,t,i,n,s){switch(i){case 0:this.updateTime(e/n*this.config.scopeM);break;case 1:this.updateBrightness(t/s);break;case 2:r.a.os.isIos||this.updateVolume(t/s)}}},{key:"endLastMove",value:function(e){var t=this,i=this.pos,n=this.player,r=this.config,s=(i.time-this.timeOffset)/1e3;switch(e){case 0:n.seek(Number(s).toFixed(1)),r.hideControlsEnd?n.blur():n.focus(),this.timer=setTimeout((function(){t.pos.time=0}),500)}this.changeAction(se)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"sendUseAction",value:function(e){var t=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t,to:!t})}},{key:"clickHandler",value:function(e){var t=this.player,i=this.config,n=this.playerConfig;t.state<k.a.RUNNING?n.closeVideoClick||(this.sendUseAction(s.b.createEvent("click")),t.play()):!i.closedbClick||n.closeVideoClick?t.isActive?t.blur():t.focus():n.closeVideoClick||((t.isActive||i.focusVideoClick)&&(this.sendUseAction(s.b.createEvent("click")),this.switchPlayPause()),t.focus())}},{key:"dbClickHandler",value:function(e){var t=this.config,i=this.player;!t.closedbClick&&i.state>=k.a.RUNNING&&(this.sendUseAction(s.b.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var t=this,i=this.player;Object(G.f)(this,le[0],(function(e,i){t.clickHandler(i.e)}),{e:e,paused:i.paused})}},{key:"onDbClick",value:function(e){var t=this,i=this.player;Object(G.f)(this,le[1],(function(e,i){t.dbClickHandler(i.e)}),{e:e,paused:i.paused})}},{key:"onPress",value:function(e){var t=this.pos,i=this.config,n=this.player;i.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:n.playbackRate,to:i.pressRate}),n.playbackRate=i.pressRate,this.changeAction(oe))}},{key:"onPressEnd",value:function(e){var t=this.pos,i=this.config,n=this.player;i.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:n.playbackRate,to:t.rate}),n.playbackRate=t.rate,t.rate=1,this.changeAction(se))}},{key:"updateTime",value:function(e){var t=this.player,i=this.config,n=this.player.duration;e=Number(e.toFixed(4));var r=parseInt(e*i.moveDuration,10)+this.timeOffset;r=(r+=this.pos.time)<0?0:r>1e3*n?1e3*n-200:r,t.getPlugin("time")&&t.getPlugin("time").updateTime(r/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(r/1e3/this.duration,!0),this.activeSeekNote(r/1e3,e>0),i.isTouchingSeek&&t.seek(Number((r-this.timeOffset)/1e3).toFixed(1)),this.pos.time=r}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,i=this.pos;if(e=parseInt(100*e,10),i.volume+=e,!(Math.abs(i.volume)<10)){var n=parseInt(10*t.volume,10)-parseInt(i.volume/10,10);n=n>10?10:n<1?0:n,t.volume=n/10,i.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,i=this.config,n=this.xgMask,r=t.light+.8*e;r=r>i.maxDarkness?i.maxDarkness:r<0?0:r,n&&(n.style.backgroundColor="rgba(0,0,0,".concat(r,")")),t.light=r}},{key:"activeSeekNote",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.player,n=this.config,r=!(this.duration!==1/0&&this.duration>0);if(e&&"number"==typeof e&&!r&&!n.disableActive){e<0?e=0:e>i.duration&&(e=i.duration-.2),this.changeAction(ae);var a=i.plugins.start;a&&a.focusHide(),this.find(".xg-dur").innerHTML=s.b.format(this.duration),this.find(".xg-cur").innerHTML=s.b.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?s.b.removeClass(this.find(".xg-seek-show"),"xg-back"):s.b.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<k.a.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span class="xg-separator">/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),i}(l.b);function ue(e){var t=e.tagName;return!("INPUT"!==t&&"TEXTAREA"!==t&&!e.isContentEditable)}var de=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),Object(n.e)(Object(n.a)(e),"onBodyKeyDown",(function(t){if(e.player){var i=t||window.event,r=i.keyCode,s=Object(n.a)(e),a=s._keyState,o=s.player,l=e.config,c=l.disable,u=l.disableBodyTrigger,d=l.isIgnoreUserActive;c||u||!o.isUserActive&&!d||ue(i.target)||!e.checkIsVisible()||i.metaKey||i.altKey||i.ctrlKey?a.isBodyKeyDown=!1:(t.repeat||a.isKeyDown||((i.target===document.body||e.config.isGlobalTrigger&&!ue(i.target))&&e.checkCode(r,!0)&&(a.isBodyKeyDown=!0),document.addEventListener("keyup",e.onBodyKeyUp)),a.isBodyKeyDown&&e.handleKeyDown(i))}})),Object(n.e)(Object(n.a)(e),"onBodyKeyUp",(function(t){e.player&&(document.removeEventListener("keyup",e.onBodyKeyUp),e.handleKeyUp(t))})),Object(n.e)(Object(n.a)(e),"onKeydown",(function(t){if(e.player){var i=t||window.event,r=Object(n.a)(e)._keyState;if(!i.repeat){if(e.config.disable||e.config.disableRootTrigger||i.metaKey||i.altKey||i.ctrlKey)return;!i||37!==i.keyCode&&!e.checkCode(i.keyCode)||i.target!==e.player.root&&i.target!==e.player.video&&i.target!==e.player.controls.el||(r.isKeyDown=!0),e.player.root.addEventListener("keyup",e.onKeyup)}r.isKeyDown&&e.handleKeyDown(i)}})),Object(n.e)(Object(n.a)(e),"onKeyup",(function(t){e.player&&(e.player.root.removeEventListener("keyup",e.onKeyup),e.handleKeyUp(t))})),e}return Object(n.c)(i,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map((function(i){e.keyCodeMap[i]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map((function(n){t[i][n]&&(e.keyCodeMap[i][n]=t[i][n])})):e.keyCodeMap[i]=t[i]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"setConfig",value:function(e){var t=this;Object.keys(e).forEach((function(i){t.config[i]=e[i]}))}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,i=e.top,n=e.bottom,r=window.innerHeight;return!(i<0&&i<0-.9*t||n>0&&n-r>.9*t)}},{key:"checkCode",value:function(e,t){var i=this,n=!1;return Object.keys(this.keyCodeMap).map((function(r){i.keyCodeMap[r]&&e===i.keyCodeMap[r].keyCode&&!i.keyCodeMap[r].disable&&(n=!t||t&&!i.keyCodeMap[r].noBodyTarget)})),n}},{key:"downVolume",value:function(e){var t=this.player;if(!(t.volume<=0)){var i=parseFloat((t.volume-.1).toFixed(1)),n={volume:{from:t.volume,to:i}};this.emitUserAction(e,"change_volume",{props:n}),t.volume=i>=0?i:0}}},{key:"upVolume",value:function(e){var t=this.player;if(!(t.volume>=1)){var i=parseFloat((t.volume+.1).toFixed(1)),n={volume:{from:t.volume,to:i}};this.emitUserAction(e,"change_volume",{props:n}),t.volume=i<=1?i:1}}},{key:"seek",value:function(e){var t=this.player,i=t.currentTime,n=t.offsetCurrentTime,r=t.duration,a=t.offsetDuration,o=t.timeSegments,l=n>-1?n:i,c=a||r,u=e.repeat&&this.seekStep>=4?parseInt(this.seekStep/2,10):this.seekStep;l+u<=c?l+=u:l=c;var d=s.b.getCurrentTimeByOffset(l,o),h={currentTime:{from:i,to:d}};this.emitUserAction(e,"seek",{props:h}),this.player.currentTime=d}},{key:"seekBack",value:function(e){var t=this.player,i=t.currentTime,n=t.offsetCurrentTime,r=t.timeSegments,a=(n>-1?n:i)-(e.repeat?parseInt(this.seekStep/2,10):this.seekStep);a<0&&(a=0);var o={currentTime:{from:i,to:a=s.b.getCurrentTimeByOffset(a,r)}};this.emitUserAction(e,"seek",{props:o}),this.player.currentTime=a}},{key:"changePlaybackRate",value:function(e){var t=this._keyState,i=this.config,n=this.player;0===t.playbackRate&&(t.playbackRate=n.playbackRate,n.playbackRate=i.playbackRate)}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,i=t.fullscreen,n=t.cssfullscreen;i&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:i,to:!i}),t.exitFullscreen()),n&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:n,to:!n}),t.exitCssFullscreen())}},{key:"handleKeyDown",value:function(e){var t=this._keyState;if(e.repeat){t.isPress=!0;var i=Date.now();if(i-t.tt<200)return;t.tt=i}this.handleKeyCode(e.keyCode,e,t.isPress)}},{key:"handleKeyUp",value:function(e){var t=this._keyState;t.playbackRate>0&&(this.player.playbackRate=t.playbackRate,t.playbackRate=0),t.isKeyDown=!1,t.isPress=!1,t.tt=0}},{key:"handleKeyCode",value:function(e,t,i){for(var r,s=Object.keys(this.keyCodeMap),o=0;o<s.length;o++){var l=this.keyCodeMap[s[o]],c=l.action,u=l.keyCode,d=l.disable,h=l.pressAction,f=l.disablePress;if(u===e){if(!(d||i&&f)){var p=i&&h||c;"function"==typeof p?c(t,this.player,i):"string"==typeof p&&"function"==typeof this[p]&&this[p](t,this.player,i),this.emit(a.SHORTCUT,Object(n.i)({key:s[o],target:t.target,isPress:i},this.keyCodeMap[s[o]]))}(r=t).preventDefault(),r.returnValue=!1,t.stopPropagation();break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!0,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!0}}}]),i}(z.a);function he(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}var fe=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"registerIcons",value:function(){return{loadingIcon:he}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:l.a.ROOT}}}]),i}(l.b),pe=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],ve=function(){function e(t){Object(n.b)(this,e),this.fragments=t.fragments||[],0===this.fragments.length&&this.fragments.push({percent:1}),this._callBack=t.actionCallback,this.fragConfig={fragFocusClass:t.fragFocusClass||"inner-focus-point",fragAutoFocus:!!t.fragAutoFocus,fragClass:t.fragClass||""},this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return Object(n.c)(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=e;var i=0,n=this.fragments;this.fragments=n.map((function(e){return e.start=parseInt(i,10),e.end=parseInt(i+e.percent*t.duration,10),e.duration=parseInt(e.percent*t.duration,10),i+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},i=this.progressList,n=this.fragments;if(!(i.length<1)){var r=t.newIndex,s=t.curIndex,a=t.millisecond;r!==s&&i.map((function(t,i){i<r?t[e].style.width="100%":i>r&&(t[e].style.width=0)}));var o=n[r],l=0===a?0:(a-o.start)/o.duration;i[r][e].style.width=l<0?0:"".concat(100*l,"%")}}},{key:"updateFocus",value:function(e){if(this.fragConfig.fragAutoFocus&&!(this.fragments.length<2))if(e){var t=this.findIndex(1e3*e.currentTime,this.focusIndex);if(t>=0&&t!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(t);var i={index:t,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=t,this._callBack&&this._callBack(i)}}else if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var n={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(n),this.focusIndex=-1}}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(parseInt(1e3*t,10))}var i=this.playedIndex,n=this.cachedIndex;if("Undefined"!==s.b.typeOf(e.played)){var r=this.findIndex(1e3*e.played,i);if(r<0)return;this.updateProgress("played",{newIndex:r,curIndex:i,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=r}if("Undefined"!==s.b.typeOf(e.cached)){var a=this.findIndex(1e3*e.cached,n);if(a<0)return;this.updateProgress("cached",{newIndex:a,curIndex:n,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=a}}},{key:"findIndex",value:function(e,t){var i=this.fragments;if(!i||0===i.length)return-1;if(1===i.length)return 0;if(t>-1&&t<i.length&&e>i[t].start&&e<i[t].end)return t;if(e>i[i.length-1].start)return i.length-1;for(var n=0;n<i.length;n++)if(e>i[n].start&&e<=i[n].end){t=n;break}return t}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(s.b.hasClass(e[t],this.fragConfig.fragFocusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)s.b.removeClass(e[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return s.b.addClass(t[e],this.fragConfig.fragFocusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(e){var t=this;if(Object.keys(this.fragConfig).forEach((function(i){void 0!==e[i]&&(t.fragConfig[i]=e[i])})),e.fragments){if(this.fragments=0===e.fragments.length?[{percent:1}]:e.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var i=this.root.children;i.length>0;)this.root.removeChild(i[0]);this.render()}}},{key:"render",value:function(){var e=this,t=this.style.progressColor;if(this.root||(this.root=s.b.createDom("xg-inners","",{},"progress-list")),this.fragments){var i=this.fragConfig,n=i.fragClass,r=i.fragFocusClass;this.progressList=this.fragments.map((function(i){var a=s.b.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(i.percent):"flex: ".concat(i.percent)},"".concat(i.isFocus?r:""," xgplayer-progress-inner ").concat(n));return e.root.appendChild(a),pe.forEach((function(t){a.appendChild(s.b.createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))})),{cached:a.children[0],played:a.children[1]}}))}return this.root}}]),e}(),ge={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},me=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),r=t.call(this,e),Object(n.e)(Object(n.a)(r),"onMoveOnly",(function(e,t){var i=Object(n.a)(r),a=i.pos,o=i.config,l=i.player,c=t;if(e){s.b.event(e);var u=s.b.getEventPos(e,l.zoom),d=90===l.rotateDeg?u.clientY:u.clientX;if(a.moving&&Math.abs(a.x-d)<o.miniMoveStep)return;a.moving=!0,a.x=d,c=r.computeTime(e,d)}r.triggerCallbacks("dragmove",c,e),r._updateInnerFocus(c)})),Object(n.e)(Object(n.a)(r),"onBodyClick",(function(e){r.pos.isLocked&&(r.pos.isLocked=!1,e.preventDefault(),e.stopPropagation())})),Object(n.e)(Object(n.a)(r),"_mouseDownHandler",(function(e,t){r._state.time=t.currentTime,r.updateWidth(t.currentTime,t.seekTime,t.percent,0),r._updateInnerFocus(t)})),Object(n.e)(Object(n.a)(r),"_mouseUpHandler",(function(e,t){Object(n.a)(r).pos.moving&&r.updateWidth(t.currentTime,t.seekTime,t.percent,2)})),Object(n.e)(Object(n.a)(r),"_mouseMoveHandler",(function(e,t){var i=Object(n.a)(r),s=i._state,a=i.pos,o=i.config,l=i.player;s.time<t.currentTime?t.forward=!0:t.forward=!1,s.time=t.currentTime,a.isDown&&!a.moving&&(a.moving=!0,o.isPauseMoving&&l.pause(),r.triggerCallbacks("dragstart",t,e),r.emitUserAction("drag","dragstart",t)),r.updateWidth(t.currentTime,t.seekTime,t.percent,1),r.triggerCallbacks("dragmove",t,e),r._updateInnerFocus(t)})),Object(n.e)(Object(n.a)(r),"onMouseDown",(function(e){var t=Object(n.a)(r),i=t._state,a=t.player,o=t.pos,l=t.config,c=t.playerConfig,u=s.b.getEventPos(e,a.zoom),d=90===a.rotateDeg?u.clientY:u.clientX;if(!(a.isMini||l.closeMoveSeek||!c.allowSeekAfterEnded&&a.ended)){if(a.duration||a.isPlaying){e.stopPropagation(),r.focus(),s.b.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),s.b.checkIsFunction(l.onMoveStart)&&l.onMoveStart(),s.b.event(e),o.x=d,o.isDown=!0,o.moving=!1,i.prePlayTime=a.currentTime,a.focus({autoHide:!1}),r.isProgressMoving=!0,s.b.addClass(r.progressBtn,"active");var h=r.computeTime(e,d);return h.prePlayTime=i.prePlayTime,r._mouseDownHandlerHook(e,h),"touchstart"===e.type?(r.root.addEventListener("touchmove",r.onMouseMove),r.root.addEventListener("touchend",r.onMouseUp),r.root.addEventListener("touchcancel",r.onMouseUp)):(r.unbind("mousemove",r.onMoveOnly),document.addEventListener("mousemove",r.onMouseMove,!1),document.addEventListener("mouseup",r.onMouseUp,!1)),!0}a.play()}})),Object(n.e)(Object(n.a)(r),"onMouseUp",(function(e){var t=Object(n.a)(r),i=t.player,a=t.config,o=t.pos,l=t.playerConfig,c=t._state;e.stopPropagation(),e.preventDefault(),s.b.checkIsFunction(l.enableSwipeHandler)&&l.enableSwipeHandler(),s.b.checkIsFunction(a.onMoveEnd)&&a.onMoveEnd(),s.b.event(e),s.b.removeClass(r.progressBtn,"active");var u=r.computeTime(e,o.x);u.prePlayTime=c.prePlayTime,o.moving?(r.triggerCallbacks("dragend",u,e),r.emitUserAction("drag","dragend",u)):(r.triggerCallbacks("click",u,e),r.emitUserAction("click","click",u)),r._mouseUpHandlerHook(e,u),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,o.isLocked=!0,c.prePlayTime=0,c.time=0;var d=e.type;"touchend"===d||"touchcancel"===d?(r.root.removeEventListener("touchmove",r.onMouseMove),r.root.removeEventListener("touchend",r.onMouseUp),r.root.removeEventListener("touchcancel",r.onMouseUp),r.blur()):(document.removeEventListener("mousemove",r.onMouseMove,!1),document.removeEventListener("mouseup",r.onMouseUp,!1),o.isEnter?"mobile"!==l.isMobileSimulateMode&&r.bind("mousemove",r.onMoveOnly):r.onMouseLeave(e)),s.b.setTimeout(Object(n.a)(r),(function(){r.resetSeekState()}),10),i.focus()})),Object(n.e)(Object(n.a)(r),"onMouseMove",(function(e){var t=Object(n.a)(r),i=t._state,a=t.pos,o=t.player,l=t.config;s.b.checkTouchSupport()&&e.preventDefault(),s.b.event(e);var c=s.b.getEventPos(e,o.zoom),u=90===o.rotateDeg?c.clientY:c.clientX,d=Math.abs(a.x-u);if(!(a.moving&&d<l.miniMoveStep||!a.moving&&d<l.miniStartStep)){a.x=u;var h=r.computeTime(e,u);h.prePlayTime=i.prePlayTime,r._mouseMoveHandlerHook(e,h)}})),Object(n.e)(Object(n.a)(r),"onMouseOut",(function(e){r.triggerCallbacks("mouseout",null,e)})),Object(n.e)(Object(n.a)(r),"onMouseOver",(function(e){r.triggerCallbacks("mouseover",null,e)})),Object(n.e)(Object(n.a)(r),"onMouseEnter",(function(e){var t=Object(n.a)(r),i=t.player,a=t.pos;if(!(a.isDown||a.isEnter||i.isMini||!i.config.allowSeekAfterEnded&&i.ended)){a.isEnter=!0,r.bind("mousemove",r.onMoveOnly),r.bind("mouseleave",r.onMouseLeave),s.b.event(e);var o=s.b.getEventPos(e,i.zoom),l=90===i.rotateDeg?o.clientY:o.clientX,c=r.computeTime(e,l);r.triggerCallbacks("mouseenter",c,e),r.focus()}})),Object(n.e)(Object(n.a)(r),"onMouseLeave",(function(e){r.triggerCallbacks("mouseleave",null,e),r.unlock(),r._updateInnerFocus(null)})),Object(n.e)(Object(n.a)(r),"onVideoResize",(function(){var e=r.pos,t=e.x,i=e.isDown;if(e.isEnter&&!i){var n=r.computeTime(null,t);r.onMoveOnly(null,n)}})),r.useable=!1,r.isProgressMoving=!1,r.__dragCallBacks=[],r._state={now:-1,direc:0,time:0,prePlayTime:-1},r._disableBlur=!1,r}return Object(n.c)(i,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"currentTime",get:function(){var e=this.player,t=e.offsetCurrentTime,i=e.currentTime;return t>=0?t:i+this.timeOffset}},{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"show",value:function(e){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&0!==t.length||(t=[{percent:1}]);var r=Object(n.i)(Object(n.i)({fragments:t},i),{},{actionCallback:function(t){e.emitUserAction("fragment_focus","fragment_focus",t)}});this.innerList?this.innerList.reset(r):(this.innerList=new ve(r),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(t){e[t]=e.innerList[t].bind(e.innerList)})))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!this.config.disable&&!this.playerConfig.isLive){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var t=this.config,i=t.fragFocusClass,n=t.fragAutoFocus,s=t.fragClass;this._initInner(this.config.fragments,{fragFocusClass:i,fragAutoFocus:n,fragClass:s,style:this.playerConfig.commonStyle||{}}),"mobile"===r.a.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(a.DURATION_CHANGE,(function(){e.onMouseLeave()})),this.on(a.TIME_UPDATE,(function(){e.onTimeupdate()})),this.on(a.SEEKED,(function(){e.onTimeupdate(),e.onCacheUpdate()})),this.on(a.PROGRESS,(function(){e.onCacheUpdate()})),this.on(a.ENDED,(function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0})),this.on(a.EMPTIED,(function(){e.onReset()})),this.on(a.VIDEO_RESIZE,(function(){e.onVideoResize()})),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var t=this,i=null;Object.keys(e).forEach((function(n){t.config[n]=e[n],"fragments"===n&&(i=e[n])})),i&&this._initInner(i,e)}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle.sliderBtnStyle,t=this.progressBtn;e&&("string"==typeof e?t.style.boxShadow=e:"object"===Object(n.l)(e)&&Object.keys(e).map((function(i){t.style[i]=e[i]})))}},{key:"triggerCallbacks",value:function(e,t,i){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(n){if(n&&n.handler&&n.type===e)try{n.handler(t,i)}catch(e){console.error("[XGPLAYER][triggerCallbacks] ".concat(n," error"),e)}}))}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var i=this.__dragCallBacks,n=-1;i.map((function(i,r){i&&i.type===e&&i.handler===t&&(n=r)})),n>-1&&i.splice(n,1)}},{key:"unlock",value:function(){var e=this.player,t=this.pos;t.isEnter=!1,t.isLocked=!1,e.isMini||(this.unbind("mousemove",this.onMoveOnly),t.isDown?this.unbind("mouseleave",this.onMouseLeave):this.blur())}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,i=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"!==this.domEventType&&"compatible"!==this.domEventType||(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",s.b.stopPropagation),t.center&&t.center.addEventListener("touchend",s.b.stopPropagation))),"mouse"!==this.domEventType&&"compatible"!==this.domEventType||(this.bind("mousedown",this.onMouseDown),"mobile"!==i.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),s.b.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),s.b.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,i,n){var r=this.config,s=this.player;if(!r.isCloseClickSeek||0!==n){var a=t=t>=s.duration?s.duration-r.endedDiff:Number(t).toFixed(1);this.updatePercent(i),this.updateTime(e),(1!==n||r.isDragingSeek&&"audio"!==s.config.mediaType)&&(this._state.now=a,this._state.direc=a>s.currentTime?0:1,s.seek(a))}}},{key:"computeTime",value:function(e,t){var i,n,r=this.player,a=this.root.getBoundingClientRect(),o=a.width,l=a.height,c=a.top,u=a.left,d=t;90===r.rotateDeg?(i=l,n=c):(i=o,n=u);var h=d-n,f=(h=h>i?i:h<0?0:h)/i;f=f<0?0:f>1?1:f;var p=parseInt(f*this.offsetDuration*1e3,10)/1e3;return{percent:f,currentTime:p,seekTime:s.b.getCurrentTimeByOffset(p,r.timeSegments),offset:h,width:i,left:n,e:e}}},{key:"updateTime",value:function(e){var t=this.player,i=this.duration;e>i?e=i:e<0&&(e=0);var n=t.plugins.time;n&&n.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.offsetDuration},this.offsetDuration);var i=this.player.plugins.miniprogress;i&&i.update({played:e*this.offsetDuration},this.offsetDuration)}}},{key:"onTimeupdate",value:function(e){var t=this.player,i=this._state,n=this.offsetDuration;if(!(t.isSeeking&&t.media.seeking||this.isProgressMoving)&&t.hasStart){if(i.now>-1){var r=parseInt(1e3*i.now,10)-parseInt(1e3*t.currentTime,10);if(0===i.direc&&r>300||1===i.direc&&r>-300)return void(i.now=-1);i.now=-1}var a=this.currentTime;a=s.b.adjustTimeByDuration(a,n,e),this.innerList.update({played:a},n),this.progressBtn.style.left="".concat(a/n*100,"%")}}},{key:"onCacheUpdate",value:function(e){var t=this.player,i=this.duration;if(t){var n=t.bufferedPoint.end;n=s.b.adjustTimeByDuration(n,i,e),this.innerList.update({cached:n},i)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0),this.progressBtn.style.left="0%"}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var i=this.domEventType;"touch"!==i&&"compatible"!==i||(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),this.root.removeEventListener("touchcancel",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",s.b.stopPropagation),t.center&&t.center.removeEventListener("touchend",s.b.stopPropagation))),"mouse"!==i&&"compatible"!==i||(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:ge.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return ge}}]),i}(l.b),ye=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),Object(n.e)(Object(n.a)(e),"_onMouseenter",(function(t){e.emit("icon_mouseenter",{pluginName:e.pluginName})})),Object(n.e)(Object(n.a)(e),"_onMouseLeave",(function(t){e.emit("icon_mouseleave",{pluginName:e.pluginName})})),e}return Object(n.c)(i,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave),this.config.disable&&this.disable()}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),i}(l.b),be=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;Object(n.f)(Object(n.g)(i.prototype),"afterCreate",this).call(this);var t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([a.PAUSE,a.ERROR,a.EMPTIED],(function(){e.animate(t.paused)})),this.on(a.PLAY,(function(){e.animate(t.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:E,class:"xg-icon-play"},pause:{icon:S,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var t=this.i18nKeys,i=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),i&&this.changeLangTextKey(i,t.PLAY_TIPS)):(this.setAttr("data-state","play"),i&&this.changeLangTextKey(i,t.PAUSE_TIPS))}}},{key:"destroy",value:function(){Object(n.f)(Object(n.g)(i.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    '.concat(O(this,"PLAY_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_LEFT,index:0,disable:!1}}}]),i}(ye);function _e(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}var ke=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){t.preventDefault(),t.stopPropagation(),e.config.onClick(t)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:_e,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){s.b.addClass(this.root,"show")}},{key:"hide",value:function(){s.b.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:l.a.ROOT_TOP,index:0}}}]),i}(l.b);function Ee(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Se(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}var we=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),Object(n.e)(Object(n.a)(e),"_onOrientationChange",(function(t){e.player.fullscreen&&e.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?e.player.setRotateDeg(0):e.player.setRotateDeg(90))})),e}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;Object(n.f)(Object(n.g)(i.prototype),"afterCreate",this).call(this);var t=this.config,o=this.playerConfig;if(!t.disable){t.target&&(this.playerConfig.fullscreenTarget=this.config.target);var l=s.b.getFullScreenEl();o.fullscreenTarget===l&&this.player.getFullscreen().catch((function(e){})),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(t){var i=e.player.fullscreen;e.emitUserAction(t,"switch_fullscreen",{prop:"fullscreen",from:i,to:!i})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(a.FULLSCREEN_CHANGE,(function(t){var i=e.find(".xg-tips");i&&e.changeLangTextKey(i,t?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(t)})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:ke,options:{config:{onClick:function(t){e.handleFullscreen(t)}}}})),"mobile"===r.a.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:Ee,class:"xg-get-fullscreen"},exitFullscreen:{icon:Se,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){Object(n.f)(Object(n.g)(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon","mobile"===r.a.device?"touchend":"click",this.handleFullscreen),"mobile"===r.a.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,i=this.config;!0===i.useCssFullscreen||"function"==typeof i.useCssFullscreen&&i.useCssFullscreen()?(t.fullscreen?t.exitCssFullscreen():t.getCssFullscreen(),this.animate(t.fullscreen)):i.rotateFullscreen?(t.fullscreen?t.exitRotateFullscreen():t.getRotateFullscreen(),this.animate(t.fullscreen)):i.switchCallback&&"function"==typeof i.switchCallback?i.switchCallback(t.fullscreen):t.fullscreen?(t.exitFullscreen(),i.useScreenOrientation&&this.unlockScreen()):(t.getFullscreen().catch((function(e){})),i.useScreenOrientation&&t.aspectRatio>1&&this.lockScreen(i.lockOrientationType))}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"render",value:function(){if(!this.config.disable){return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    '.concat(O(this,"FULLSCREEN_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}},{key:"lockScreen",value:function(e){try{screen.orientation.lock(e).catch((function(e){}))}catch(e){}}},{key:"unlockScreen",value:function(){try{screen.orientation.unlock().catch((function(e){}))}catch(e){}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,useScreenOrientation:!1,lockOrientationType:"landscape",switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),i}(ye),Te=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),(r=t.call(this,e)).isActiving=!1,r}return Object(n.c)(i,[{key:"duration",get:function(){var e=this.player,t=e.offsetDuration,i=e.duration;return this.playerConfig.customDuration||t||i}},{key:"currentTime",get:function(){var e=this.player,t=e.offsetCurrentTime,i=e.currentTime;return t>=0?t:i}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on([a.DURATION_CHANGE,a.SEEKED,a.TIME_UPDATE],(function(t){"durationchange"===t.eventName&&(e.isActiving=!1),e.onTimeUpdate()})),this.on(a.ENDED,(function(){e.onTimeUpdate(!0)})),this.on(a.EMPTIED,(function(){e.onReset()})))}},{key:"show",value:function(e){if("flex"===this.mode)return this.centerCurDom&&(this.centerCurDom.style.display="block"),void(this.centerDurDom&&(this.centerDurDom.style.display="block"));this.root.style.display="block"}},{key:"hide",value:function(){if("flex"===this.mode)return this.centerCurDom&&(this.centerCurDom.style.display="none"),void(this.centerDurDom&&(this.centerDurDom.style.display="none"));this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var t=this.player,i=this.config,n=this.duration;if(!i.disable&&!this.isActiving&&t.hasStart){var r=this.currentTime+this.timeOffset;r=s.b.adjustTimeByDuration(r,n,e),"flex"===this.mode?(this.centerCurDom.innerHTML=this.minWidthTime(s.b.format(r)),n!==1/0&&n>0&&(this.centerDurDom.innerHTML=s.b.format(n))):(this.timeDom.innerHTML=this.minWidthTime(s.b.format(r)),n!==1/0&&n>0&&(this.durationDom.innerHTML=s.b.format(n)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=this.minWidthTime(s.b.format(0)),this.centerDurDom.innerHTML=s.b.format(0)):(this.timeDom.innerHTML=this.minWidthTime(s.b.format(0)),this.durationDom.innerHTML=s.b.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=s.b.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=s.b.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(s.b.hide(this.durationDom),s.b.hide(this.timeDom),s.b.hide(this.find(".time-separator")),s.b.show(this.find(".time-live-tag"))):s.b.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(s.b.hide(this.durationDom),s.b.hide(this.timeDom),s.b.hide(this.find(".time-separator")),s.b.show(this.find(".time-live-tag"))):(s.b.hide(this.find(".time-live-tag")),s.b.show(this.find(".time-separator")),s.b.show(this.durationDom),s.b.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=this.minWidthTime(s.b.format(e)):this.centerCurDom.innerHTML=this.minWidthTime(s.b.format(e)))}},{key:"minWidthTime",value:function(e){return e.split(":").map((function(e){return'<span class="time-min-width">'.concat(e,"</span>")})).join(":")}},{key:"resetActive",value:function(){var e=this,t=this.player,i=function(){e.isActiving=!1};this.off(a.SEEKED,i),t.isSeeking&&t.media.seeking?this.once(a.SEEKED,i):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_LEFT,index:2,disable:!1}}}]),i}(l.b),xe=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(n.e)(Object(n.a)(e),"_onDurationChange",(function(){e.updateSegments();var t=e.player,i=t.currentTime,n=t.timeSegments;if(e._checkIfEnabled(n)){var r=s.b.getIndexByTime(i,n),a=s.b.getOffsetCurrentTime(i,n,r);e.player.offsetCurrentTime=a,e.changeIndex(r,n)}})),Object(n.e)(Object(n.a)(e),"_onLoadedData",(function(){var t=e.player.timeSegments;if(e._checkIfEnabled(t)){var i=s.b.getOffsetCurrentTime(0,t);e.player.offsetCurrentTime=i,e.changeIndex(0,t),e.curPos.start>0&&(e.player.currentTime=e.curPos.start)}})),Object(n.e)(Object(n.a)(e),"_onTimeupdate",(function(){var t=e.player,i=t.currentTime,n=t.timeSegments;if(e._checkIfEnabled(n)){var r=n.length;e.lastCurrentTime=i;var a=s.b.getIndexByTime(i,n);a!==e.curIndex&&e.changeIndex(a,n);var o=s.b.getOffsetCurrentTime(i,n,a);if(e.player.offsetCurrentTime=o,e.curPos){var l=e.curPos,c=l.start,u=l.end;i<c?e.player.currentTime=c:i>u&&a>=r-1&&e.player.pause()}}})),Object(n.e)(Object(n.a)(e),"_onSeeking",(function(){var t=e.player,i=t.currentTime,n=t.timeSegments;if(e._checkIfEnabled(n))if(i<n[0].start)e.player.currentTime=n[0].start;else if(i>n[n.length-1].end)e.player.currentTime=n[n.length-1].end;else{var r=s.b.getIndexByTime(i,n);if(r>=0){var a=e.getSeekTime(i,e.lastCurrentTime,r,n);a>=0&&(e.player.currentTime=a)}}})),Object(n.e)(Object(n.a)(e),"_onPlay",(function(){var t=e.player,i=t.currentTime,n=t.timeSegments;e._checkIfEnabled(n)&&i>=n[n.length-1].end&&(e.player.currentTime=n[0].start)})),e}return Object(n.c)(i,[{key:"afterCreate",value:function(){this.curIndex=-1,this.curPos=null,this.lastCurrentTime=0,this.updateSegments(),this.on(a.DURATION_CHANGE,this._onDurationChange),this.on(a.LOADED_DATA,this._onLoadedData),this.on(a.TIME_UPDATE,this._onTimeupdate),this.on(a.SEEKING,this._onSeeking),this.on(a.PLAY,this._onPlay)}},{key:"setConfig",value:function(e){var t=this;if(e){var i=Object.keys(e);i.length<1||(i.forEach((function(i){t.config[i]=e[i]})),this.updateSegments())}}},{key:"updateSegments",value:function(){var e=this.config,t=e.disable,i=e.segments,n=this.player;if(t||!i||0===i.length)n.timeSegments=[],n.offsetDuration=0,n.offsetCurrentTime=-1;else{var r=this.formatTimeSegments(i,n.duration);n.timeSegments=r,n.offsetDuration=r.length>0?r[r.length-1].duration:0}}},{key:"formatTimeSegments",value:function(e,t){var i=[];return e?(e.sort((function(e,t){return e.start-t.start})),e.forEach((function(e,n){var r={};if(r.start=e.start<0?0:e.start,r.end=t>0&&e.end>t?t:e.end,!(t>0&&r.start>t)){i.push(r);var s=r.end-r.start;if(0===n)r.offset=e.start,r.cTime=0,r.segDuration=s,r.duration=s;else{var a=i[n-1];r.offset=a.offset+(r.start-a.end),r.cTime=a.duration+a.cTime,r.segDuration=s,r.duration=a.duration+s}}})),i):[]}},{key:"getSeekTime",value:function(e,t,i,n){var r=-1,s=n[i],a=s.start,o=s.end;if(e>=a&&e<=o)return r;var l=e-t;if(l<0&&e<a){var c=t>a?t-a:0;return r=i-1>=0?n[i-1].end+l+c:0}return-1}},{key:"_checkIfEnabled",value:function(e){return!(!e||e.length<1)}},{key:"changeIndex",value:function(e,t){this.curIndex=e,e>=0&&t.length>0?this.curPos=t[e]:this.curPos=null}}],[{key:"pluginName",get:function(){return"TimeSegmentsControls"}},{key:"defaultConfig",get:function(){return{disable:!0,segments:[]}}}]),i}(z.a);function Ce(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Oe(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Pe(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Ae=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(n.e)(Object(n.a)(e),"onBarMousedown",(function(t){var i=Object(n.a)(e).player,r=e.find(".xgplayer-bar");s.b.event(t);var a=r.getBoundingClientRect(),o=s.b.getEventPos(t,i.zoom),l=a.height-(o.clientY-a.top);if(o.h=l,o.barH=a.height,e.pos=o,!(l<-2))return e.updateVolumePos(l,t),document.addEventListener("mouseup",e.onBarMouseUp),e._d.isStart=!0,!1})),Object(n.e)(Object(n.a)(e),"onBarMouseMove",(function(t){var i=Object(n.a)(e)._d;if(i.isStart){var r=Object(n.a)(e),a=r.pos,o=r.player;t.preventDefault(),t.stopPropagation(),s.b.event(t);var l=s.b.getEventPos(t,o.zoom);i.isMoving=!0;var c=a.h-l.clientY+a.clientY;c>a.barH||e.updateVolumePos(c,t)}})),Object(n.e)(Object(n.a)(e),"onBarMouseUp",(function(t){s.b.event(t),document.removeEventListener("mouseup",e.onBarMouseUp);var i=Object(n.a)(e)._d;i.isStart=!1,i.isMoving=!1})),Object(n.e)(Object(n.a)(e),"onMouseenter",(function(t){e._d.isActive=!0,e.focus(),e.emit("icon_mouseenter",{pluginName:e.pluginName})})),Object(n.e)(Object(n.a)(e),"onMouseleave",(function(t){e._d.isActive=!1,e.unFocus(100,!1,t),e.emit("icon_mouseleave",{pluginName:e.pluginName})})),Object(n.e)(Object(n.a)(e),"onVolumeChange",(function(t){if(e.player){var i=e.player,n=i.muted,r=i.volume;e._d.isMoving||(e.find(".xgplayer-drag").style.height=n||0===r?"4px":"".concat(100*r,"%"),e.config.showValueLabel&&e.updateVolumeValue()),e.animate(n,r)}})),e}return Object(n.c)(i,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:Oe,class:"xg-volume-small"},volumeLarge:{icon:Ce,class:"xg-volume"},volumeMuted:{icon:Pe,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var t=this.playerConfig,i=t.commonStyle,n=t.volume;i.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=i.volumeColor),this.changeMutedHandler=this.hook("mutedChange",(function(t){e.changeMuted(t)}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==r.a.device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(a.VOLUME_CHANGE,this.onVolumeChange),this.once(a.LOADED_DATA,this.onVolumeChange),"Number"!==s.b.typeOf(n)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,t){var i=this.player,n=this.find(".xgplayer-drag"),r=this.find(".xgplayer-bar");if(r&&n){var s=parseInt(e/r.getBoundingClientRect().height*1e3,10);n.style.height="".concat(e,"px");var a=Math.max(Math.min(s/1e3,1),0),o={volume:{from:i.volume,to:a}};i.muted&&(o.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:i.muted,volume:i.volume,props:o}),i.volume=Math.max(Math.min(s/1e3,1),0),i.muted&&(i.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,i=e.muted,n=this.find(".xgplayer-value-label"),r=Math.max(Math.min(t,1),0);n.innerText=i?0:Math.ceil(100*r)}},{key:"focus",value:function(){this.player.focus({autoHide:!1}),this._timerId&&(s.b.clearTimeout(this,this._timerId),this._timerId=null),s.b.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this._d,a=this.player;r.isActive||(this._timerId&&(s.b.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=s.b.setTimeout(this,(function(){r.isActive||(i?a.blur():a.focus(),s.b.removeClass(e.root,"slide-show"),r.isStart&&e.onBarMouseUp(n)),e._timerId=null}),t))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;this._d.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(s.b.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===r.a.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),i}(l.b);function Le(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}var Ie=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),(r=t.call(this,e)).rotateDeg=r.config.rotateDeg||0,r}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){Object(n.f)(Object(n.g)(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(a.VIDEO_RESIZE,(function(){e.rotateDeg&&e.config.innerRotate&&s.b.setTimeout(e,(function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)}),100)}));var t=this.player.root;this.rootWidth=t.style.width||t.offsetWidth||t.clientWidth,this.rootHeight=t.style.height||t.offsetHeight||t.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}}},{key:"destroy",value:function(){Object(n.f)(Object(n.g)(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){if(e||(e=0),t)this.player.videoRotateDeg=e;else{var i=this.player,n=this.rootWidth,r=this.rootHeight,s=i.root,a=i.innerContainer,o=i.media,l=s.offsetWidth,c=a&&t?a.offsetHeight:s.offsetHeight,u=n,d=r,h=0,f=0;.75!==e&&.25!==e||(u="".concat(c,"px"),d="".concat(l,"px"),h=-(c-l)/2,f=-(l-c)/2);var p="translate(".concat(h,"px,").concat(f,"px) rotate(").concat(e,"turn)"),v={transformOrigin:"center center",transform:p,webKitTransform:p,height:d,width:u},g=t?o:s,m=t?i.getPlugin("poster"):null;Object.keys(v).map((function(e){g.style[e]=v[e],m&&m.root&&(m.root.style[e]=v[e])}))}}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.player;this.rotateDeg||(this.rotateDeg=0);var r=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*r*i)%1,this.updateRotateDeg(this.rotateDeg,t),n.emit(a.ROTATE,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:Le}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      '.concat(O(this,"ROTATE_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),i}(ye);function De(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function Me(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var Re="picture-in-picture",je="inline",Ne="fullscreen",Be=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),Object(n.e)(Object(n.a)(e),"switchPIP",(function(t){if(!e.isPIPAvailable())return!1;t.stopPropagation&&t.stopPropagation(),e.isPip?(e.exitPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!0,to:!1}),e.setAttr("data-state","normal")):4===e.player.media.readyState&&(e.requestPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!1,to:!0}),e.setAttr("data-state","pip"))})),e}return Object(n.c)(i,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(Object(n.f)(Object(n.g)(i.prototype),"afterCreate",this).call(this),this.pMode=je,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(a.COMPLETE,(function(){e.config.showIcon&&(s.b.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:De,class:"xg-get-pip"},pipIconExit:{icon:Me,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,t=this.player;this.leavePIPCallback=function(){var i=t.paused;s.b.setTimeout(e,(function(){!i&&t.mediaPlay()}),0),!i&&t.mediaPlay(),e.setAttr("data-state","normal"),e.pipWindow=null,t.emit(a.PIP_CHANGE,!1)},this.enterPIPCallback=function(i){t.emit(a.PIP_CHANGE,!0),null!=i&&i.pictureInPictureWindow&&(e.pipWindow=i.pictureInPictureWindow),e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(i){var n=t.media.webkitPresentationMode;e.pMode===Ne&&n!==Ne&&t.onFullscreenChange(null,!1),e.pMode=n,n===Re?e.enterPIPCallback(i):n===je&&e.leavePIPCallback(i)},t.media&&(t.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),t.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(t.media)&&t.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"copyStyleIntoPiPWindow",value:function(e){var t=Object(n.k)(document.styleSheets).map((function(t){try{return Object(n.k)(t.cssRules).map((function(e){return e.cssText})).join("")}catch(n){var i=document.createElement("link");i.rel="stylesheet",i.type=t.type,i.media=t.media,i.href=t.href,e.document.head.appendChild(i)}return""})).filter(Boolean).join("\n"),i=document.createElement("style");i.textContent=t,e.document.head.appendChild(i)}},{key:"requestPIP",value:function(){var e=this,t=this.player,n=this.playerConfig,r=this.config;if(this.isPIPAvailable()&&!this.isPip)try{var a=n.poster;if(a&&(t.media.poster="String"===s.b.typeOf(a)?a:a.poster),r.preferDocument&&this.isDocPIPAvailable()){var o={};if(r.width&&r.height)o.width=r.width,o.height=r.height;else{var l=t.root.getBoundingClientRect();o.width=l.width,o.height=l.height}documentPictureInPicture.requestWindow(o).then((function(i){var n=r.docPiPNode,s=r.docPiPStyle;e.enterPIPCallback();var a=n||t.root,o=a.parentElement,l=a.previousSibling,c=a.nextSibling;e.copyStyleIntoPiPWindow(i);var u=document.createElement("style");if(u.append("body{padding:0; margin:0;}"),s){var d="";"string"==typeof s?d=s:"function"==typeof s&&(d=s.call(r)),d&&u.append(d)}else a===t.root&&u.append("\n              .xgplayer{width: 100%!important; height: 100%!important;}\n            ");i.document.head.append(u),i.document.body.append(a),i.addEventListener("pagehide",(function(t){o&&(c?o.insertBefore(a,c):l?o.insertBefore(a,l.nextSibling):o.appendChild(a)),e.leavePIPCallback()}),{once:!0})}))}else i.checkWebkitSetPresentationMode(t.media)?t.media.webkitSetPresentationMode("picture-in-picture"):t.media.requestPictureInPicture();return!0}catch(e){return console.error("requestPiP",e),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{var t;if(this.isPIPAvailable()&&this.isPip)this.isDocPIPAvailable()&&null!==(t=documentPictureInPicture)&&void 0!==t&&t.window?documentPictureInPicture.window.close():i.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture();return!0}catch(e){return console.error("exitPIP",e),!1}}},{key:"isPip",get:function(){var e,t=this.player;return!(!this.isDocPIPAvailable()||null===(e=documentPictureInPicture)||void 0===e||!e.window)||document.pictureInPictureElement&&document.pictureInPictureElement===t.media||t.media.webkitPresentationMode===Re}},{key:"isPIPAvailable",value:function(){var e=this.player.media;return("Boolean"!==s.b.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===s.b.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===s.b.typeOf(e.webkitSetPresentationMode))||this.isDocPIPAvailable()}},{key:"isDocPIPAvailable",value:function(){return"documentPictureInPicture"in window&&/^(https|file)/.test(location.protocol)}},{key:"destroy",value:function(){Object(n.f)(Object(n.g)(i.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      '.concat(O(this,"PIP",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_RIGHT,index:6,showIcon:!1,preferDocument:!1,width:void 0,height:void 0,docPiPNode:void 0,docPiPStyle:void 0}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}]),i}(ye);function Fe(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Ue=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),r=t.call(this,e),Object(n.e)(Object(n.a)(r),"playNext",(function(e){var t=Object(n.a)(r).player;e.preventDefault(),e.stopPropagation(),r.idx+1<r.config.urlList.length?(r.idx++,r.nextHandler(r.config.urlList[r.idx],r.idx),t.emit(a.PLAYNEXT,r.idx+1)):(r.nextHandler(),t.emit(a.PLAYNEXT))})),r.idx=-1,r}return Object(n.c)(i,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Fe}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e="mobile"===r.a.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.switchURL?t.switchURL(e):t.src=e,t.config.url=e,t.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      '.concat(O(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),"\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),i}(l.b),He=i(467),ze=i.n(He);function Ge(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}var Ve=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),r=t.call(this,e),Object(n.e)(Object(n.a)(r),"download",(function(e){if(!r.isLock){r.emitUserAction(e,"download");var t=r.playerConfig.url,i="";"String"===s.b.typeOf(t)?i=t:"Array"===s.b.typeOf(t)&&t.length>0&&(i=t[0].src);var n=r.getAbsoluteURL(i);ze()(n),r.isLock=!0,r.timer=window.setTimeout((function(){r.isLock=!1,window.clearTimeout(r.timer),r.timer=null}),300)}})),r.timer=null,r.isLock=!1,r}return Object(n.c)(i,[{key:"afterCreate",value:function(){Object(n.f)(Object(n.g)(i.prototype),"afterCreate",this).call(this),this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:Ge}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href}return e}},{key:"destroy",value:function(){Object(n.f)(Object(n.g)(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   '.concat(O(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_RIGHT,index:3,disable:!0}}}]),i}(ye),$e=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){Object(n.f)(Object(n.g)(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(t){e.fitVideo&&(e.width=t.vWidth,e.height=t.vHeight)},this.once(a.VIDEO_RESIZE,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var i=document.createElement("a");i.href=e,i.download=t;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}},{key:"createCanvas",value:function(e,t){var i=document.createElement("canvas"),n=i.getContext("2d");this.canvasCtx=n,this.canvas=i,i.width=e||this.config.width,i.height=t||this.config.height,n.imageSmoothingEnabled=!0,n.imageSmoothingEnabled&&(n.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot");var i=this.config;this.shot(i.width,i.height).then((function(e){t.emit(a.SCREEN_SHOT,e),i.saveImg&&t.saveScreenShot(e,i.name+i.format)}))}},{key:"shot",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},r=this.config,s=this.player,a=n.quality||r.quality,o=n.type||r.type;return new Promise((function(n,l){var c,u=null;if(s.media.canvas)u=s.media.canvas;else{i.canvas?(i.canvas.width=e||r.width,i.canvas.height=t||r.height):i.createCanvas(e,t),u=i.canvas,c=i.canvasCtx;var d,h,f,p,v=s.media.videoWidth/s.media.videoHeight,g=u.width/u.height,m=s.media.videoWidth,y=s.media.videoHeight;v>g?(f=u.width,p=u.width/v,d=0,h=Math.round((u.height-p)/2)):v===g?(f=u.width,p=u.height,d=0,h=0):v<g&&(f=u.height*v,p=u.height,d=Math.round((u.width-f)/2),h=0),c.drawImage(s.media,0,0,m,y,d,h,f,p)}var b=u.toDataURL(o,a).replace(o,"image/octet-stream");n(b=b.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){Object(n.f)(Object(n.g)(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(a.VIDEO_RESIZE,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys.SCREENSHOT,'">').concat(this.i18n.SCREENSHOT,"</span>"),"\n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,saveImg:!0,fitVideo:!0,disable:!1,name:"screenshot"}}}]),i}(ye),Ye=function(){function e(t){Object(n.b)(this,e),this.config=t.config,this.parent=t.root,this.root=s.b.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),t.root.appendChild(this.root);var i=this.config.maxHeight;i&&this.setStyle({maxHeight:i}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var a="mobile"===r.a.device?"touchend":"click";this._delegates=l.b.delegate.call(this,this.root,"li",a,this.onItemClick)}return Object(n.c)(e,[{key:"renderItemList",value:function(e){var t=this,i=this.config,n=this.root;e?i.data=e:e=i.data,i.style&&Object.keys(i.style).map((function(e){n.style[e]=i[e]})),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map((function(e,i){var n=e.selected?"option-item selected":"option-item";e["data-index"]=i,t.root.appendChild(s.b.createDom("li","<span>".concat(e.showText,"</span>"),e,n))}))}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&s.b.hasClass(t,"selected"))return!1;var i="function"==typeof this.config.onItemClick?this.config.onItemClick:null,n=this.root.querySelector(".selected");s.b.addClass(t,"selected"),n&&s.b.removeClass(n,"selected"),i(e,{from:n?this.getAttrObj(n,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var i={};t.map((function(t){i[t]=e.getAttribute(t)}));var n=e.getAttribute("data-index");return n&&(i.index=Number(n)),i}},{key:"show",value:function(){s.b.removeClass(this.root,"hide"),s.b.addClass(this.root,"active")}},{key:"hide",value:function(){s.b.removeClass(this.root,"active"),s.b.addClass(this.root,"hide")}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).forEach((function(i){t.root.style[i]=e[i]}))}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(e){e.destroy&&e.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),e}(),We="side",Xe="middle",Ke="click",qe="hover";var Ze="mobile"===r.a.device,Je=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),r=t.call(this,e),Object(n.e)(Object(n.a)(r),"onEnter",(function(e){e.stopPropagation(),r.emit("icon_mouseenter",{pluginName:r.pluginName}),r.switchActiveState(e)})),Object(n.e)(Object(n.a)(r),"switchActiveState",(function(e){e.stopPropagation(),r.config.toggleMode===Ke?r.toggle(!r.isActive):r.toggle(!0)})),Object(n.e)(Object(n.a)(r),"onLeave",(function(e){e.stopPropagation(),r.emit("icon_mouseleave",{pluginName:r.pluginName}),r.config.listType!==We&&r.isActive&&r.toggle(!1)})),Object(n.e)(Object(n.a)(r),"onListEnter",(function(e){r.enterType=2})),Object(n.e)(Object(n.a)(r),"onListLeave",(function(e){r.enterType=0,r.isActive&&r.toggle(!1)})),r.isIcons=!1,r.isActive=!1,r.curValue=null,r.curIndex=0,r}return Object(n.c)(i,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;this.initIcons(),Ze&&t.listType!==Xe&&(t.listType=We),t.hidePortrait&&s.b.addClass(this.root,"portrait"),this.on([a.VIDEO_RESIZE,a.FULLSCREEN_CHANGE],(function(){e._resizeList()})),this.once(a.CANPLAY,(function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())})),Ze&&this.on(a.PLAYER_FOCUS,(function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)})),Ze?(t.toggleMode=Ke,this.activeEvent="touchend"):this.activeEvent=t.toggleMode===Ke?"click":"mouseenter",t.toggleMode===Ke?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,t=this.icons,i=Object.keys(t),n=!1;i.length>0&&(i.forEach((function(i){e.appendChild(".xgplayer-icon",t[i]),!n&&(n=t[i])})),this.isIcons=n),n||(this.appendChild(".xgplayer-icon",s.b.createDom("span","",{},"icon-text")),s.b.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||s.b.addClass(this.root,"show")}},{key:"hide",value:function(){s.b.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,i){if(void 0===e)return"";var r=this.config.list;!i&&(i=this.player.lang),t=!t||s.b.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=r[e]);try{return"object"===Object(n.l)(e[t])?e[t][i]||e[t].en:e[t]}catch(e){return console.warn(e),""}}},{key:"toggle",value:function(e){if(e!==this.isActive){var t=this.player.controls,i=this.config.listType;e?(i===We?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):(i===We?t.focus():t.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.stopPropagation();var i=this.config,n=i.listType,r=i.list;this.curIndex=t.to.index,this.curItem=r[this.curIndex],this.changeCurrentText(),(this.config.isItemClickHide||Ze||n===We)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0];t&&(this.find(".icon-text").innerHTML=this.getTextByLang(t,"iconText"))}}},{key:"renderItemList",value:function(e,t){var i=this,n=this.config,r=this.optionsList,s=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=n.list[t]),r)return r.renderItemList(e),void this.changeCurrentText();var a,o,c={config:{data:e||[],className:(a=n.listType,o=n.position,a===We?o===l.a.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""),onItemClick:function(e,t){i.onItemClick(e,t)}},root:n.listType===We?s.innerContainer||s.root:this.root};if(this.config.isShowIcon){var u=this.player.root.getBoundingClientRect().height,d=n.listType===Xe?u-50:u;d&&n.heightLimit&&(c.config.maxHeight="".concat(d,"px")),this.optionsList=new Ye(c),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){if(this.config.heightLimit){var e=this.player.root.getBoundingClientRect().height,t=this.config.listType===Xe?e-50:e;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(t,"px")})}}},{key:"destroy",value:function(){this.config.toggleMode===Ke?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon">\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:qe,heightLimit:!0}}}]),i}(l.b),Qe=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),(r=t.call(this,e)).curTime=0,r.isPaused=!0,r}return Object(n.c)(i,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})))}},{key:"afterCreate",value:function(){var e=this;Object(n.f)(Object(n.g)(i.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(t){e.changeDefinitionList(t)})),this.on(a.DEFINITION_CHANGE,(function(t){e.renderItemList(e.config.list,t.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||s.b.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,t=e.list,i=e.defaultDefinition;if(t.length>0){var n=null;t.map((function(e){e.definition===i&&(n=e)})),n||(n=t[0]),this.changeDefinition(n)}}},{key:"renderItemList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.list||[],r=arguments.length>1?arguments[1]:void 0,s=r&&r.definition?r.definition:this.config.defaultDefinition;r&&t.forEach((function(e){e.selected=!1}));var a=0,o=t.map((function(t,i){var r=Object(n.i)(Object(n.i)({},t),{},{showText:e.getTextByLang(t)||t.definition,selected:!1});return(t.selected||t.definition&&t.definition==s)&&(r.selected=!0,a=i),r}));Object(n.f)(Object(n.g)(i.prototype),"renderItemList",this).call(this,o,a)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){this.player.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){var r=this.player.definitionList;Object(n.f)(Object(n.g)(i.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to});for(var s=0;s<r.length;s++)t.to&&r[s].definition===t.to.definition&&(t.to.url=r[s].url),t.from&&r[s].definition===t.from.definition&&(t.from.url=r[s].url);this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return Object(n.i)(Object(n.i)({},Je.defaultConfig),{},{position:l.a.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),i}(Je),et=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),(r=t.call(this,e)).curRate=1,r}return Object(n.c)(i,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,i=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(i)&&(e.config.list=i.map((function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e})))}},{key:"afterCreate",value:function(){var e=this;Object(n.f)(Object(n.g)(i.prototype),"afterCreate",this).call(this),this.on(a.RATE_CHANGE,(function(){e.curValue!==e.player.playbackRate&&e.renderItemList()})),this.renderItemList()}},{key:"show",value:function(e){this.config.list&&0!==this.config.list.length&&Object(n.f)(Object(n.g)(i.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){Object(n.f)(Object(n.g)(i.prototype),"onItemClick",this).call(this,e,t);var r=e.delegateTarget,s=Number(r.getAttribute("rate"));if(!s||s===this.curValue)return!1;var a={playbackRate:{from:this.player.playbackRate,to:s}};this.emitUserAction(e,"change_rate",{props:a}),this.curValue=s,this.player.playbackRate=s}},{key:"renderItemList",value:function(){var e=this,t=this.player.playbackRate||1;this.curValue=t;var r=-1,s=this.config.list.map((function(i,n){var s={rate:i.rate};return s.rate===t&&(s.selected=!0,r=n),s.showText=e.getTextByLang(i),s}));Object(n.f)(Object(n.g)(i.prototype),"renderItemList",this).call(this,s,r)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0],i="";i=!t||this.curIndex<0?"".concat(this.player.playbackRate,"x"):this.getTextByLang(t,"iconText"),this.find(".icon-text").innerHTML=i}}},{key:"destroy",value:function(){Object(n.f)(Object(n.g)(i.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return Object(n.i)(Object(n.i)({},Je.defaultConfig),{},{position:l.a.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),i}(Je);function tt(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function it(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var nt=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.cssFullscreen&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;Object(n.f)(Object(n.g)(i.prototype),"afterCreate",this).call(this),this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(a.CSS_FULLSCREEN_CHANGE,(function(t){e.animate(t)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys,i=this.find(".xg-tips");i&&this.changeLangTextKey(i,e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:tt,class:"xg-get-cssfull"},exitCssFullscreen:{icon:it,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){Object(n.f)(Object(n.g)(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return"<xg-icon class='xgplayer-cssfullscreen'>\n    <div class=\"xgplayer-icon\">\n    </div>\n    ".concat(O(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),"\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:l.a.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),i}(ye),rt=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(a.ERROR,(function(t){e.onError(t)}))}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,i=e.errorType,n=t.errorNote?this.i18n[t.errorNote]:"";if(!n)switch(i){case"decoder":n=this.i18n.MEDIA_ERR_DECODE;break;case"network":n=this.i18n.MEDIA_ERR_NETWORK;break;default:n=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=n,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),i}(l.b),st=i(364),at=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(t){(e.config.onClick||e.customOnClick)&&(t.preventDefault(),t.stopPropagation(),e.customOnClick?e.customOnClick(t):e.config.onClick(t))})),this.player.showPrompt=function(){e.showPrompt.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).map((function(i){t.root.style[i]=e[i]}))}},{key:"showPrompt",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){this.customOnClick=n;var r=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),s.b.addClass(this.root,"show"),"arrow"===i.mode&&s.b.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),i.style&&this.setStyle(i.style);var a="boolean"==typeof i.autoHide?i.autoHide:this.config.autoHide;if(a){var o=i.interval||r;this.intervalId=setTimeout((function(){t.hide()}),o)}}}},{key:"hide",value:function(){s.b.removeClass(this.root,"show"),s.b.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(st.a.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),i}(l.b),ot={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function lt(e){Object.keys(ot).map((function(t){void 0===e[t]&&(e[t]=ot[t])}))}var ct={_updateDotDom:function(e,t){if(t){var i=this.calcuPosition(e.time,e.duration),n=e.style||{};n.left="".concat(i.left,"%"),n.width="".concat(i.width,"%"),t.setAttribute("data-text",e.text),t.setAttribute("data-time",e.time),i.isMini?s.b.addClass(t,"mini"):s.b.removeClass(t,"mini"),Object.keys(n).map((function(e){t.style[e]=n[e]}))}},initDots:function(){var e=this;this._ispots.map((function(t){e.createDot(t,!1)})),this.ispotsInit=!0},createDot:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.player.plugins.progress;if(i&&(t&&(lt(e),this._ispots.push(e)),this.ispotsInit||!t)){var n=this.calcuPosition(e.time,e.duration),r=e.style||{};r.left="".concat(n.left,"%"),r.width="".concat(n.width,"%");var a="xgspot_".concat(e.id," xgplayer-spot");n.isMini&&(a+=" mini");var o=e.template?'<div class="xgplayer-spot-pop">'.concat(e.template,"</div>"):"",l=s.b.createDom("xg-spot",o,{"data-text":e.text,"data-time":e.time,"data-id":e.id},a);Object.keys(r).map((function(e){l.style[e]=r[e]})),i.outer&&i.outer.appendChild(l),this.positionDot(l,e.id)}},findDot:function(e){if(this.player.plugins.progress){var t=this._ispots.filter((function(t,i){return t.id===e}));return t.length>0?t[0]:null}},updateDot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.player.plugins.progress;if(i){var n=this.findDot(e.id);if(n&&Object.keys(e).map((function(t){n[t]=e[t]})),this.ispotsInit){var r=i.find('xg-spot[data-id="'.concat(e.id,'"]'));r&&(this._updateDotDom(e,r),t&&this.showDot(e.id))}}},deleteDot:function(e){var t=this._ispots,i=this.player.plugins.progress;if(i){for(var n=[],r=0;r<t.length;r++)t[r].id===e&&n.push(r);for(var s=n.length-1;s>=0;s--)if(t.splice(n[s],1),this.ispotsInit){var a=i.find('xg-spot[data-id="'.concat(e,'"]'));a&&a.parentElement.removeChild(a)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this.ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),i=t.length-1;i>=0;i--)e.outer.removeChild(t[i]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=this.player.plugins.progress;if(i)if(this.ispotsInit){this._ispots=[];var n=i.root.getElementsByTagName("xg-spot"),r=n.length;if(r>t.length)for(var s=r-1;s>t.length-1;s--)i.outer.removeChild(n[s]);t.forEach((function(t,i){i<r?(n[i].setAttribute("data-id","".concat(t.id)),e._ispots.push(t),e.updateDot(t)):e.createDot(t)}))}else this._ispots=t},positionDots:function(){var e=this,t=this._ispots,i=this.playerSize,n=this.player.sizeInfo,r=this.player.plugins.progress;r&&n.width!==i.width&&(i.width=n.width,i.left=n.left,t.forEach((function(t){var i=r.find('xg-spot[data-id="'.concat(t.id,'"]'));i&&e.positionDot(i,t.id)})))},positionDot:function(e,t){var i=s.b.findDom(e,".xgplayer-spot-pop");if(i){var n=this.playerSize,r=e.getBoundingClientRect(),a=i.getBoundingClientRect(),o=r.left-n.left,l=n.width-o-r.width/2;if(o<a.width/2||n.width<a.width){var c=a.width/2-o;i.style.left="".concat(c,"px")}else if(l<a.width/2){var u=l-a.width/2+r.width/2;i.style.left="".concat(u,"px")}else i.style.left="50%"}},updateDuration:function(){var e=this,t=this.player.plugins.progress;t&&this._ispots.forEach((function(i){var n=t.find('xg-spot[data-id="'.concat(i.id,'"]'));e._updateDotDom(i,n)}))},getAllDotsDom:function(){var e=this.player.plugins.progress;return e?e.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}};var ut={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMouseOver"},dt=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),r=t.call(this,e),Object(n.e)(Object(n.a)(r),"onMousemove",(function(e){r.config.disable||(s.b.hasClass(e.target,"xg-spot-content")&&r.config.isHideThumbnailHover?r.player.plugins.progress.onMouseLeave(e):(r._state.f||s.b.hasClass(e.target,"xg-spot-content"))&&(s.b.event(e),e.stopPropagation()))})),Object(n.e)(Object(n.a)(r),"onMousedown",(function(e){r.config.disable||(r._state.f||s.b.hasClass(e.target,"xg-spot-content"))&&(s.b.event(e),e.stopPropagation())})),Object(n.e)(Object(n.a)(r),"onMouseup",(function(e){if(r.isDrag){var t=r.player.plugins.progress;t&&t.pos&&(t.onMouseUp(e),!t.pos.isEnter&&t.onMouseLeave(e))}})),Object(n.e)(Object(n.a)(r),"onDotMouseLeave",(function(e){if(!r.config.disable){r._curDot.removeEventListener("mouseleave",r.onDotMouseLeave),r.blurDot(e.target),r._curDot=null;var t=r.player.plugins.progress;t&&t.enableBlur(),r.show()}})),Object(n.e)(Object(n.a)(r),"onProgressMouseOver",(function(e,t){if(!r.config.disable&&s.b.hasClass(t.target,"xgplayer-spot")&&!r._curDot){r._curDot=t.target,r.focusDot(t.target),r._curDot.children.length>0&&r.hide();var i=r.player.plugins.progress;i&&i.disableBlur(),r._curDot.addEventListener("mouseleave",r.onDotMouseLeave)}})),r._ispots=[],r.videoPreview=null,r.videothumbnail=null,r.thumbnail=null,r.timeStr="",r._state={now:0,f:!1},r}return Object(n.c)(i,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(t,i){i.seekTime&&e.player.seek(i.seekTime)})),this.transformTimeHook=this.hook("transformTime",(function(t){e.setTimeContent(s.b.format(t))})),function(e){var t=e.config,i=e.player;Object.keys(ct).map((function(t){e[t]=ct[t].bind(e)}));var n=i.config.progressDot||t.ispots||[];e._ispots=n.map((function(e){return lt(e),e})),e.ispotsInit=!1,e.playerSize={left:i.sizeInfo.left,width:i.sizeInfo.width},e.on(a.DURATION_CHANGE,(function(){e.ispotsInit?e.updateDuration():e.initDots()})),e.on(a.VIDEO_RESIZE,(function(){e.positionDots()}))}(this),this.on(a.DURATION_CHANGE,(function(){e.show()})),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(i){t.config[i]=e[i]}))}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,t=this.player.plugins.progress;if(t&&(Object.keys(ut).map((function(i){e[ut[i]]=e[ut[i]].bind(e),t.addCallBack(i,e[ut[i]])})),"mobile"!==r.a.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var i=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(t){t.stopPropagation(),i(parseInt(1e3*e._state.now,10)/1e3,t)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,t){!this.config.disable&&this.player.duration&&this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!0,this.videoPreview&&s.b.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){!this.config.disable&&this.player.duration&&(this.isDrag=!1,this.videoPreview&&s.b.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,t){this.config.disable||s.b.hasClass(t.target,"xgplayer-spot")&&(t.stopPropagation(),t.preventDefault(),["time","id","text"].map((function(i){e[i]=t.target.getAttribute("data-".concat(i))})),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(t,e))}},{key:"updateLinePos",value:function(e,t){var i=this.root,n=this.previewLine,r=this.player,s=this.config,a="flex"===r.controls.mode,o=i.getBoundingClientRect().width;if(o||!this._hasThumnail){var l,c=e-(o=this._hasThumnail&&o<s.width?s.width:o)/2;c<0&&!a?(c=0,l=e-o/2):c>t-o&&!a?(l=c-(t-o),c=t-o):l=0,void 0!==l&&(n.style.transform="translateX(".concat(l.toFixed(2),"px)")),i.style.transform="translateX(".concat(c.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var t=this.timeText,i=this.timePoint;t.innerHTML=e,!this.thumbnail&&(i.innerHTML=e)}},{key:"updatePosition",value:function(e,t,i,n){var r=this.root,a=this.config,o=this._state;if(r){o.now=i,this.transformTimeHook(i);var l=this.timeStr;n&&n.target&&s.b.hasClass(n.target,"xgplayer-spot")?(this.showTips(n.target.getAttribute("data-text"),!1,l),this.focusDot(n.target),o.f=!0,a.isFocusDots&&o.f&&(o.now=parseInt(n.target.getAttribute("data-time"),10))):a.defaultText?(o.f=!1,this.showTips(a.defaultText,!0,l)):(o.f=!1,this.hideTips("")),this.updateTimeText(l),this.updateThumbnails(o.now),this.updateLinePos(e,t)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var t=this.player,i=this.videoPreview,n=this.config,r=t.plugins.thumbnail;if(r&&r.usable){this.thumbnail&&r.update(this.thumbnail,e,n.width,n.height);var s=i&&i.getBoundingClientRect();this.videothumbnail&&r.update(this.videothumbnail,e,s.width,s.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==r.a.device){var t=this.player,i=this.config,n=t.getPlugin("thumbnail");if(n&&n.setConfig(e),n&&n.usable&&i.isShowThumbnail){s.b.removeClass(this.root,"short-line no-thumbnail"),"short"===i.mode&&s.b.addClass(this.root,"short-line"),this._hasThumnail=!0;var a=this.find(".xg-spot-thumbnail");this.thumbnail=n.createThumbnail(a,"progress-thumbnail"),i.isShowCoverPreview&&(this.videoPreview=s.b.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=n.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}else s.b.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(e,t){var i=this.player.plugins.progress,n=this.player,r=i.root.getBoundingClientRect().width,s=n.duration/r*6;return e+t>n.duration&&(t=n.duration-e),n.duration,n.duration,{left:e/n.duration*100,width:t/n.duration*100,isMini:t<s}}},{key:"showDot",value:function(e){var t=this.findDot(e);if(t){var i=this.root.getBoundingClientRect().width,n=t.time/this.player.duration*i;this.updatePosition(n,i,t.time)}}},{key:"focusDot",value:function(e,t){e&&(t||(t=e.getAttribute("data-id")),s.b.addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){if(!e){var t=this._activeDotId;e=this.getDotDom(t)}e&&(s.b.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";s.b.addClass(this.root,"no-timepoint"),e&&(s.b.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(s.b.addClass(this.root,"product"),this.tipText.textContent=e):(s.b.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(i," ").concat(e)))}},{key:"hideTips",value:function(){s.b.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",s.b.removeClass(this.find(".xg-spot-content"),"show-text"),s.b.removeClass(this.root,"product")}},{key:"hide",value:function(){s.b.addClass(this.root,"hide")}},{key:"show",value:function(e){s.b.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,t=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(t.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,t=this.player.plugins.progress;t&&Object.keys(ut).map((function(i){t.removeCallBack(i,e[ut[i]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===r.a.device||"mobile"===this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info hide '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-ext-text"></div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),i}(l.b),ht=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;return Object(n.b)(this,i),(r=t.call(this,e)).ratio=1,r.interval=null,r._preloadMark={},r}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([a.DURATION_CHANGE],(function(){var t=e.config,i=t.pic_num,n=t.interval;e.usable&&(e.interval=n>0?n:Math.round(1e3*e.player.duration/i)/1e3)}))}},{key:"setConfig",value:function(e){var t=this;if(e){var i=Object.keys(e);i.length<1||(i.forEach((function(i){t.config[i]=e[i]})),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,t=e.urls,i=e.pic_num;return t&&t.length>0&&i>0}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,i=e.height,n=e.pic_num,r=e.interval;this.ratio=t/i*100,this.interval=r||Math.round(this.player.duration/n),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t=this;if(!this._preloadMark[e]){var i=this.config.urls,n=i.length,r=[];e>0&&r.push(e-1),r.push(e),e>0&&e<n-1&&r.push(e+1),r.map((function(e){!t._preloadMark[e]&&e>=0&&e<n&&(t._preloadMark[e]=1,s.b.preloadImg(i[e],(function(){t._preloadMark[e]=2})))}))}}},{key:"getPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.config,r=n.pic_num,s=n.row,a=n.col,o=n.width,l=n.height;this.interval=Math.round(this.player.duration/r);var c=Math.ceil(e/this.interval),u=(c=c>r?r:c)<s*a?0:Math.ceil(c/(s*a))-1,d=c-u*(a*s),h=d>0?Math.ceil(d/a)-1:0,f=d>0?d-h*a-1:0,p=0,v=0;if(t&&i){var g=t/i;g<o/l?p=(v=i)*(o/l):v=(p=t)/(o/l)}else i?t||(p=(v=i||l)*(o/l)):v=(p=t||o)/(o/l);var m=this.getUrlByIndex(u);return{urlIndex:u,rowIndex:h,colIndex:f,url:m,height:v,width:p,style:{backgroundImage:"url(".concat(m,")"),backgroundSize:"".concat(p*a,"px auto"),backgroundPosition:"-".concat(f*p,"px -").concat(h*v,"px"),width:"".concat(p,"px"),height:"".concat(v,"px")}}}},{key:"update",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=this.config,a=s.pic_num,o=s.urls;if(!(a<=0)&&o&&0!==o.length){var l=this.getPosition(t,i,n);this.preload(l.urlIndex),Object.keys(l.style).map((function(t){e.style[t]=l.style[t]})),Object.keys(r).map((function(t){e.style[t]=r[t]}))}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,t){var i=s.b.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(i),i}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),i}(l.b);function ft(e){return e?"background:".concat(e,";"):""}var pt=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),Object(n.e)(Object(n.a)(e),"onTimeupdate",(function(){var t=e.player.ended,i=Object(n.a)(e).offsetDuration,r=e.currentTime;r=s.b.adjustTimeByDuration(r,i,t),e.update({played:r},i)})),e}return Object(n.c)(i,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"currentTime",get:function(){var e=this.player,t=e.offsetCurrentTime,i=e.currentTime;return t>=0?t:i}},{key:"afterCreate",value:function(){var e=this;this.root&&(this.on(a.TIME_UPDATE,this.onTimeupdate),this.on(a.EMPTIED,(function(){e.reset()})))}},{key:"reset",value:function(){this.update({played:0,cached:0},0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){var e=this.playerConfig,t=e.commonStyle;if(e.miniprogress){var i=this.config,n=i.mode,r=i.height,s={cached:ft(t.cachedColor),played:ft(t.playedColor),progress:ft(t.progressColor),height:r>0&&2!==r?"height: ".concat(r,"px;"):""};return'<xg-mini-progress class="xg-mini-progress '.concat("show"===n?"xg-mini-progress-show":"",'" style="').concat(s.progress," ").concat(s.height,'">\n    <xg-mini-progress-cache class="xg-mini-progress-cache" style="').concat(s.cached,'"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played" style="').concat(s.played,'"></xg-mini-progress-played>\n    </xg-mini-progress>')}}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{mode:"auto",height:2}}}]),i}(l.b),vt="realtime",gt="firstframe",mt="poster";function yt(){try{return parseInt(window.performance.now(),10)}catch(e){return(new Date).getTime()}}var bt=null,_t=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o)),Object(n.e)(Object(n.a)(e),"onLoadedData",(function(t){e.player&&(e._frameCount=e.config.startFrameCount,e.stop(),e.renderOnTimeupdate(t),e.off(a.TIME_UPDATE,e.renderOnTimeupdate),e.on(a.TIME_UPDATE,e.renderOnTimeupdate))})),Object(n.e)(Object(n.a)(e),"onVisibilitychange",(function(t){"visible"===document.visibilityState?e._checkIfCanStart()&&e.start():"hidden"===document.visibilityState&&e.stop()})),Object(n.e)(Object(n.a)(e),"renderOnTimeupdate",(function(t){if(e._frameCount>0)e.renderOnce(),e._frameCount--;else{e._isLoaded=!0,e.off(a.TIME_UPDATE,e.renderOnTimeupdate);var i=e.config.startInterval;!e.player.paused&&e._checkIfCanStart()&&e.start(0,i)}})),Object(n.e)(Object(n.a)(e),"start",(function(t,i){var r=e.player.video,a=yt(),o=e.checkVideoIsSupport(r);o&&e.canvasCtx&&(i||(i=e.interval),e.stop(),r.videoWidth&&r.videoHeight&&(e.videoPI=r.videoHeight>0?parseInt(r.videoWidth/r.videoHeight*100,10):0,(e.config.mode===vt||a-e.preTime>=i)&&(r&&r.videoWidth&&e.update(o,e.videoPI),e.preTime=a)),e.frameId="timer"===e._loopType?s.b.setTimeout(Object(n.a)(e),e.start,i):s.b.requestAnimationFrame(e.start))})),Object(n.e)(Object(n.a)(e),"stop",(function(){e.frameId&&("timer"===e._loopType?s.b.clearTimeout(Object(n.a)(e),e.frameId):s.b.cancelAnimationFrame(e.frameId),e.frameId=null)})),e}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),i.isSupport||(this.config.disable=!0);var t=this.config,n=t.disable,r=t.mode,s=t.frameRate;n||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/s,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this._loopType=this.config.mode!==vt&&this.interval>=1e3?"timer":"animation",this.once(a.COMPLETE,(function(){e.player&&(e.init(),e.renderByPoster(),e.player.paused||e.start())})),r!==mt&&(r!==gt&&(this.on(a.EMPTIED,(function(){e.stop()})),this.on(a.PLAY,(function(){var t=e.config.startInterval;e._checkIfCanStart()&&e.start(0,t)})),this.on(a.PAUSE,(function(){e.stop()}))),this.on(a.LOADED_DATA,this.onLoadedData),this.on(a.LOAD_START,(function(){e._isLoaded=!1,e.stop()})),document.addEventListener("visibilitychange",this.onVisibilitychange)))}},{key:"setConfig",value:function(e){var t=this;Object.keys(e).forEach((function(i){"root"===i&&e[i]!==t.config[i]?t.reRender(e[i]):"frameRate"===i?t.interval=parseInt(1e3/e[i],10):"disable"===i&&e[i]&&t.stop(),t.config[i]=e[i]}))}},{key:"init",value:function(e){var t=this.player,n=this.config;this.canvasFilter=i.supportCanvasFilter();try{var r=e||n.root;r||(r=n.isInnerRender&&t.innerContainer||t.root),r.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(n.index,'"><canvas>\n        </canvas><xgmask></xgmask></div>')),this.root=r.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=n.filter,this.canvas.style.webkitFilter=n.filter),this.mask=this.find("xgmask"),n.addMask&&(this.mask.style.background=n.maskBg),this.canvasCtx=this.canvas.getContext("2d")}catch(e){o.b.logError("plugin:DynamicBg",e)}}},{key:"reRender",value:function(e){if(this.config.disable||this.root){this.stop();var t=this.root?this.root.parentElement:null;if(t!==e&&t.removeChild(this.root),e){this.init(e),this.renderOnce();var i=this.config.startInterval;this._checkIfCanStart()&&this.start(0,i)}else this.root=null}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var t=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(t&&("safari"!==r.a.browser||!s.b.isMSE(t)))return t;var i=t?t.tagName.toLowerCase():"";return"canvas"===i||"img"===i?t:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var t="String"===s.b.typeOf(e)?e:"String"===s.b.typeOf(e.poster)?e.poster:null;this.updateImg(t)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&!this.player.paused&&e!==gt&&e!==mt}},{key:"renderOnce",value:function(){var e=this.player.video;if(e.videoWidth&&e.videoHeight){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var t=this.checkVideoIsSupport(e);t&&this.update(t,this.videoPI)}}},{key:"updateImg",value:function(e){var t=this;if(e){var i=this.canvas.getBoundingClientRect(),n=i.width,r=i.height,s=new window.Image;s.onload=function(){if(t.canvas&&!t.frameId&&!t.isStart){t.canvas.height=r,t.canvas.width=n;var e=parseInt(n/r*100,10);t.update(s,e),s=null}},s.src=e}}},{key:"update",value:function(e,t){if(this.canvas&&this.canvasCtx&&t)try{var i=this._pos,n=this.config,r=this.canvas.getBoundingClientRect(),s=r.width,a=r.height;if(s!==i.width||a!==i.height||i.pi!==t){var l=parseInt(s/a*100,10);i.pi=t,i.width!==s&&(i.width=this.canvas.width=s),i.height!==a&&(i.height=this.canvas.height=a);var c=a,u=s;l<t?u=parseInt(a*t/100,10):l>t&&(c=parseInt(100*s/t,10)),i.rwidth=u*n.multiple,i.rheight=c*n.multiple,i.x=(s-i.rwidth)/2,i.y=(a-i.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=n.filter),this.canvasCtx.drawImage(e,i.x,i.y,i.rwidth,i.rheight)}catch(e){o.b.logError("plugin:DynamicBg",e)}}},{key:"destroy",value:function(){this.stop(),document.removeEventListener("visibilitychange",this.onVisibilitychange),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,startInterval:0,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof bt?bt:bt=function(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===r.a.browser||"firefox"===r.a.browser)}}]),i}(l.b),kt=i(392),Et=a.STATS_EVENTS,St=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),Object(n.e)(Object(n.a)(e),"_recordUserActions",(function(t){var i=e._getTime(),r=Object.assign({},t,{msg:t.msg||t.action});e._stats.info.push(Object(n.i)(Object(n.i)({type:"userAction"},i),{},{payload:r}))})),Object(n.e)(Object(n.a)(e),"_onReset",(function(){e.reset()})),Object(n.e)(Object(n.a)(e),"_recordInfo",(function(t){e.info(t)})),Object(n.e)(Object(n.a)(e),"_downloadStats",(function(){var t=e.getStats(),i=new Blob([JSON.stringify(t)],{type:"application/json"}),n=window.URL.createObjectURL(i),r=document.createElement("a");r.style.display="none",r.href=n,r.download="player.txt",r.disabled=!1,r.click()})),e}return Object(n.c)(i,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(a.USER_ACTION,this._recordUserActions),this.on(Et.STATS_INFO,this._recordInfo),this.on(Et.STATS_DOWNLOAD,this._downloadStats),this.on(Et.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var t=this._getTime();this._stats.info.push(Object(n.i)(Object(n.i)({},t),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var t=Date.now()-e.startMs,i=Object(n.i)({cat:"function",dur:t,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(i)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},Object(n.e)(e,"info",[]),Object(n.e)(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player.media,t=[],i=0;i<e.buffered.length;i++)t.push({start:e.buffered.start(i),end:e.buffered.end(i)});var n={currentTime:e.currentTime,readyState:e.readyState,buffered:t,paused:e.paused,ended:e.ended};return this._stats.media=n,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats.info.map((function(e){var t=e.payload.data,i="";try{t instanceof Error?i=t.msg:void 0!==t&&(i=JSON.stringify(t))}catch(e){console.log("err",e)}return"[".concat(e.timeFormat,"] : ").concat(e.payload.msg," ").concat(i," ")}))}},{key:"_getProfile",value:function(){var e={traceEvents:[]};return this._stats.info.forEach((function(t){t.payload.profile&&e.traceEvents.push(t.payload)})),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),i}(z.a),wt=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),Object(n.e)(Object(n.a)(e),"onGapJump",(function(){var t=Object(n.a)(e),r=t.player,s=t.config;if(r.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(r.media.seeking){if(!e.seekingEventReceived)return}else e.seekingEventReceived=!1;if(!r.media.paused||0===r.media.currentTime||!e.hasPlayed){var a=r.media.buffered,o=s.smallGapLimit||.5,l=s.gapDetectionThreshold||.3,c=r.media.currentTime,u=e._getIndex(a,c,l);if(null!==u&&0!==u){console.log("GapJump  bufferRange ",a.start(u),a.end(u));var d=a.start(u)+.1;if(!(d>r.media.duration)){var h=d-c,f=h<=o;h<i.BROWSER_GAP_TOLERANCE||f&&(!1!==s.useGapJump&&(r.media.currentTime=e.isSafari?d+.1:d),e.player&&e.player.emit("detectGap"),console.log("gapJump gapIndex",u," isGapSamll:",f," currentTime:",r.media.currentTime," jumpSize:",c-r.media.currentTime),.08!==d&&r&&r.emit("log",{type:"oneevent",end_type:"gap",vid:r.config.vid,ext:{video_postion:Math.floor(1e3*d)}}))}}}}})),e}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this;!1!==this.config.useGapJump&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(a.WAITING,this.onGapJump),this.on(a.PLAY,(function(){e.hasPlayed=!0})),this.on(a.SEEKING,(function(){e.seekingEventReceived=!0})))}},{key:"_getIndex",value:function(e,t,i){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var n=this._getBuffered(e),r=null,s=0;s<n.length;s++){if(n[s].start>t&&(0===s||n[s-1].end-t<=i)){r=s;break}}return r}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),i}(l.b);wt.BROWSER_GAP_TOLERANCE=.001;var Tt=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),Object(n.e)(Object(n.a)(e),"onWaiting",(function(){var t=Object(n.a)(e).config;e.jumpCnt>t.jumpCntMax||e.timer||!1===t.useWaitingTimeoutJump||(e.timer=setTimeout(e.onJump,1e3*t.waitingTime))})),Object(n.e)(Object(n.a)(e),"onJump",(function(){var t=Object(n.a)(e),i=t.player,r=t.config;if(clearTimeout(e.timer),e.timer=null,!(e.jumpCnt>r.jumpCntMax||!1===r.useWaitingTimeoutJump||i.media.paused&&0!==i.media.currentTime&&e.hasPlayed)){e.jumpSize=r.jumpSize*(e.jumpCnt+1),e.jumpCnt===r.jumpSize&&e.jumpSize<6&&(e.jumpSize=6);var s=i.currentTime+e.jumpSize;s>i.media.duration||(console.log("waitintTimeout, currentTime:",i.currentTime,", jumpTo:",s),e.jumpCnt++,i.currentTime=s)}})),e}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this,t=this.config,i=t.useWaitingTimeoutJump,n=t.jumpSize;!1!==i&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=n,this.on(a.WAITING,this.onWaiting),this.on([a.PLAYING,a.CANPLAY],(function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize})),this.on(a.PLAY,(function(){e.hasPlayed=!0})))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),i}(l.b),xt=["cdn"],Ct=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o)),Object(n.e)(Object(n.a)(e),"getSpeed",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cdn";if(!e.speedListCache||!e.speedListCache[t])return 0;if(e.speedListCache[t].length<=0)return 0;var i=0;return e.speedListCache[t].map((function(e){i+=e})),Math.floor(i/e.speedListCache[t].length)})),Object(n.e)(Object(n.a)(e),"startTimer",(function(){s.b.isMSE(e.player.video)||(e.initSpeedList(),e.cnt=0,e.timer=setTimeout(e.testSpeed,e.config.testTimeStep))})),Object(n.e)(Object(n.a)(e),"initSpeedList",(function(){e.speedListCache={},xt.forEach((function(t){e.speedListCache[t]=[]}))})),Object(n.e)(Object(n.a)(e),"_onRealSpeedChange",(function(t){t.speed&&e.appendList(t.speed,t.type||"cdn")})),Object(n.e)(Object(n.a)(e),"testSpeed",(function(){if(clearTimeout(e.timer),e.timer=null,e.player&&e.config.openSpeed){var t=e.config,i=t.url,n=t.loadSize,r=t.testCnt,s=t.testTimeStep,a=i+(i.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(e.cnt>=r)){e.cnt++;try{var o=(new Date).getTime(),l=null,c=new XMLHttpRequest;e.xhr=c,c.open("GET",a);var u={},d=Math.floor(10*Math.random());u.Range="bytes="+d+"-"+(n+d),u&&Object.keys(u).forEach((function(e){c.setRequestHeader(e,u[e])})),c.onreadystatechange=function(){if(4===c.readyState){e.xhr=null,l=(new Date).getTime();var t=c.getResponseHeader("Content-Length")/1024*8,i=Math.round(1e3*t/(l-o));e.appendList(i),e.timer=setTimeout(e.testSpeed,s)}},c.send()}catch(e){console.error(e)}}}})),Object(n.e)(Object(n.a)(e),"appendList",(function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cdn";if(e.speedListCache&&e.speedListCache[i]){var r=e.config.saveSpeedMax;e.speedListCache[i].length>=r&&e.speedListCache[i].shift(),e.speedListCache[i].push(t);var s=Object(n.a)(e),a=s.player;a&&("cdn"===i?a.realTimeSpeed=t:a[e.getSpeedName("realTime",i)]=t),e.updateSpeed(i)}})),Object(n.e)(Object(n.a)(e),"updateSpeed",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cdn",i=e.getSpeed(t),r=Object(n.a)(e),s=r.player;if(s)if("cdn"===t)s.avgSpeed&&i===s.avgSpeed||(s.avgSpeed=i,s.emit(a.DOWNLOAD_SPEED_CHANGE,{speed:i,realTimeSpeed:s.realTimeSpeed}));else{var o=e.getSpeedName("avg",t);s[o]&&i===s[o]||(s[o]=i,s.emit(a.DOWNLOAD_SPEED_CHANGE,{speed:i,realTimeSpeed:s.realTimeSpeed}))}})),e}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this.config,t=e.openSpeed,i=e.addSpeedTypeList;(null==i?void 0:i.length)>0&&xt.push.apply(xt,Object(n.k)(i)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,t&&this.on([a.LOADED_DATA,a.REPLAY],this.startTimer)}},{key:"getSpeedName",value:function(e,t){return e+"Speed"+t.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer)return clearTimeout(this.timer),void(this.timer=null);if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var e=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([a.LOADED_DATA,a.REPLAY],this.startTimer),xt.forEach((function(t){e.speedListCache&&e.speedListCache[t]&&(e.speedListCache[t]=[])})),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&4!==this.xhr.readyState&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:204800,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),i}(l.b),Ot=i(369),Pt=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i,[{key:"afterCreate",value:function(){var e=this,t=this.player,i=this.config,n=t.media||t.video;(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],i.disabled)||n.getVideoPlaybackQuality&&(this.on(a.PLAY,(function(){e._startTick()})),this.on(a.PAUSE,(function(){e._stopTick()})),this.on(a.ENDED,(function(){e._stopTick()})),this.on(a.EMPTIED,(function(){e._stopTick()})))}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout((function(){e._checkDecodeFPS(),e._startTick()}),this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkBuffer",value:function(e,t){for(var i=!1,n=[],r=0;r<t.length;r++){var s=t.start(r),a=t.end(r);if(n.push({start:s,end:a}),s<=e&&e<=a-1){i=!0;break}}return{enoughBuffer:i,buffers:n}}},{key:"_checkStuck",value:function(e,t,i,n){var r=this.player.media||this.player.video,s=document.hidden,o=r.paused,l=r.readyState,c=r.currentTime,u=r.buffered;if(!(s||o||l<4)){var d=this._checkBuffer(c,u),h=d.enoughBuffer,f=d.buffers;h&&(e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({currentTime:c,buffers:f,curDecodedFrames:e,totalVideoFrames:t,droppedVideoFrames:i,checkInterval:n}),this._currentStuckCount>=this.config.stuckCount&&(this.emit(a.FPS_STUCK,this._payload),this._reset())):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){var e=this.player.media||this.player.video;if(e){var t=e.getVideoPlaybackQuality(),i=t.totalVideoFrames,n=t.droppedVideoFrames,r=performance.now();if(i&&this._lastCheckPoint){var s=i-this._lastDecodedFrames,a=r-this._lastCheckPoint;this._checkStuck(s,i,n,a)}this._lastDecodedFrames=i,this._lastCheckPoint=r}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),i}(l.b);Ot.a.use(kt.a);var At=Object(n.c)((function e(t,i){var s,a,o;Object(n.b)(this,e);var l=i&&"mobile"===i.isMobileSimulateMode,c=i.isLive,u=[].concat(c?[]:[xe,me,pt,dt,Te],[be,we,Ie,Ue,Qe,et,Ve,$e,Ae,Be]),d=[b,_,x,fe,C,rt,at,ht,H];this.plugins=[St,m].concat(Object(n.k)(u),d,[wt,Tt]);var h=l?"mobile":r.a.device;switch(h){case"pc":(s=this.plugins).push.apply(s,[de,Y,nt,Ct,Pt]);break;case"mobile":(a=this.plugins).push.apply(a,[ce]);break;default:(o=this.plugins).push.apply(o,[de,Y,nt])}(r.a.os.isIpad||"pc"===h)&&this.plugins.push(_t),r.a.os.isIpad&&this.plugins.push(Y),this.ignores=[],this.i18n=[]}))},395:function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var n=i(350),r=i(365),s=i.n(r),a=i(351),o=i(356),l=i(367),c=i(354);function u(e,t){this&&this.emit&&("error"===e?this.errorHandler(e,t.error):this.emit(e,t))}function d(e,t){return function(i,n){var r={player:t,eventName:e,originalEvent:i,detail:i.detail||{},timeStamp:i.timeStamp,currentTime:t.currentTime,duration:t.duration,paused:t.paused,ended:t.ended,isInternalOp:!!t._internalOp[i.type],muted:t.muted,volume:t.volume,host:a.b.getHostFromUrl(t.currentSrc),vtype:t.vtype};if(t.removeInnerOP(i.type),"timeupdate"===e&&(t._currentTime=t.media&&t.media.currentTime),"ratechange"===e){var s=t.media?t.media.playbackRate:0;if(s&&t._rate===s)return;t._rate=t.media&&t.media.playbackRate}if("durationchange"===e&&(t._duration=t.media.duration),"volumechange"===e&&(r.isMutedChange=t._lastMuted!==t.muted,t._lastMuted=t.muted),"error"===e&&(r.error=n||t.video.error),t.mediaEventMiddleware[e]){var o=u.bind(t,e,r);try{t.mediaEventMiddleware[e].call(t,r,o)}catch(i){throw u.call(t,e,r),i}}else u.call(t,e,r)}}var h=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;Object(n.b)(this,i),(r=t.call(this,e))._hasStart=!1,r._currentTime=0,r._duration=0,r._internalOp={},r._lastMuted=!1,r.vtype="MP4",r._rate=-1,r.mediaConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:0|e.tabindex,mediaType:e.mediaType||"video","data-index":-1},e.videoConfig,e.videoAttributes);var s=e["x5-video-player-type"]||e.x5VideoPlayerType;return o.a.isWeixin&&o.a.os.isAndroid&&s&&(r.mediaConfig["x5-video-player-type"]=s,delete r.mediaConfig.playsinline,delete r.mediaConfig["webkit-playsinline"],delete r.mediaConfig["x5-playsinline"]),e.loop&&(r.mediaConfig.loop="loop"),e.autoplayMuted&&!Object.prototype.hasOwnProperty.call(r.mediaConfig,"muted")&&(r.mediaConfig.muted=!0),r.media=a.b.createDom(r.mediaConfig.mediaType,"",r.mediaConfig,""),e.defaultPlaybackRate&&(r.media.defaultPlaybackRate=r.media.playbackRate=e.defaultPlaybackRate),"Number"===a.b.typeOf(e.volume)&&(r.volume=e.volume),e.autoplayMuted&&(r.media.muted=!0,r._lastMuted=!0),e.autoplay&&(r.media.autoplay=!0),r._interval={},r.mediaEventMiddleware={},r.attachVideoEvents(),r}return Object(n.c)(i,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(i){t.mediaEventMiddleware[i]=e[i]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.mediaEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers||(this._evHandlers=c.VIDEO_EVENTS.map((function(t){var i="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return"function"==typeof e[i]&&e.on(t,e[i]),Object(n.e)({},t,d(t,e))}))),this._evHandlers.forEach((function(e){var i=Object.keys(e)[0];t.addEventListener(i,e[i],!1)}))}},{key:"detachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers.forEach((function(e){var i=Object.keys(e)[0];t.removeEventListener(i,e[i],!1)})),this._evHandlers.forEach((function(t){var i=Object.keys(t)[0],n="on".concat(i.charAt(0).toUpperCase()).concat(i.slice(1));"function"==typeof e[n]&&e.off(i,e[n])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var i=this;e.removeAttribute("src"),e.load(),t.forEach((function(e,t){i.media.appendChild(a.b.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||""),"data-index":t+1}))}));var n=e.children;if(n){this._videoSourceCount=n.length,this._videoSourceIndex=n.length,this._vLoadeddata=function(e){i.emit(c.SOURCE_SUCCESS,{src:e.target.currentSrc,host:a.b.getHostFromUrl(e.target.currentSrc)})};for(var r=null,s=0;s<this._evHandlers.length;s++)if("error"===Object.keys(this._evHandlers[s])[0]){r=this._evHandlers[s];break}!this._sourceError&&(this._sourceError=function(e){var t=parseInt(e.target.getAttribute("data-index"),10);if(i._videoSourceIndex--,0===i._videoSourceIndex||t>=i._videoSourceCount){var n={code:4,message:"sources_load_error"};r?r.error(e,n):i.errorHandler("error",n)}var s=l.a[4];i.emit(c.SOURCE_ERROR,new l.b(i,{errorType:s,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:e.target.src}))});for(var o=0;o<n.length;o++)n[o].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var i=0;i<t.length;i++)t[i].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.media&&(this.media.error||t)){var i=this.media.error||t,n=i.code?l.a[i.code]:"other";i.message;this.media.currentSrc||(i={code:6,message:"empty_src"}),this.emit(e,new l.b(this,{errorType:n,errorCode:i.code,errorMessage:i.message||"",mediaError:i}))}}},{key:"destroy",value:function(){for(var e in this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){return this.media?this.media.play():null}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return!!this.media&&this.media.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.media)return t;e||(e=this.media.buffered);var i=this.media.currentTime;if(e)for(var n=0,r=e.length;n<r&&(t[0]=e.start(n),t[1]=e.end(n),!(t[0]<=i&&i<=t[1]));n++);return t[0]-i<=0&&i-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.media&&this.media.autoplay},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?a.b.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var t=this.media.buffered;if(!t||0===t.length)return e;for(var i=0;i<t.length;i++)if((t.start(i)<=this.currentTime||t.start(i)<.1)&&t.end(i)>=this.currentTime)return{start:t.start(i),end:t.end(i)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?void 0!==this.media.currentTime?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.media&&this.media.defaultMuted},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.media&&this.media.ended}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){if(!this.media.error)return"";return["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.media.error.code-1]}},{key:"loop",get:function(){return!!this.media&&this.media.loop},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return!!this.media&&this.media.muted},set:function(e){this.media&&this.media.muted!==e&&(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return!this.media||this.media.paused}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){this.media&&e!==1/0&&(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return!!this.media&&this.media.preload},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return!!this.media&&this.media.seekable}},{key:"seeking",get:function(){return!!this.media&&this.media.seeking}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){this.media&&(this.emit(c.URL_CHANGE,e),this.emit(c.WAITING),this._currentTime=0,this._duration=0,a.b.isMSE(this.media)?this.onWaiting():(this._detachSourceEvents(this.media),"Array"===a.b.typeOf(e)?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()))}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e!==1/0&&this.media&&(this.media.volume=e)}},{key:"aspectRatio",get:function(){return this.media?this.media.videoWidth/this.media.videoHeight:0}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var r,s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];(r=Object(n.f)(Object(n.g)(i.prototype),"emit",this)).call.apply(r,[this,e,t].concat(a))}},{key:"on",value:function(e,t){for(var r,s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];(r=Object(n.f)(Object(n.g)(i.prototype),"on",this)).call.apply(r,[this,e,t].concat(a))}},{key:"once",value:function(e,t){for(var r,s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];(r=Object(n.f)(Object(n.g)(i.prototype),"once",this)).call.apply(r,[this,e,t].concat(a))}},{key:"off",value:function(e,t){for(var r,s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];(r=Object(n.f)(Object(n.g)(i.prototype),"off",this)).call.apply(r,[this,e,t].concat(a))}},{key:"offAll",value:function(){Object(n.f)(Object(n.g)(i.prototype),"removeAllListeners",this).call(this)}}]),i}(s.a),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};Object(n.b)(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return Object(n.c)(e,[{key:"openDB",value:function(e){var t=this,i=this,n=this.myDB.version||1,r=i.indexedDB.open(i.myDB.name,n);r.onerror=function(e){},r.onsuccess=function(n){t.myDB.db=n.target.result,e.call(i)},r.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(i.myDB.ojstore.name)||t.createObjectStore(i.myDB.ojstore.name,{keyPath:i.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var i,n=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(i=n.add(t[r])).onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var i,n=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(i=n.put(t[r])).onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,i){var n=this,r=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);r.onerror=function(){i.call(n,null)},r.onsuccess=function(e){var t=e.target.result;i.call(n,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}(),p=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],v=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],g=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],m="data-xgplayerid",y=i(353),b=i(358),_=function(){function e(){var t=this;if(Object(n.b)(this,e),Object(n.e)(this,"__trigger",(function(e){var i=(new Date).getTime();t.timeStamp=i;for(var n=0;n<e.length;n++)t.__runHandler(e[n].target)})),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver(Object(a.d)(this.__trigger,100,{trailing:!0})),this.timeStamp=(new Date).getTime()}catch(e){console.error(e)}}return Object(n.c)(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var i=e.getAttribute(m),n=this.__handlers,r=-1,s=0;s<n.length;s++)n[s]&&e===n[s].target&&(r=s);r>-1?this.__handlers[r].handler=t:this.__handlers.push({target:e,handler:t,playerId:i})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(i,n){e===i.target&&(t=n)}));try{this.observer&&this.observer.unobserve(e)}catch(e){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,i=0;i<t.length;i++)if(t[i]&&e===t[i].target){try{t[i].handler(e)}catch(e){console.error(e)}return!0}return!1}}]),e}(),k=null;var E={pluginGroup:{},init:function(e){var t,i,n=e._pluginInfoId;n||(n=(new Date).getTime(),e._pluginInfoId=n),!e.config.closeResizeObserver&&(t=e.root,i=function(){e.resize()},k||(k=new _),k.addObserver(t,i)),this.pluginGroup[n]={_originalOptions:e.config||{},_plugins:{}}},formatPluginInfo:function(e,t){var i=null,n=null;return e.plugin&&"function"==typeof e.plugin?(i=e.plugin,n=e.options):(i=e,n={}),t&&(n.config=t||{}),{PLUFGIN:i,options:n}},checkPluginIfExits:function(e,t){for(var i=0;i<t.length;i++)if(e.toLowerCase()===t[i].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(e,t){for(var i=Object.keys(t),n=null,r=0;r<i.length;r++)if(e.toLowerCase()===i[r].toLowerCase()){n=t[i[r]];break}return"Object"===a.b.typeOf(n)?{root:n.root,position:n.position}:{}},lazyRegister:function(e,t){var i=this,n=t.timeout||1500;return Promise.race([t.loader().then((function(t){var n;n=t&&t.__esModule?t.default:t,i.register(e,n,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),n)}))])},register:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var n=e._pluginInfoId;if(n&&this.pluginGroup[n]){this.pluginGroup[n]._plugins||(this.pluginGroup[n]._plugins={});var r=this.pluginGroup[n]._plugins,s=this.pluginGroup[n]._originalOptions;i.player=e;var o=i.pluginName||t.pluginName;if(!o)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported(e.config.mediaType,e.config.codecType)){i.config||(i.config={});for(var l=Object.keys(s),c=0;c<l.length;c++)if(o.toLowerCase()===l[c].toLowerCase()){var u=s[l[c]];"Object"===a.b.typeOf(u)?i.config=Object.assign({},i.config,s[l[c]]):"Boolean"===a.b.typeOf(u)&&(i.config.disable=!u);break}t.defaultConfig&&Object.keys(t.defaultConfig).forEach((function(e){void 0===i.config[e]&&(i.config[e]=t.defaultConfig[e])})),i.root?"string"==typeof i.root&&(i.root=e[i.root]):i.root=e.root,i.index=i.config.index||0;try{r[o.toLowerCase()]&&(this.unRegister(n,o.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(o,"] exist, destroy the old instance")));var d=new t(i);return r[o.toLowerCase()]=d,r[o.toLowerCase()].func=t,d&&"function"==typeof d.afterCreate&&d.afterCreate(),d}catch(e){throw console.error(e),e}}else console.warn("not supported plugin [".concat(o,"]"))}}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var i=this.pluginGroup[e]._plugins[t];i&&(i.pluginName&&i.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(i){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),i)}},deletePlugin:function(e,t){var i=e._pluginInfoId;i&&this.pluginGroup[i]&&this.pluginGroup[i]._plugins&&delete this.pluginGroup[i]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var i=e._pluginInfoId;if(!i||!this.pluginGroup[i])return null;var n=t.toLowerCase();return this.pluginGroup[i]._plugins[n]},beforeInit:function(e){var t=this;function i(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(n){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var r=e._pluginInfoId;if(t.pluginGroup[r]){var s=t.pluginGroup[r]._plugins,a=[];Object.keys(s).forEach((function(e){if(s[e]&&s[e].beforePlayerInit)try{var t=s[e].beforePlayerInit();a.push(i(t))}catch(e){throw a.push(i(null)),e}})),Promise.all([].concat(a)).then((function(){n()})).catch((function(e){console.error(e),n()}))}else n()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var i=this.pluginGroup[t]._plugins;Object.keys(i).forEach((function(e){i[e]&&i[e].afterPlayerInit&&i[e].afterPlayerInit()}))}},setLang:function(e,t){var i=t._pluginInfoId;if(i&&this.pluginGroup[i]){var n=this.pluginGroup[i]._plugins;Object.keys(n).forEach((function(t){if(n[t].updateLang)n[t].updateLang(e);else try{n[t].lang=e}catch(e){console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=this,i=e._pluginInfoId;if(i&&this.pluginGroup[i]){var n=[],r=this.pluginGroup[i]._plugins;Object.keys(r).forEach((function(e){"controls"!==e&&r[e]&&(n.push({plugin:r[e].func,options:r[e].__args}),t.unRegister(i,e))})),n.forEach((function(i){t.register(e,i.plugin,i.options)}))}},onPluginsReady:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var i=this.pluginGroup[t]._plugins||{};Object.keys(i).forEach((function(e){i[e].onPluginsReady&&"function"==typeof i[e].onPluginsReady&&i[e].onPluginsReady()}))}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var i,n;i=e.root,k.unObserver(i,n);for(var r=this.pluginGroup[t]._plugins,s=0,a=Object.keys(r);s<a.length;s++){var o=a[s];this.unRegister(t,o)}delete this.pluginGroup[t],delete e._pluginInfoId}}},S=i(364);function w(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:Object(a.c)(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var T=i(384),x=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){var e;Object(n.b)(this,i);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),Object(n.e)(Object(n.a)(e),"onMouseEnter",(function(t){var i=Object(n.a)(e),r=i.player;i.playerConfig.closeControlsBlur&&r.focus({autoHide:!1})})),Object(n.e)(Object(n.a)(e),"onMouseLeave",(function(t){Object(n.a)(e).player.focus()})),e}return Object(n.c)(i,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==o.a.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,i=t.disable,n=t.height,r=t.mode;if(!i){"flex"===r&&this.player.addClass(S.a.FLEX_CONTROLS);var s={height:"".concat(n,"px")};Object.keys(s).map((function(t){e.root.style[t]=s[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(c.MINI_STATE_CHANGE,(function(t){t?a.b.addClass(e.root,"mini-controls"):a.b.removeClass(e.root,"mini-controls")}));var l=this.playerConfig.isMobileSimulateMode;"mobile"!==o.a.device&&"mobile"!==l&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&a.b.addClass(this.root,S.a.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){a.b.removeClass(this.root,S.a.CONTROLS_AUTOHIDE)}},{key:"show",value:function(e){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(this.root){var s=e.defaultConfig||{};if(!t.root){var a=t.position?t.position:t.config&&t.config.position?t.config.position:s.position;switch(a){case y.a.CONTROLS_LEFT:t.root=this.left;break;case y.a.CONTROLS_RIGHT:t.root=this.right;break;case y.a.CONTROLS_CENTER:t.root=this.center;break;case y.a.CONTROLS:t.root=this.root;break;default:t.root=this.left}return Object(n.f)(Object(n.g)(i.prototype),"registerPlugin",this).call(this,e,t,r)}}}},{key:"destroy",value:function(){"mobile"!==o.a.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,i=e.autoHide,r=e.initShow;if(!e.disable){var s=a.b.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},Object(n.e)({},S.a.CONTROLS_AUTOHIDE,i),{"xgplayer-controls-initshow":r||!i});return'<xg-controls class="'.concat(s,'" unselectable="on">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),i}(y.b),C=i(352),O=i(369),P=i(419),A=i(379),L=i(385),I=["play","pause","replay","retry"],D=0,M=0,R=null,j=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(e){var r;Object(n.b)(this,i);var s=a.b.deepMerge(w(),e);r=t.call(this,s),Object(n.e)(Object(n.a)(r),"canPlayFunc",(function(){if(r.config){var e=r.config,t=e.autoplay,i=e.defaultPlaybackRate;C.b.logInfo("player","canPlayFunc, startTime",r.__startTime),r.__startTime>0&&r.duration>0&&(r.currentTime=r.__startTime>r.duration?r.duration:r.__startTime,r.__startTime=-1),r.playbackRate=i,(t||r._useAutoplay)&&r.mediaPlay(),r.off(c.CANPLAY,r.canPlayFunc),r.removeClass(S.a.ENTER)}})),Object(n.e)(Object(n.a)(r),"onFullscreenChange",(function(e,t){var i=function(){a.b.setTimeout(Object(n.a)(r),(function(){r.resize()}),100)},s=a.b.getFullScreenEl();r._fullActionFrom?r._fullActionFrom="":r.emit(c.USER_ACTION,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:r.currentTime,duration:r.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var o=Object(a.a)(s,r.playerId,m);if(t||s&&(s===r._fullscreenEl||o))i(),!r.config.closeFocusVideoFocus&&r.media.focus(),r.fullscreen=!0,r.changeFullStyle(r.root,s,S.a.FULLSCREEN),r.emit(c.FULLSCREEN_CHANGE,!0,r._fullScreenOffset),r.cssfullscreen&&r.exitCssFullscreen();else if(r.fullscreen){i();var l=Object(n.a)(r),u=l._fullScreenOffset;l.config.needFullscreenScroll?(window.scrollTo(u.left,u.top),a.b.setTimeout(Object(n.a)(r),(function(){r.fullscreen=!1,r._fullScreenOffset=null}),100)):(!r.config.closeFocusVideoFocus&&r.media.focus(),r.fullscreen=!1,r._fullScreenOffset=null),r.cssfullscreen?r.removeClass(S.a.FULLSCREEN):r.recoverFullStyle(r.root,r._fullscreenEl,S.a.FULLSCREEN),r._fullscreenEl=null,r.emit(c.FULLSCREEN_CHANGE,!1)}})),Object(n.e)(Object(n.a)(r),"_onWebkitbeginfullscreen",(function(e){r._fullscreenEl=r.media,r.onFullscreenChange(e,!0)})),Object(n.e)(Object(n.a)(r),"_onWebkitendfullscreen",(function(e){r.onFullscreenChange(e,!1)})),Object(T.a)(Object(n.a)(r),I),r.config=s,r._pluginInfoId=a.b.generateSessionId(),Object(C.a)(Object(n.a)(r));var l=r.constructor.defaultPreset;if(r.config.presets.length){var u=r.config.presets.indexOf("default");u>=0&&l&&(r.config.presets[u]=l)}else l&&r.config.presets.push(l);if(r.userTimer=null,r.waitTimer=null,r.handleSource=!0,r._state=A.a.INITIAL,r.isError=!1,r._hasStart=!1,r.isSeeking=!1,r.isCanplay=!1,r._useAutoplay=!1,r.__startTime=-1,r.rotateDeg=0,r.isActive=!1,r.fullscreen=!1,r.cssfullscreen=!1,r.isRotateFullscreen=!1,r._fullscreenEl=null,r.timeSegments=[],r._cssfullscreenEl=null,r.curDefinition=null,r._orgCss="",r._fullScreenOffset=null,r._videoHeight=0,r._videoWidth=0,r.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},r.sizeInfo={width:0,height:0,left:0,top:0},r._accPlayed={t:0,acc:0,loopAcc:0},r._offsetInfo={currentTime:-1,duration:0},r.innerContainer=null,r.controls=null,r.topBar=null,r.root=null,r.__i18n=O.a.init(r._pluginInfoId),o.a.os.isAndroid&&o.a.osVersion>0&&o.a.osVersion<6&&(r.config.autoplay=!1),r.database=new f,r.isUserActive=!1,r._onceSeekCanplay=null,r._isPauseBeforeSeek=0,r.innerStates={isActiveLocked:!1},r.instManager=R,!r._initDOM())return console.error(new Error("can't find the dom which id is ".concat(r.config.id," or this.config.el does not exist"))),Object(n.j)(r);var d=r.config,h=d.definition,p=void 0===h?{}:h;if(!d.url&&p.list&&p.list.length>0){var v=p.list.find((function(e){return e.definition&&e.definition===p.defaultDefinition}));v||(p.defaultDefinition=p.list[0].definition,v=p.list[0]),r.config.url=v.url,r.curDefinition=v}return r._bindEvents(),r._registerPresets(),r._registerPlugins(),E.onPluginsReady(Object(n.a)(r)),r.getInitDefinition(),r.setState(A.a.READY),a.b.setTimeout(Object(n.a)(r),(function(){r.emit(c.READY)}),0),r.onReady&&r.onReady(),(r.config.videoInit||r.config.autoplay)&&(!r.hasStart||r.state<A.a.ATTACHED)&&r.start(),r}return Object(n.c)(i,[{key:"_initDOM",value:function(){var e,t=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var i=this.config.el;if(!i||1!==i.nodeType)return this.emit(c.ERROR,new l.b("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=i}var n=Object(L.b)(this.root);n&&(C.b.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this.root.setAttribute(m,this.playerId),null===(e=R)||void 0===e||e.add(this),E.init(this),this._initBaseDoms();var r=this.constructor.XgVideoProxy;if(r&&this.mediaConfig.mediaType===r.mediaType){var s=this.innerContainer||this.root;this.detachVideoEvents(this.media);var a=new r(s,this.config,this.mediaConfig);this.attachVideoEvents(a),this.media=a}if(this.media.setAttribute(m,this.playerId),this.config.controls){var u=this.config.controls.root||null,d=E.register(this,x,{root:u});this.controls=d}var h="mobile"===this.config.isMobileSimulateMode?"mobile":o.a.device;if(this.addClass("".concat(S.a.DEFAULT," ").concat(S.a.INACTIVE," xgplayer-").concat(h," ").concat(this.config.controls?"":S.a.NO_CONTROLS)),this.config.autoplay?this.addClass(S.a.ENTER):this.addClass(S.a.NO_START),this.config.fluid){var f=this.config,p=f.width,v=f.height;"number"==typeof p&&"number"==typeof v||(p=600,v=337.5);var g={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*v/p,"%")};Object.keys(g).forEach((function(e){t.root.style[e]=g[e]}))}else["width","height"].forEach((function(e){t.config[e]&&("number"!=typeof t.config[e]?t.root.style[e]=t.config[e]:t.root.style[e]="".concat(t.config[e],"px"))}));var y=this.root.getBoundingClientRect(),b=y.width,_=y.height,k=y.left,w=y.top;return this.sizeInfo.width=b,this.sizeInfo.height=_,this.sizeInfo.left=k,this.sizeInfo.top=w,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=a.b.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),p.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),o.a.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(c.LOADED_DATA,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(c.PLAY,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),p.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off(c.PLAY,this.playFunc),this.off(c.CANPLAY,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_clearUserTimer",value:function(){this.userTimer&&(a.b.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"_startInit",value:function(e){var t=this;if(this.media&&(e&&""!==e&&("Array"!==a.b.typeOf(e)||0!==e.length)||(e="",this.emit(c.URL_NULL),C.b.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.handleSource&&(this._detachSourceEvents(this.media),"Array"===a.b.typeOf(e)&&e.length>0?this._attachSourceEvents(this.media,e):this.media.src&&this.media.src===e?e||this.media.removeAttribute("src"):this.media.src=e),"Number"===a.b.typeOf(this.config.volume)&&(this.volume=this.config.volume);var i=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!i.contains(this.media)&&i.insertBefore(this.media,i.firstChild);var n=this.media.readyState;C.b.logInfo("_startInit readyState",n),this.config.autoplay&&(!a.b.isMSE(this.media)&&this.load(),(o.a.os.isIpad||o.a.os.isPhone)&&this.mediaPlay());var r=this.config.startTime;this.__startTime=r>0?r:-1,this.config.startTime=0,n>=2&&this.duration>0?this.canPlayFunc():this.on(c.CANPLAY,this.canPlayFunc),(!this.hasStart||this.state<A.a.ATTACHED)&&E.afterInit(this),this.hasStart=!0,this.setState(A.a.ATTACHED),a.b.setTimeout(this,(function(){t.emit(c.COMPLETE)}),0)}}},{key:"_registerPlugins",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._loadingPlugins=[];var i=this.config.ignores||[],n=this.config.plugins||[],r=this.config.i18n||[];t&&O.a.extend(r,this.__i18n);var s=i.join("||").toLowerCase().split("||"),a=this.plugins;n.forEach((function(i){try{var n=i.plugin?i.plugin.pluginName:i.pluginName;if(n&&s.indexOf(n.toLowerCase())>-1)return null;if(!t&&a[n.toLowerCase()])return;if(i.lazy&&i.loader){var r=E.lazyRegister(e,i);return void(i.forceBeforeInit&&(r.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})).catch((function(t){C.b.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})),e._loadingPlugins.push(r)))}return e.registerPlugin(i)}catch(e){C.b.logError("_registerPlugins:",e)}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){!function(e,t){var i,r,s=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config),a=s.plugins,o=void 0===a?[]:a,l=s.ignores,c=void 0===l?[]:l,u=s.icons,d=void 0===u?{}:u,h=s.i18n,f=void 0===h?[]:h;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(i=e.config.plugins).push.apply(i,Object(n.k)(o)),(r=e.config.ignores).push.apply(r,Object(n.k)(c)),Object.keys(d).map((function(t){e.config.icons[t]||(e.config.icons[t]=d[t])}));var p=e.config.i18n||[];f.push.apply(f,Object(n.k)(p)),e.config.i18n=f}(e,t)}))}},{key:"_getRootByPosition",value:function(e){var t=null;switch(e){case y.a.ROOT_RIGHT:this.rightBar||(this.rightBar=a.b.createPositionBar("xg-right-bar",this.root)),t=this.rightBar;break;case y.a.ROOT_LEFT:this.leftBar||(this.leftBar=a.b.createPositionBar("xg-left-bar",this.root)),t=this.leftBar;break;case y.a.ROOT_TOP:this.topBar||(this.topBar=a.b.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&a.b.addClass(this.topBar,S.a.TOP_BAR_AUTOHIDE)),t=this.topBar;break;default:t=this.innerContainer||this.root}return t}},{key:"registerPlugin",value:function(e,t){var i=E.formatPluginInfo(e,t),n=i.PLUFGIN,r=i.options,s=this.config.plugins;!E.checkPluginIfExits(n.pluginName,s)&&s.push(n);var a=E.getRootByConfig(n.pluginName,this.config);a.root&&(r.root=a.root),a.position&&(r.position=a.position);var o=r.position?r.position:r.config&&r.config.position||n.defaultConfig&&n.defaultConfig.position;return!r.root&&"string"==typeof o&&o.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(n,r,n.pluginName):(r.root||(r.root=this._getRootByPosition(o)),E.register(this,n,r))}},{key:"deregister",value:function(e){"string"==typeof e?E.unRegister(this,e):e instanceof b.a&&E.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"==typeof e?t=e:e instanceof b.a&&(t=e.pluginName),t)for(var i=this.config.plugins.length-1;i>-1;i--){if(this.config.plugins[i].pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(i,1);break}}}},{key:"plugins",get:function(){return E.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=E.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(a.b.hasClass(this.root,e)||a.b.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&a.b.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return a.b.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!(this.state>A.a.ATTACHING))return e||this.config.url||this.getInitDefinition(),this.hasStart=!0,this.setState(A.a.ATTACHING),this._registerPlugins(!1),E.beforeInit(this).then((function(){if(t.config){e||(e=t.url||t.config.url);var i=t._preProcessUrl(e);return t._startInit(i.url)}})).catch((function(e){throw e.fileName="player",e.lineNumber="236",C.b.logError("start:beforeInit:",e),e}))}},{key:"switchURL",value:function(e,t){var i=this,n=e;"Object"===a.b.typeOf(e)&&(n=e.url),n=this._preProcessUrl(n).url;var r=this.currentTime;this.__startTime=r;var s=this.paused&&!this.isError;return this.src=n,new Promise((function(e,t){var r=function(e){i.off("timeupdate",a),i.off("canplay",a),t(e)},a=function(){i.duration>0&&i.__startTime>0&&(i.currentTime=i.__startTime,i.__startTime=-1),s&&i.pause(),i.off("error",r),e(!0)};i.once("error",r),n?(o.a.os.isAndroid?i.once("timeupdate",a):i.once("canplay",a),i.play()):i.errorHandler("error",{code:6,message:"empty_src"})}))}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<A.a.ATTACHED)return this.removeClass(S.a.NO_START),this.addClass(S.a.ENTER),this.start(),void(this._useAutoplay=!0);this.state<A.a.RUNNING&&(this.removeClass(S.a.NO_START),!this.isCanplay&&this.addClass(S.a.ENTER));var t=Object(n.f)(Object(n.g)(i.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(S.a.NOT_ALLOW_AUTOPLAY),e.addClass(S.a.PLAYING),e.state<A.a.RUNNING&&(C.b.logInfo(">>>>playPromise.then"),e.setState(A.a.RUNNING),e.emit(c.AUTOPLAY_STARTED))})).catch((function(t){if(C.b.logWarn(">>>>playPromise.catch",t.name),e.media&&e.media.error)return e.onError(),void e.removeClass(S.a.ENTER);"NotAllowedError"===t.name&&(e._errorTimer=a.b.setTimeout(e,(function(){e._errorTimer=null,e.emit(c.AUTOPLAY_PREVENTED),e.addClass(S.a.NOT_ALLOW_AUTOPLAY),e.removeClass(S.a.ENTER),e.pause(),e.setState(A.a.NOTALLOW)}),0))})):(C.b.logWarn("video.play not return promise"),this.state<A.a.RUNNING&&(this.setState(A.a.RUNNING),this.removeClass(S.a.NOT_ALLOW_AUTOPLAY),this.removeClass(S.a.NO_START),this.removeClass(S.a.ENTER),this.addClass(S.a.PLAYING),this.emit(c.AUTOPLAY_STARTED))),t}},{key:"mediaPause",value:function(){Object(n.f)(Object(n.g)(i.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){Object(n.f)(Object(n.g)(i.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(S.a.PAUSED),Object(T.f)(this,"play",(function(){return e.mediaPlay()}))}},{key:"pause",value:function(){var e=this;Object(T.f)(this,"pause",(function(){Object(n.f)(Object(n.g)(i.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var i=this;if(this.media&&!Number.isNaN(Number(e))&&this.hasStart){var n=this.config,r=n.isSeekedPlay,s=n.seekedStatus,a=t||(r?"play":s);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(c.SEEKED,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(i.removeClass(S.a.ENTER),i.isSeeking=!1,a){case"play":i.play();break;case"pause":i.pause();break;default:i._isPauseBeforeSeek>1||i.paused?i.pause():i.play()}i._isPauseBeforeSeek=0,i._onceSeekCanplay=null},this.once(c.SEEKED,this._onceSeekCanplay),this.state<A.a.RUNNING?(this.removeClass(S.a.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,t=this.config,i=t.definition;!t.url&&i&&i.list&&i.list.length>0&&i.defaultDefinition&&i.list.map((function(t){t.definition===i.defaultDefinition&&(e.config.url=t.url,e.curDefinition=t)}))}},{key:"changeDefinition",value:function(e,t){var i=this,r=this.config.definition;if(Array.isArray(null==r?void 0:r.list)&&r.list.forEach((function(t){(null==e?void 0:e.definition)===t.definition&&(i.curDefinition=t)})),null!=e&&e.bitrate&&"number"!=typeof e.bitrate&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(c.DEFINITION_CHANGE,{from:t,to:e}),this.hasStart){var s=this.switchURL(e.url,Object(n.i)({seamless:!1!==r.seamless&&"undefined"!=typeof MediaSource&&"function"==typeof MediaSource.isTypeSupported},e));s&&s.then?s.then((function(){i.emit(c.AFTER_DEFINITION_CHANGE,{from:t,to:e})})):this.emit(c.AFTER_DEFINITION_CHANGE,{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(c.LOADED_DATA,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[S.a.NOT_ALLOW_AUTOPLAY,S.a.PLAYING,S.a.NO_START,S.a.PAUSED,S.a.REPLAY,S.a.ENTER,S.a.ENDED,S.a.ERROR,S.a.LOADING];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,t.forEach((function(t){e.removeClass(t)})),this.addClass(S.a.NO_START),this.emit(c.RESET)}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;this.resetState();var n=this.plugins;if(n&&(t.map((function(t){e.deregister(t)})),i)){var r=w();Object.keys(this.config).keys((function(t){"undefined"===e.config[t]||"plugins"!==t&&"presets"!==t&&"el"!==t&&"id"!==t||(e.config[t]=r[t])}))}}},{key:"destroy",value:function(){var e,t=this,r=this.innerContainer,s=this.root,o=this.media;if(s&&o){if(this.hasStart=!1,this._useAutoplay=!1,s.removeAttribute(m),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),a.b.clearAllTimers(this),this.emit(c.DESTROY),null===(e=R)||void 0===e||e.remove(this),E.destroy(this),Object(T.b)(this),Object(n.f)(Object(n.g)(i.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),r)for(var l=r.children,u=0;u<l.length;u++)r.removeChild(l[u]);!r&&o instanceof window.Node&&s.contains(o)&&s.removeChild(o),["topBar","leftBar","rightBar","innerContainer"].map((function(e){t[e]&&s.removeChild(t[e]),t[e]=null}));var d=s.className.split(" ");d.length>0?s.className=d.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):s.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(e){t[e]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(S.a.ENDED),this.currentTime=0,this.isSeeking=!1,Object(T.f)(this,"replay",(function(){e.once(c.SEEKED,(function(){var t=e.mediaPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.emit(c.REPLAY),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(S.a.ERROR),this.addClass(S.a.LOADING),Object(T.f)(this,"retry",(function(){var t=e.currentTime,i=e.config.url,n=a.b.isMSE(e.media)?{url:i}:e._preProcessUrl(i);e.src=n.url,!e.config.isLive&&(e.currentTime=t),e.once(c.CANPLAY,(function(){e.mediaPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,i,n){e&&(n||(n=S.a.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=a.b.filterStyleFromText(e)),a.b.addClass(e,i),t&&t!==e&&!this._orgPCss&&(this._orgPCss=a.b.filterStyleFromText(t),a.b.addClass(t,n),t.setAttribute(m,this.playerId)))}},{key:"recoverFullStyle",value:function(e,t,i,n){n||(n=S.a.PARENT_FULLSCREEN),this._orgCss&&(a.b.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),a.b.removeClass(e,i),t&&t!==e&&this._orgPCss&&(a.b.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",a.b.removeClass(t,n),t.removeAttribute(m))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,i=this.media;e||(e=t),this._fullScreenOffset={top:a.b.scrollTop(),left:a.b.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var n=a.b.getFullScreenEl();if(n===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var r=0;r<v.length;r++){var s=v[r];if(e[s]){var o="webkitRequestFullscreen"===s?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[s]();return o&&o.then?o:Promise.resolve()}}return i.fullscreenEnabled||i.webkitSupportsFullscreen?(i.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(e){return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||a.b.getFullScreenEl()){this.root;var t=this.media;this._fullActionFrom="exit";try{for(var i=0;i<g.length;i++){var n=g[i];if(document[n]){var r=document[n]();return r&&r.then?r:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(e){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(S.a.INNER_FULLSCREEN," ").concat(S.a.CSS_FULLSCREEN):S.a.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,t);var i=this.config.fullscreen,n=void 0===i?{}:i,r=!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen();r&&(this.fullscreen=!0,this.emit(c.FULLSCREEN_CHANGE,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(c.CSS_FULLSCREEN_CHANGE,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(S.a.INNER_FULLSCREEN," ").concat(S.a.CSS_FULLSCREEN):S.a.CSS_FULLSCREEN;if(this.fullscreen){var t=this.config.fullscreen,i=void 0===t?{}:t;!0===i.useCssFullscreen||"function"==typeof i.useCssFullscreen&&i.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(c.FULLSCREEN_CHANGE,!1)):this.removeClass(e)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,e);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(c.CSS_FULLSCREEN_CHANGE,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(S.a.INNER_FULLSCREEN," ").concat(S.a.ROTATE_FULLSCREEN):S.a.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,S.a.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(c.FULLSCREEN_CHANGE,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(S.a.INNER_FULLSCREEN," ").concat(S.a.ROTATE_FULLSCREEN):S.a.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,t,S.a.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(c.FULLSCREEN_CHANGE,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(c.PLAYER_FOCUS,Object(n.i)({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?(this._clearUserTimer(),this.emit(c.PLAYER_BLUR,Object(n.i)({paused:this.paused,ended:this.ended},e))):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!0,delay:3e3},i=this.innerStates;if(this.isActive=!0,this.removeClass(S.a.INACTIVE),this._clearUserTimer(),void 0!==t.isLock&&(i.isActiveLocked=t.isLock),!1===t.autoHide||!0===t.isLock||i.isActiveLocked)this._clearUserTimer();else{var n=t&&t.delay?t.delay:this.config.inactive;this.userTimer=a.b.setTimeout(this,(function(){e.userTimer=null,e.blur()}),n)}}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignorePaused,i=void 0!==t&&t;if(!this.innerStates.isActiveLocked){var n=this.config.closePauseVideoFocus;this.isActive=!1,(i||n||!this.paused&&!this.ended)&&this.addClass(S.a.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(S.a.ENTER),this.removeClass(S.a.ERROR),this.removeClass(S.a.LOADING),this.isCanplay=!0,this.waitTimer&&a.b.clearTimeout(this,this.waitTimer)}},{key:"onDurationchange",value:function(){this.__startTime>0&&this.duration>0&&(this.currentTime=this.__startTime,this.__startTime=-1)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(S.a.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===A.a.ENDED&&this.setState(A.a.RUNNING),this.removeClass(S.a.PAUSED),this.ended&&this.removeClass(S.a.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(S.a.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this._clearUserTimer(),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(S.a.ENDED),this.setState(A.a.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(S.a.NOT_ALLOW_AUTOPLAY),this.removeClass(S.a.NO_START),this.removeClass(S.a.ENTER),this.removeClass(S.a.LOADING),this.addClass(S.a.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(S.a.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&a.b.clearTimeout(this,this.waitTimer),this.removeClass(S.a.LOADING),this.removeClass(S.a.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&a.b.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=a.b.setTimeout(this,(function(){e.addClass(S.a.LOADING),e.emit(c.LOADING),a.b.clearTimeout(e,e.waitTimer),e.waitTimer=null}),this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1,[S.a.NO_START,S.a.PAUSED,S.a.ENDED,S.a.ERROR,S.a.REPLAY,S.a.LOADING].forEach((function(t){e.removeClass(t)})),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(S.a.LOADING))&&this.media.readyState>2&&(this.removeClass(S.a.LOADING),a.b.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<A.a.RUNNING&&this.duration&&(this.setState(A.a.RUNNING),this.emit(c.AUTOPLAY_STARTED)),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===a.b.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,i){if(this.media&&t&&e){var r="String"===a.b.typeOf(e)?e:e.type||"";i.props&&"Array"!==a.b.typeOf(i.props)&&(i.props=[i.props]),this.emit(c.USER_ACTION,Object(n.i)({eventType:r,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},i))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{startDiff:0,endDiff:0},i=t||{},n=i.startDiff,r=void 0===n?0:n,s=i.endDiff,a=void 0===s?0:s,o=this.media.buffered;if(!o||0===o.length||!this.duration)return!0;for(var l=e||this.media.currentTime||.2,c=o.length,u=0;u<c;u++)if(o.start(u)+r<=l&&o.end(u)-a>l)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,t=e.vy,i=e.vx,n=e.h,r=e.w,s=this.videoPos.rotate;if(!(s<0&&n<0&&r<0)){var o=this.videoPos._pi;if(!o&&this.media.videoHeight&&(o=this.media.videoWidth/this.media.videoHeight*100),o){this.videoPos.pi=o;var l={rotate:s=s<0?0:s},c=0,u=0,d=1,h=Math.abs(s/90),f=this.root,p=this.innerContainer,v=f.offsetWidth,g=p?p.offsetHeight:f.offsetHeight,m=g,y=v;if(h%2==0)d=n>0?100/n:r>0?100/r:1,l.scale=d,c=t>0?(100-n)/2-t:0,l.y=2===h?0-c:c,u=i>0?(100-r)/2-i:0,l.x=2===h?0-u:u,this.media.style.width="".concat(y,"px"),this.media.style.height="".concat(m,"px");else if(h%2==1){m=v;var b=g-v;u=-b/2/(y=g)*100,l.x=3===h?u+t/2:u-t/2,c=b/2/m*100,l.y=3===h?c+i/2:c-i/2,l.scale=d,this.media.style.width="".concat(y,"px"),this.media.style.height="".concat(m,"px")}var _=a.b.getTransformStyle(l,this.media.style.transform||this.media.style.webkitTransform);this.media.style.transform=_,this.media.style.webkitTransform=_}}}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.media&&e&&e.h){var t=this.videoPos;t.h=100*e.h||0,t.w=100*e.w||0,t.vx=100*e.x||0,t.vy=100*e.y||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(i){if("plugins"!==i){t.config[i]=e[i];var n=t.plugins[i.toLowerCase()];n&&"Function"===a.b.typeOf(n.setConfig)&&n.setConfig(e[i])}}))}},{key:"playNext",value:function(e){var t=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,Object(T.f)(this,"playnext",(function(){t.start(),t.emit(c.PLAYNEXT,e)}))}},{key:"resize",value:function(){var e=this;if(this.media){var t=this.root.getBoundingClientRect();this.sizeInfo.width=t.width,this.sizeInfo.height=t.height,this.sizeInfo.left=t.left,this.sizeInfo.top=t.top;var i=this.media,n=i.videoWidth,r=i.videoHeight,s=this.config,a=s.fitVideoSize,o=s.videoFillMode;if("fill"!==o&&"cover"!==o&&"contain"!==o||this.setAttribute("data-xgfill",o),r&&n){this._videoHeight=r,this._videoWidth=n;var l=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,u=t.width,d=t.height-l,h=parseInt(n/r*1e3,10),f=parseInt(u/d*1e3,10),p=u,v=d,g={};"auto"===a&&f>h||"fixWidth"===a?(v=u/h*1e3,this.config.fluid?g.paddingTop="".concat(100*v/p,"%"):g.height="".concat(v+l,"px")):("auto"===a&&f<h||"fixHeight"===a)&&(p=h*d/1e3,g.width="".concat(p,"px")),this.fullscreen||this.cssfullscreen||Object.keys(g).forEach((function(t){e.root.style[t]=g[t]})),("fillHeight"===o&&f<h||"fillWidth"===o&&f>h)&&this.setAttribute("data-xgfill","cover");var m={videoScale:h,vWidth:p,vHeight:v,cWidth:p,cHeight:v+l};this.resizePosition(),this.emit(c.VIDEO_RESIZE,m)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.media.updateObjectPosition?this.media.updateObjectPosition(e,t):this.media.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){C.b.logInfo("setState","state from:".concat(A.b[this.state]," to:").concat(A.b[e])),this._state=e}},{key:"_preProcessUrl",value:function(e,t){var i=this.config.preProcessUrl;return a.b.isBlob(e)||"function"!=typeof i?{url:e}:i(e,t)}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,!1===e&&this.setState(A.a.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===A.a.RUNNING||this._state===A.a.ENDED},set:function(e){e?this.setState(A.a.RUNNING):this._state>=A.a.RUNNING&&this.setState(A.a.ATTACHED)}},{key:"definitionList",get:function(){return this.config&&this.config.definition&&this.config.definition.list||[]},set:function(e){var t=this,i=this.config.definition,n=null,r=null;i.list=e,this.emit("resourceReady",e),e.forEach((function(e){var s;(null===(s=t.curDefinition)||void 0===s?void 0:s.definition)===e.definition&&(n=e),i.defaultDefinition===e.definition&&(r=e)})),!r&&e.length>0&&(r=e[0]),n?this.changeDefinition(n):r&&this.changeDefinition(r)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var t=this.media.getVideoPlaybackQuality();return e.dropped=t.droppedVideoFrames||0,e.total=t.totalVideoFrames||0,e.corrupted=t.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==O.a.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,E.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(O.a.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return"zh"===e&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return P.a}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return Object(n.f)(Object(n.g)(i.prototype),"readyState",this)}},{key:"error",get:function(){var e=Object(n.f)(Object(n.g)(i.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return Object(n.f)(Object(n.g)(i.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed,t=e.acc,i=e.t;return i?(new Date).getTime()-i+t:t}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){(e=a.b.convertDeg(e))%90==0&&e!==this.videoPos.rotate&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return M},set:function(e){M=e}},{key:"realTimeSpeed",get:function(){return D},set:function(e){D=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime||0},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration||0},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,t){return T.c.call.apply(T.c,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return T.g.call.apply(T.g,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return T.d.call.apply(T.d,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,i){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];return T.h.call.apply(T.h,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,i){for(var n=arguments.length,r=new Array(n>3?n-3:0),s=3;s<n;s++)r[s-3]=arguments[s];return T.e.call.apply(T.e,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){var i;"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),a.b.typeOf(t)===Boolean&&(this.muted=t)),null===(i=R)||void 0===i||i.setActive(this.playerId,e)}}],[{key:"debugger",get:function(){return C.b.config.debug},set:function(e){C.b.config.debug=e}},{key:"instManager",get:function(){return R},set:function(e){R=e}},{key:"getCurrentUserActivePlayerId",value:function(){var e;return null===(e=R)||void 0===e?void 0:e.getActiveId()}},{key:"setCurrentUserActive",value:function(e,t){var i;null===(i=R)||void 0===i||i.setActive(e,t)}},{key:"isHevcSupported",value:function(){return o.a.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return o.a.probeConfigSupported(e)}},{key:"install",value:function(e,t){i.plugins||(i.plugins={}),i.plugins[e]||(i.plugins[e]=t)}},{key:"use",value:function(e,t){i.plugins||(i.plugins={}),i.plugins[e]=t}}]),i}(h);Object(n.e)(j,"defaultPreset",null),Object(n.e)(j,"XgVideoProxy",null),j.instManager=L.a.getInstance()},418:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i(350),r=i(395),s=i(353),a=i(358),o=i(354),l=i(364),c=i(369),u=i(367),d=i(356),h=i(351),f=i(385),p=i(394),v=function(e){Object(n.h)(i,e);var t=Object(n.d)(i);function i(){return Object(n.b)(this,i),t.apply(this,arguments)}return Object(n.c)(i)}(r.a);Object(n.e)(v,"defaultPreset",p.a),Object(n.e)(v,"Util",h.b),Object(n.e)(v,"Sniffer",d.a),Object(n.e)(v,"Errors",u.b),Object(n.e)(v,"Events",o),Object(n.e)(v,"Plugin",s.b),Object(n.e)(v,"BasePlugin",a.a),Object(n.e)(v,"I18N",c.a),Object(n.e)(v,"STATE_CLASS",l.a),Object(n.e)(v,"InstManager",f.a)},419:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n="3.0.17"},426:function(e,t,i){},465:function(e,t,i){},466:function(e,t){if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},467:function(e,t,i){var n,r,s;r=[],void 0===(s="function"==typeof(n=function(){return function e(t,i,n){var r,s,a=window,o="application/octet-stream",l=n||o,c=t,u=!i&&!n&&c,d=document.createElement("a"),h=function(e){return String(e)},f=a.Blob||a.MozBlob||a.WebKitBlob||h,p=i||"download";if(f=f.call?f.bind(a):Blob,"true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],d.href=u,-1!==d.href.indexOf(u))){var v=new XMLHttpRequest;return v.open("GET",u,!0),v.responseType="blob",v.onload=function(t){e(t.target.response,p,o)},setTimeout((function(){v.send()}),0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424&&f!==h))return navigator.msSaveBlob?navigator.msSaveBlob(b(c),p):_(c);l=(c=b(c)).type||o}else if(/([\x80-\xff])/.test(c)){for(var g=0,m=new Uint8Array(c.length),y=m.length;g<y;++g)m[g]=c.charCodeAt(g);c=new f([m],{type:l})}function b(e){for(var t=e.split(/[:;,]/),i=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=n.length,s=0,a=new Uint8Array(r);s<r;++s)a[s]=n.charCodeAt(s);return new f([a],{type:i})}function _(e,t){if("download"in d)return d.href=e,d.setAttribute("download",p),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout((function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout((function(){a.URL.revokeObjectURL(d.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var i=document.createElement("iframe");document.body.appendChild(i),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),i.src=e,setTimeout((function(){document.body.removeChild(i)}),333)}if(r=c instanceof f?c:new f([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(a.URL)_(a.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===h)try{return _("data:"+l+";base64,"+a.btoa(r))}catch(e){return _("data:"+l+","+encodeURIComponent(r))}(s=new FileReader).onload=function(e){_(this.result)},s.readAsDataURL(r)}return!0}})?n.apply(t,r):n)||(e.exports=s)},470:function(e,t,i){},476:function(e,t,i){"use strict";i(426)},528:function(e,t,i){"use strict";function n(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function r(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(i){void 0===e[i]?e[i]=t[i]:n(t[i])&&n(e[i])&&Object.keys(t[i]).length>0&&r(e[i],t[i])}))}var s="undefined"!=typeof document?document:{},a={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};r(s,a);var o="undefined"!=typeof window?window:{};r(o,{document:a,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}}});class l{constructor(e){const t=this;for(let i=0;i<e.length;i+=1)t[i]=e[i];return t.length=e.length,this}}function c(e,t){const i=[];let n=0;if(e&&!t&&e instanceof l)return e;if(e)if("string"==typeof e){let r,a;const o=e.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){let e="div";for(0===o.indexOf("<li")&&(e="ul"),0===o.indexOf("<tr")&&(e="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(e="tr"),0===o.indexOf("<tbody")&&(e="table"),0===o.indexOf("<option")&&(e="select"),a=s.createElement(e),a.innerHTML=o,n=0;n<a.childNodes.length;n+=1)i.push(a.childNodes[n])}else for(r=t||"#"!==e[0]||e.match(/[ .<>:~]/)?(t||s).querySelectorAll(e.trim()):[s.getElementById(e.trim().split("#")[1])],n=0;n<r.length;n+=1)r[n]&&i.push(r[n])}else if(e.nodeType||e===o||e===s)i.push(e);else if(e.length>0&&e[0].nodeType)for(n=0;n<e.length;n+=1)i.push(e[n]);return new l(i)}function u(e){const t=[];for(let i=0;i<e.length;i+=1)-1===t.indexOf(e[i])&&t.push(e[i]);return t}c.fn=l.prototype,c.Class=l,c.Dom7=l;"resize scroll".split(" ");const d={addClass:function(e){if(void 0===e)return this;const t=e.split(" ");for(let e=0;e<t.length;e+=1)for(let i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.add(t[e]);return this},removeClass:function(e){const t=e.split(" ");for(let e=0;e<t.length;e+=1)for(let i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.remove(t[e]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){const t=e.split(" ");for(let e=0;e<t.length;e+=1)for(let i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.toggle(t[e]);return this},attr:function(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(let i=0;i<this.length;i+=1)if(2===arguments.length)this[i].setAttribute(e,t);else for(const t in e)this[i][t]=e[t],this[i].setAttribute(t,e[t]);return this},removeAttr:function(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){let i;if(void 0!==t){for(let n=0;n<this.length;n+=1)i=this[n],i.dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t;return this}if(i=this[0],i){if(i.dom7ElementDataStorage&&e in i.dom7ElementDataStorage)return i.dom7ElementDataStorage[e];const t=i.getAttribute("data-"+e);return t||void 0}},transform:function(e){for(let t=0;t<this.length;t+=1){const i=this[t].style;i.webkitTransform=e,i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(let t=0;t<this.length;t+=1){const i=this[t].style;i.webkitTransitionDuration=e,i.transitionDuration=e}return this},on:function(...e){let[t,i,n,r]=e;function s(e){const t=e.target;if(!t)return;const r=e.target.dom7EventData||[];if(r.indexOf(e)<0&&r.unshift(e),c(t).is(i))n.apply(t,r);else{const e=c(t).parents();for(let t=0;t<e.length;t+=1)c(e[t]).is(i)&&n.apply(e[t],r)}}function a(e){const t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),n.apply(this,t)}"function"==typeof e[1]&&([t,n,r]=e,i=void 0),r||(r=!1);const o=t.split(" ");let l;for(let e=0;e<this.length;e+=1){const t=this[e];if(i)for(l=0;l<o.length;l+=1){const e=o[l];t.dom7LiveListeners||(t.dom7LiveListeners={}),t.dom7LiveListeners[e]||(t.dom7LiveListeners[e]=[]),t.dom7LiveListeners[e].push({listener:n,proxyListener:s}),t.addEventListener(e,s,r)}else for(l=0;l<o.length;l+=1){const e=o[l];t.dom7Listeners||(t.dom7Listeners={}),t.dom7Listeners[e]||(t.dom7Listeners[e]=[]),t.dom7Listeners[e].push({listener:n,proxyListener:a}),t.addEventListener(e,a,r)}}return this},off:function(...e){let[t,i,n,r]=e;"function"==typeof e[1]&&([t,n,r]=e,i=void 0),r||(r=!1);const s=t.split(" ");for(let e=0;e<s.length;e+=1){const t=s[e];for(let e=0;e<this.length;e+=1){const s=this[e];let a;if(!i&&s.dom7Listeners?a=s.dom7Listeners[t]:i&&s.dom7LiveListeners&&(a=s.dom7LiveListeners[t]),a&&a.length)for(let e=a.length-1;e>=0;e-=1){const i=a[e];n&&i.listener===n||n&&i.listener&&i.listener.dom7proxy&&i.listener.dom7proxy===n?(s.removeEventListener(t,i.proxyListener,r),a.splice(e,1)):n||(s.removeEventListener(t,i.proxyListener,r),a.splice(e,1))}}}return this},trigger:function(...e){const t=e[0].split(" "),i=e[1];for(let n=0;n<t.length;n+=1){const r=t[n];for(let t=0;t<this.length;t+=1){const n=this[t];let a;try{a=new o.CustomEvent(r,{detail:i,bubbles:!0,cancelable:!0})}catch(e){a=s.createEvent("Event"),a.initEvent(r,!0,!0),a.detail=i}n.dom7EventData=e.filter((e,t)=>t>0),n.dispatchEvent(a),n.dom7EventData=[],delete n.dom7EventData}}return this},transitionEnd:function(e){const t=["webkitTransitionEnd","transitionend"],i=this;let n;function r(s){if(s.target===this)for(e.call(this,s),n=0;n<t.length;n+=1)i.off(t[n],r)}if(e)for(n=0;n<t.length;n+=1)i.on(t[n],r);return this},outerWidth:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){const e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){const e=this[0],t=e.getBoundingClientRect(),i=s.body,n=e.clientTop||i.clientTop||0,r=e.clientLeft||i.clientLeft||0,a=e===o?o.scrollY:e.scrollTop,l=e===o?o.scrollX:e.scrollLeft;return{top:t.top+a-n,left:t.left+l-r}}return null},css:function(e,t){let i;if(1===arguments.length){if("string"!=typeof e){for(i=0;i<this.length;i+=1)for(let t in e)this[i].style[t]=e[t];return this}if(this[0])return o.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(i=0;i<this.length;i+=1)this[i].style[e]=t;return this}return this},each:function(e){if(!e)return this;for(let t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){const t=this[0];let i,n;if(!t||void 0===e)return!1;if("string"==typeof e){if(t.matches)return t.matches(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);for(i=c(e),n=0;n<i.length;n+=1)if(i[n]===t)return!0;return!1}if(e===s)return t===s;if(e===o)return t===o;if(e.nodeType||e instanceof l){for(i=e.nodeType?[e]:e,n=0;n<i.length;n+=1)if(i[n]===t)return!0;return!1}return!1},index:function(){let e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;const t=this.length;let i;return e>t-1?new l([]):e<0?(i=t+e,new l(i<0?[]:[this[i]])):new l([this[e]])},append:function(...e){let t;for(let i=0;i<e.length;i+=1){t=e[i];for(let e=0;e<this.length;e+=1)if("string"==typeof t){const i=s.createElement("div");for(i.innerHTML=t;i.firstChild;)this[e].appendChild(i.firstChild)}else if(t instanceof l)for(let i=0;i<t.length;i+=1)this[e].appendChild(t[i]);else this[e].appendChild(t)}return this},prepend:function(e){let t,i;for(t=0;t<this.length;t+=1)if("string"==typeof e){const n=s.createElement("div");for(n.innerHTML=e,i=n.childNodes.length-1;i>=0;i-=1)this[t].insertBefore(n.childNodes[i],this[t].childNodes[0])}else if(e instanceof l)for(i=0;i<e.length;i+=1)this[t].insertBefore(e[i],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&c(this[0].nextElementSibling).is(e)?new l([this[0].nextElementSibling]):new l([]):this[0].nextElementSibling?new l([this[0].nextElementSibling]):new l([]):new l([])},nextAll:function(e){const t=[];let i=this[0];if(!i)return new l([]);for(;i.nextElementSibling;){const n=i.nextElementSibling;e?c(n).is(e)&&t.push(n):t.push(n),i=n}return new l(t)},prev:function(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&c(t.previousElementSibling).is(e)?new l([t.previousElementSibling]):new l([]):t.previousElementSibling?new l([t.previousElementSibling]):new l([])}return new l([])},prevAll:function(e){const t=[];let i=this[0];if(!i)return new l([]);for(;i.previousElementSibling;){const n=i.previousElementSibling;e?c(n).is(e)&&t.push(n):t.push(n),i=n}return new l(t)},parent:function(e){const t=[];for(let i=0;i<this.length;i+=1)null!==this[i].parentNode&&(e?c(this[i].parentNode).is(e)&&t.push(this[i].parentNode):t.push(this[i].parentNode));return c(u(t))},parents:function(e){const t=[];for(let i=0;i<this.length;i+=1){let n=this[i].parentNode;for(;n;)e?c(n).is(e)&&t.push(n):t.push(n),n=n.parentNode}return c(u(t))},closest:function(e){let t=this;return void 0===e?new l([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){const t=[];for(let i=0;i<this.length;i+=1){const n=this[i].querySelectorAll(e);for(let e=0;e<n.length;e+=1)t.push(n[e])}return new l(t)},children:function(e){const t=[];for(let i=0;i<this.length;i+=1){const n=this[i].childNodes;for(let i=0;i<n.length;i+=1)e?1===n[i].nodeType&&c(n[i]).is(e)&&t.push(n[i]):1===n[i].nodeType&&t.push(n[i])}return new l(u(t))},filter:function(e){const t=[],i=this;for(let n=0;n<i.length;n+=1)e.call(i[n],n,i[n])&&t.push(i[n]);return new l(t)},remove:function(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(...e){const t=this;let i,n;for(i=0;i<e.length;i+=1){const r=c(e[i]);for(n=0;n<r.length;n+=1)t[t.length]=r[n],t.length+=1}return t},styles:function(){return this[0]?o.getComputedStyle(this[0],null):{}}};Object.keys(d).forEach(e=>{c.fn[e]=c.fn[e]||d[e]});const h={deleteProps(e){const t=e;Object.keys(t).forEach(e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})},nextTick:(e,t=0)=>setTimeout(e,t),now:()=>Date.now(),getTranslate(e,t="x"){let i,n,r;const s=o.getComputedStyle(e,null);return o.WebKitCSSMatrix?(n=s.transform||s.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(e=>e.replace(",",".")).join(", ")),r=new o.WebKitCSSMatrix("none"===n?"":n)):(r=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=r.toString().split(",")),"x"===t&&(n=o.WebKitCSSMatrix?r.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(n=o.WebKitCSSMatrix?r.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),n||0},parseUrlQuery(e){const t={};let i,n,r,s,a=e||o.location.href;if("string"==typeof a&&a.length)for(a=a.indexOf("?")>-1?a.replace(/\S*\?/,""):"",n=a.split("&").filter(e=>""!==e),s=n.length,i=0;i<s;i+=1)r=n[i].replace(/#\S+/g,"").split("="),t[decodeURIComponent(r[0])]=void 0===r[1]?void 0:decodeURIComponent(r[1])||"";return t},isObject:e=>"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object,extend(...e){const t=Object(e[0]);for(let i=1;i<e.length;i+=1){const n=e[i];if(null!=n){const e=Object.keys(Object(n));for(let i=0,r=e.length;i<r;i+=1){const r=e[i],s=Object.getOwnPropertyDescriptor(n,r);void 0!==s&&s.enumerable&&(h.isObject(t[r])&&h.isObject(n[r])?h.extend(t[r],n[r]):!h.isObject(t[r])&&h.isObject(n[r])?(t[r]={},h.extend(t[r],n[r])):t[r]=n[r])}}}return t}},f={touch:!!("ontouchstart"in o||o.DocumentTouch&&s instanceof o.DocumentTouch),pointerEvents:!!o.PointerEvent&&"maxTouchPoints"in o.navigator&&o.navigator.maxTouchPoints>=0,observer:"MutationObserver"in o||"WebkitMutationObserver"in o,passiveListener:function(){let e=!1;try{const t=Object.defineProperty({},"passive",{get(){e=!0}});o.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:"ongesturestart"in o};class p{constructor(e={}){const t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach(e=>{t.on(e,t.params.on[e])})}on(e,t,i){const n=this;if("function"!=typeof t)return n;const r=i?"unshift":"push";return e.split(" ").forEach(e=>{n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][r](t)}),n}once(e,t,i){const n=this;if("function"!=typeof t)return n;function r(...i){n.off(e,r),r.f7proxy&&delete r.f7proxy,t.apply(n,i)}return r.f7proxy=t,n.on(e,r,i)}off(e,t){const i=this;return i.eventsListeners?(e.split(" ").forEach(e=>{void 0===t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].length&&i.eventsListeners[e].forEach((n,r)=>{(n===t||n.f7proxy&&n.f7proxy===t)&&i.eventsListeners[e].splice(r,1)})}),i):i}emit(...e){const t=this;if(!t.eventsListeners)return t;let i,n,r;"string"==typeof e[0]||Array.isArray(e[0])?(i=e[0],n=e.slice(1,e.length),r=t):(i=e[0].events,n=e[0].data,r=e[0].context||t);return(Array.isArray(i)?i:i.split(" ")).forEach(e=>{if(t.eventsListeners&&t.eventsListeners[e]){const i=[];t.eventsListeners[e].forEach(e=>{i.push(e)}),i.forEach(e=>{e.apply(r,n)})}}),t}useModulesParams(e){const t=this;t.modules&&Object.keys(t.modules).forEach(i=>{const n=t.modules[i];n.params&&h.extend(e,n.params)})}useModules(e={}){const t=this;t.modules&&Object.keys(t.modules).forEach(i=>{const n=t.modules[i],r=e[i]||{};n.instance&&Object.keys(n.instance).forEach(e=>{const i=n.instance[e];t[e]="function"==typeof i?i.bind(t):i}),n.on&&t.on&&Object.keys(n.on).forEach(e=>{t.on(e,n.on[e])}),n.create&&n.create.bind(t)(r)})}static set components(e){this.use&&this.use(e)}static installModule(e,...t){const i=this;i.prototype.modules||(i.prototype.modules={});const n=e.name||`${Object.keys(i.prototype.modules).length}_${h.now()}`;return i.prototype.modules[n]=e,e.proto&&Object.keys(e.proto).forEach(t=>{i.prototype[t]=e.proto[t]}),e.static&&Object.keys(e.static).forEach(t=>{i[t]=e.static[t]}),e.install&&e.install.apply(i,t),i}static use(e,...t){const i=this;return Array.isArray(e)?(e.forEach(e=>i.installModule(e)),i):i.installModule(e,...t)}}var v={updateSize:function(){const e=this;let t,i;const n=e.$el;t=void 0!==e.params.width?e.params.width:n[0].clientWidth,i=void 0!==e.params.height?e.params.height:n[0].clientHeight,0===t&&e.isHorizontal()||0===i&&e.isVertical()||(t=t-parseInt(n.css("padding-left"),10)-parseInt(n.css("padding-right"),10),i=i-parseInt(n.css("padding-top"),10)-parseInt(n.css("padding-bottom"),10),h.extend(e,{width:t,height:i,size:e.isHorizontal()?t:i}))},updateSlides:function(){const e=this,t=e.params,{$wrapperEl:i,size:n,rtlTranslate:r,wrongRTL:s}=e,a=e.virtual&&t.virtual.enabled,l=a?e.virtual.slides.length:e.slides.length,c=i.children("."+e.params.slideClass),u=a?e.virtual.slides.length:c.length;let d=[];const f=[],p=[];function v(e){return!t.cssMode||e!==c.length-1}let g=t.slidesOffsetBefore;"function"==typeof g&&(g=t.slidesOffsetBefore.call(e));let m=t.slidesOffsetAfter;"function"==typeof m&&(m=t.slidesOffsetAfter.call(e));const y=e.snapGrid.length,b=e.snapGrid.length;let _,k,E=t.spaceBetween,S=-g,w=0,T=0;if(void 0===n)return;"string"==typeof E&&E.indexOf("%")>=0&&(E=parseFloat(E.replace("%",""))/100*n),e.virtualSize=-E,r?c.css({marginLeft:"",marginTop:""}):c.css({marginRight:"",marginBottom:""}),t.slidesPerColumn>1&&(_=Math.floor(u/t.slidesPerColumn)===u/e.params.slidesPerColumn?u:Math.ceil(u/t.slidesPerColumn)*t.slidesPerColumn,"auto"!==t.slidesPerView&&"row"===t.slidesPerColumnFill&&(_=Math.max(_,t.slidesPerView*t.slidesPerColumn)));const x=t.slidesPerColumn,C=_/x,O=Math.floor(u/t.slidesPerColumn);for(let i=0;i<u;i+=1){k=0;const r=c.eq(i);if(t.slidesPerColumn>1){let n,s,a;if("row"===t.slidesPerColumnFill&&t.slidesPerGroup>1){const e=Math.floor(i/(t.slidesPerGroup*t.slidesPerColumn)),o=i-t.slidesPerColumn*t.slidesPerGroup*e,l=0===e?t.slidesPerGroup:Math.min(Math.ceil((u-e*x*t.slidesPerGroup)/x),t.slidesPerGroup);a=Math.floor(o/l),s=o-a*l+e*t.slidesPerGroup,n=s+a*_/x,r.css({"-webkit-box-ordinal-group":n,"-moz-box-ordinal-group":n,"-ms-flex-order":n,"-webkit-order":n,order:n})}else"column"===t.slidesPerColumnFill?(s=Math.floor(i/x),a=i-s*x,(s>O||s===O&&a===x-1)&&(a+=1,a>=x&&(a=0,s+=1))):(a=Math.floor(i/C),s=i-a*C);r.css("margin-"+(e.isHorizontal()?"top":"left"),0!==a&&t.spaceBetween&&t.spaceBetween+"px")}if("none"!==r.css("display")){if("auto"===t.slidesPerView){const i=o.getComputedStyle(r[0],null),n=r[0].style.transform,s=r[0].style.webkitTransform;if(n&&(r[0].style.transform="none"),s&&(r[0].style.webkitTransform="none"),t.roundLengths)k=e.isHorizontal()?r.outerWidth(!0):r.outerHeight(!0);else if(e.isHorizontal()){const e=parseFloat(i.getPropertyValue("width")),t=parseFloat(i.getPropertyValue("padding-left")),n=parseFloat(i.getPropertyValue("padding-right")),r=parseFloat(i.getPropertyValue("margin-left")),s=parseFloat(i.getPropertyValue("margin-right")),a=i.getPropertyValue("box-sizing");k=a&&"border-box"===a?e+r+s:e+t+n+r+s}else{const e=parseFloat(i.getPropertyValue("height")),t=parseFloat(i.getPropertyValue("padding-top")),n=parseFloat(i.getPropertyValue("padding-bottom")),r=parseFloat(i.getPropertyValue("margin-top")),s=parseFloat(i.getPropertyValue("margin-bottom")),a=i.getPropertyValue("box-sizing");k=a&&"border-box"===a?e+r+s:e+t+n+r+s}n&&(r[0].style.transform=n),s&&(r[0].style.webkitTransform=s),t.roundLengths&&(k=Math.floor(k))}else k=(n-(t.slidesPerView-1)*E)/t.slidesPerView,t.roundLengths&&(k=Math.floor(k)),c[i]&&(e.isHorizontal()?c[i].style.width=k+"px":c[i].style.height=k+"px");c[i]&&(c[i].swiperSlideSize=k),p.push(k),t.centeredSlides?(S=S+k/2+w/2+E,0===w&&0!==i&&(S=S-n/2-E),0===i&&(S=S-n/2-E),Math.abs(S)<.001&&(S=0),t.roundLengths&&(S=Math.floor(S)),T%t.slidesPerGroup==0&&d.push(S),f.push(S)):(t.roundLengths&&(S=Math.floor(S)),(T-Math.min(e.params.slidesPerGroupSkip,T))%e.params.slidesPerGroup==0&&d.push(S),f.push(S),S=S+k+E),e.virtualSize+=k+E,w=k,T+=1}}let P;if(e.virtualSize=Math.max(e.virtualSize,n)+m,r&&s&&("slide"===t.effect||"coverflow"===t.effect)&&i.css({width:e.virtualSize+t.spaceBetween+"px"}),t.setWrapperSize&&(e.isHorizontal()?i.css({width:e.virtualSize+t.spaceBetween+"px"}):i.css({height:e.virtualSize+t.spaceBetween+"px"})),t.slidesPerColumn>1&&(e.virtualSize=(k+t.spaceBetween)*_,e.virtualSize=Math.ceil(e.virtualSize/t.slidesPerColumn)-t.spaceBetween,e.isHorizontal()?i.css({width:e.virtualSize+t.spaceBetween+"px"}):i.css({height:e.virtualSize+t.spaceBetween+"px"}),t.centeredSlides)){P=[];for(let i=0;i<d.length;i+=1){let n=d[i];t.roundLengths&&(n=Math.floor(n)),d[i]<e.virtualSize+d[0]&&P.push(n)}d=P}if(!t.centeredSlides){P=[];for(let i=0;i<d.length;i+=1){let r=d[i];t.roundLengths&&(r=Math.floor(r)),d[i]<=e.virtualSize-n&&P.push(r)}d=P,Math.floor(e.virtualSize-n)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-n)}if(0===d.length&&(d=[0]),0!==t.spaceBetween&&(e.isHorizontal()?r?c.filter(v).css({marginLeft:E+"px"}):c.filter(v).css({marginRight:E+"px"}):c.filter(v).css({marginBottom:E+"px"})),t.centeredSlides&&t.centeredSlidesBounds){let e=0;p.forEach(i=>{e+=i+(t.spaceBetween?t.spaceBetween:0)}),e-=t.spaceBetween;const i=e-n;d=d.map(e=>e<0?-g:e>i?i+m:e)}if(t.centerInsufficientSlides){let e=0;if(p.forEach(i=>{e+=i+(t.spaceBetween?t.spaceBetween:0)}),e-=t.spaceBetween,e<n){const t=(n-e)/2;d.forEach((e,i)=>{d[i]=e-t}),f.forEach((e,i)=>{f[i]=e+t})}}h.extend(e,{slides:c,snapGrid:d,slidesGrid:f,slidesSizesGrid:p}),u!==l&&e.emit("slidesLengthChange"),d.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==b&&e.emit("slidesGridLengthChange"),(t.watchSlidesProgress||t.watchSlidesVisibility)&&e.updateSlidesOffset()},updateAutoHeight:function(e){const t=this,i=[];let n,r=0;if("number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed),"auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)t.visibleSlides.each((e,t)=>{i.push(t)});else for(n=0;n<Math.ceil(t.params.slidesPerView);n+=1){const e=t.activeIndex+n;if(e>t.slides.length)break;i.push(t.slides.eq(e)[0])}else i.push(t.slides.eq(t.activeIndex)[0]);for(n=0;n<i.length;n+=1)if(void 0!==i[n]){const e=i[n].offsetHeight;r=e>r?e:r}r&&t.$wrapperEl.css("height",r+"px")},updateSlidesOffset:function(){const e=this,t=e.slides;for(let i=0;i<t.length;i+=1)t[i].swiperSlideOffset=e.isHorizontal()?t[i].offsetLeft:t[i].offsetTop},updateSlidesProgress:function(e=this&&this.translate||0){const t=this,i=t.params,{slides:n,rtlTranslate:r}=t;if(0===n.length)return;void 0===n[0].swiperSlideOffset&&t.updateSlidesOffset();let s=-e;r&&(s=e),n.removeClass(i.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let e=0;e<n.length;e+=1){const a=n[e],o=(s+(i.centeredSlides?t.minTranslate():0)-a.swiperSlideOffset)/(a.swiperSlideSize+i.spaceBetween);if(i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight){const r=-(s-a.swiperSlideOffset),o=r+t.slidesSizesGrid[e];(r>=0&&r<t.size-1||o>1&&o<=t.size||r<=0&&o>=t.size)&&(t.visibleSlides.push(a),t.visibleSlidesIndexes.push(e),n.eq(e).addClass(i.slideVisibleClass))}a.progress=r?-o:o}t.visibleSlides=c(t.visibleSlides)},updateProgress:function(e){const t=this;if(void 0===e){const i=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*i||0}const i=t.params,n=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:s,isEnd:a}=t;const o=s,l=a;0===n?(r=0,s=!0,a=!0):(r=(e-t.minTranslate())/n,s=r<=0,a=r>=1),h.extend(t,{progress:r,isBeginning:s,isEnd:a}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),s&&!o&&t.emit("reachBeginning toEdge"),a&&!l&&t.emit("reachEnd toEdge"),(o&&!s||l&&!a)&&t.emit("fromEdge"),t.emit("progress",r)},updateSlidesClasses:function(){const e=this,{slides:t,params:i,$wrapperEl:n,activeIndex:r,realIndex:s}=e,a=e.virtual&&i.virtual.enabled;let o;t.removeClass(`${i.slideActiveClass} ${i.slideNextClass} ${i.slidePrevClass} ${i.slideDuplicateActiveClass} ${i.slideDuplicateNextClass} ${i.slideDuplicatePrevClass}`),o=a?e.$wrapperEl.find(`.${i.slideClass}[data-swiper-slide-index="${r}"]`):t.eq(r),o.addClass(i.slideActiveClass),i.loop&&(o.hasClass(i.slideDuplicateClass)?n.children(`.${i.slideClass}:not(.${i.slideDuplicateClass})[data-swiper-slide-index="${s}"]`).addClass(i.slideDuplicateActiveClass):n.children(`.${i.slideClass}.${i.slideDuplicateClass}[data-swiper-slide-index="${s}"]`).addClass(i.slideDuplicateActiveClass));let l=o.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=t.eq(0),l.addClass(i.slideNextClass));let c=o.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===c.length&&(c=t.eq(-1),c.addClass(i.slidePrevClass)),i.loop&&(l.hasClass(i.slideDuplicateClass)?n.children(`.${i.slideClass}:not(.${i.slideDuplicateClass})[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(i.slideDuplicateNextClass):n.children(`.${i.slideClass}.${i.slideDuplicateClass}[data-swiper-slide-index="${l.attr("data-swiper-slide-index")}"]`).addClass(i.slideDuplicateNextClass),c.hasClass(i.slideDuplicateClass)?n.children(`.${i.slideClass}:not(.${i.slideDuplicateClass})[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(i.slideDuplicatePrevClass):n.children(`.${i.slideClass}.${i.slideDuplicateClass}[data-swiper-slide-index="${c.attr("data-swiper-slide-index")}"]`).addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:n,snapGrid:r,params:s,activeIndex:a,realIndex:o,snapIndex:l}=t;let c,u=e;if(void 0===u){for(let e=0;e<n.length;e+=1)void 0!==n[e+1]?i>=n[e]&&i<n[e+1]-(n[e+1]-n[e])/2?u=e:i>=n[e]&&i<n[e+1]&&(u=e+1):i>=n[e]&&(u=e);s.normalizeSlideIndex&&(u<0||void 0===u)&&(u=0)}if(r.indexOf(i)>=0)c=r.indexOf(i);else{const e=Math.min(s.slidesPerGroupSkip,u);c=e+Math.floor((u-e)/s.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),u===a)return void(c!==l&&(t.snapIndex=c,t.emit("snapIndexChange")));const d=parseInt(t.slides.eq(u).attr("data-swiper-slide-index")||u,10);h.extend(t,{snapIndex:c,realIndex:d,previousIndex:a,activeIndex:u}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),o!==d&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")},updateClickedSlide:function(e){const t=this,i=t.params,n=c(e.target).closest("."+i.slideClass)[0];let r=!1;if(n)for(let e=0;e<t.slides.length;e+=1)t.slides[e]===n&&(r=!0);if(!n||!r)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=n,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(c(n).attr("data-swiper-slide-index"),10):t.clickedIndex=c(n).index(),i.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};var g={getTranslate:function(e=(this.isHorizontal()?"x":"y")){const{params:t,rtlTranslate:i,translate:n,$wrapperEl:r}=this;if(t.virtualTranslate)return i?-n:n;if(t.cssMode)return n;let s=h.getTranslate(r[0],e);return i&&(s=-s),s||0},setTranslate:function(e,t){const i=this,{rtlTranslate:n,params:r,$wrapperEl:s,wrapperEl:a,progress:o}=i;let l,c=0,u=0;i.isHorizontal()?c=n?-e:e:u=e,r.roundLengths&&(c=Math.floor(c),u=Math.floor(u)),r.cssMode?a[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-c:-u:r.virtualTranslate||s.transform(`translate3d(${c}px, ${u}px, 0px)`),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?c:u;const d=i.maxTranslate()-i.minTranslate();l=0===d?0:(e-i.minTranslate())/d,l!==o&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e=0,t=this.params.speed,i=!0,n=!0,r){const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(u=n&&e>l?l:n&&e<c?c:e,s.updateProgress(u),a.cssMode){const e=s.isHorizontal();return 0===t?o[e?"scrollLeft":"scrollTop"]=-u:o.scrollTo?o.scrollTo({[e?"left":"top"]:-u,behavior:"smooth"}):o[e?"scrollLeft":"scrollTop"]=-u,!0}return 0===t?(s.setTransition(0),s.setTranslate(u),i&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(u),i&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,i&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}};var m={setTransition:function(e,t){const i=this;i.params.cssMode||i.$wrapperEl.transition(e),i.emit("setTransition",e,t)},transitionStart:function(e=!0,t){const i=this,{activeIndex:n,params:r,previousIndex:s}=i;if(r.cssMode)return;r.autoHeight&&i.updateAutoHeight();let a=t;if(a||(a=n>s?"next":n<s?"prev":"reset"),i.emit("transitionStart"),e&&n!==s){if("reset"===a)return void i.emit("slideResetTransitionStart");i.emit("slideChangeTransitionStart"),"next"===a?i.emit("slideNextTransitionStart"):i.emit("slidePrevTransitionStart")}},transitionEnd:function(e=!0,t){const i=this,{activeIndex:n,previousIndex:r,params:s}=i;if(i.animating=!1,s.cssMode)return;i.setTransition(0);let a=t;if(a||(a=n>r?"next":n<r?"prev":"reset"),i.emit("transitionEnd"),e&&n!==r){if("reset"===a)return void i.emit("slideResetTransitionEnd");i.emit("slideChangeTransitionEnd"),"next"===a?i.emit("slideNextTransitionEnd"):i.emit("slidePrevTransitionEnd")}}};var y={slideTo:function(e=0,t=this.params.speed,i=!0,n){const r=this;let s=e;s<0&&(s=0);const{params:a,snapGrid:o,slidesGrid:l,previousIndex:c,activeIndex:u,rtlTranslate:d,wrapperEl:h}=r;if(r.animating&&a.preventInteractionOnTransition)return!1;const f=Math.min(r.params.slidesPerGroupSkip,s);let p=f+Math.floor((s-f)/r.params.slidesPerGroup);p>=o.length&&(p=o.length-1),(u||a.initialSlide||0)===(c||0)&&i&&r.emit("beforeSlideChangeStart");const v=-o[p];if(r.updateProgress(v),a.normalizeSlideIndex)for(let e=0;e<l.length;e+=1)-Math.floor(100*v)>=Math.floor(100*l[e])&&(s=e);if(r.initialized&&s!==u){if(!r.allowSlideNext&&v<r.translate&&v<r.minTranslate())return!1;if(!r.allowSlidePrev&&v>r.translate&&v>r.maxTranslate()&&(u||0)!==s)return!1}let g;if(g=s>u?"next":s<u?"prev":"reset",d&&-v===r.translate||!d&&v===r.translate)return r.updateActiveIndex(s),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==a.effect&&r.setTranslate(v),"reset"!==g&&(r.transitionStart(i,g),r.transitionEnd(i,g)),!1;if(a.cssMode){const e=r.isHorizontal();let i=-v;return d&&(i=h.scrollWidth-h.offsetWidth-i),0===t?h[e?"scrollLeft":"scrollTop"]=i:h.scrollTo?h.scrollTo({[e?"left":"top"]:i,behavior:"smooth"}):h[e?"scrollLeft":"scrollTop"]=i,!0}return 0===t?(r.setTransition(0),r.setTranslate(v),r.updateActiveIndex(s),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,n),r.transitionStart(i,g),r.transitionEnd(i,g)):(r.setTransition(t),r.setTranslate(v),r.updateActiveIndex(s),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,n),r.transitionStart(i,g),r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(i,g))}),r.$wrapperEl[0].addEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e=0,t=this.params.speed,i=!0,n){const r=this;let s=e;return r.params.loop&&(s+=r.loopedSlides),r.slideTo(s,t,i,n)},slideNext:function(e=this.params.speed,t=!0,i){const n=this,{params:r,animating:s}=n,a=n.activeIndex<r.slidesPerGroupSkip?1:r.slidesPerGroup;if(r.loop){if(s)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}return n.slideTo(n.activeIndex+a,e,t,i)},slidePrev:function(e=this.params.speed,t=!0,i){const n=this,{params:r,animating:s,snapGrid:a,slidesGrid:o,rtlTranslate:l}=n;if(r.loop){if(s)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const u=c(l?n.translate:-n.translate),d=a.map(e=>c(e));o.map(e=>c(e)),a[d.indexOf(u)];let h,f=a[d.indexOf(u)-1];return void 0===f&&r.cssMode&&a.forEach(e=>{!f&&u>=e&&(f=e)}),void 0!==f&&(h=o.indexOf(f),h<0&&(h=n.activeIndex-1)),n.slideTo(h,e,t,i)},slideReset:function(e=this.params.speed,t=!0,i){return this.slideTo(this.activeIndex,e,t,i)},slideToClosest:function(e=this.params.speed,t=!0,i,n=.5){const r=this;let s=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const e=r.snapGrid[o];l-e>(r.snapGrid[o+1]-e)*n&&(s+=r.params.slidesPerGroup)}else{const e=r.snapGrid[o-1];l-e<=(r.snapGrid[o]-e)*n&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,e,t,i)},slideToClickedSlide:function(){const e=this,{params:t,$wrapperEl:i}=e,n="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let r,s=e.clickedIndex;if(t.loop){if(e.animating)return;r=parseInt(c(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?s<e.loopedSlides-n/2||s>e.slides.length-e.loopedSlides+n/2?(e.loopFix(),s=i.children(`.${t.slideClass}[data-swiper-slide-index="${r}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),h.nextTick(()=>{e.slideTo(s)})):e.slideTo(s):s>e.slides.length-n?(e.loopFix(),s=i.children(`.${t.slideClass}[data-swiper-slide-index="${r}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),h.nextTick(()=>{e.slideTo(s)})):e.slideTo(s)}else e.slideTo(s)}};var b={loopCreate:function(){const e=this,{params:t,$wrapperEl:i}=e;i.children(`.${t.slideClass}.${t.slideDuplicateClass}`).remove();let n=i.children("."+t.slideClass);if(t.loopFillGroupWithBlank){const e=t.slidesPerGroup-n.length%t.slidesPerGroup;if(e!==t.slidesPerGroup){for(let n=0;n<e;n+=1){const e=c(s.createElement("div")).addClass(`${t.slideClass} ${t.slideBlankClass}`);i.append(e)}n=i.children("."+t.slideClass)}}"auto"!==t.slidesPerView||t.loopedSlides||(t.loopedSlides=n.length),e.loopedSlides=Math.ceil(parseFloat(t.loopedSlides||t.slidesPerView,10)),e.loopedSlides+=t.loopAdditionalSlides,e.loopedSlides>n.length&&(e.loopedSlides=n.length);const r=[],a=[];n.each((t,i)=>{const s=c(i);t<e.loopedSlides&&a.push(i),t<n.length&&t>=n.length-e.loopedSlides&&r.push(i),s.attr("data-swiper-slide-index",t)});for(let e=0;e<a.length;e+=1)i.append(c(a[e].cloneNode(!0)).addClass(t.slideDuplicateClass));for(let e=r.length-1;e>=0;e-=1)i.prepend(c(r[e].cloneNode(!0)).addClass(t.slideDuplicateClass))},loopFix:function(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:i,loopedSlides:n,allowSlidePrev:r,allowSlideNext:s,snapGrid:a,rtlTranslate:o}=e;let l;e.allowSlidePrev=!0,e.allowSlideNext=!0;const c=-a[t]-e.getTranslate();if(t<n){l=i.length-3*n+t,l+=n;e.slideTo(l,0,!1,!0)&&0!==c&&e.setTranslate((o?-e.translate:e.translate)-c)}else if(t>=i.length-n){l=-i.length+t+n,l+=n;e.slideTo(l,0,!1,!0)&&0!==c&&e.setTranslate((o?-e.translate:e.translate)-c)}e.allowSlidePrev=r,e.allowSlideNext=s,e.emit("loopFix")},loopDestroy:function(){const{$wrapperEl:e,params:t,slides:i}=this;e.children(`.${t.slideClass}.${t.slideDuplicateClass},.${t.slideClass}.${t.slideBlankClass}`).remove(),i.removeAttr("data-swiper-slide-index")}};var _={setGrabCursor:function(e){if(f.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||this.params.cssMode)return;const t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"},unsetGrabCursor:function(){f.touch||this.params.watchOverflow&&this.isLocked||this.params.cssMode||(this.el.style.cursor="")}};var k={appendSlide:function(e){const t=this,{$wrapperEl:i,params:n}=t;if(n.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(let t=0;t<e.length;t+=1)e[t]&&i.append(e[t]);else i.append(e);n.loop&&t.loopCreate(),n.observer&&f.observer||t.update()},prependSlide:function(e){const t=this,{params:i,$wrapperEl:n,activeIndex:r}=t;i.loop&&t.loopDestroy();let s=r+1;if("object"==typeof e&&"length"in e){for(let t=0;t<e.length;t+=1)e[t]&&n.prepend(e[t]);s=r+e.length}else n.prepend(e);i.loop&&t.loopCreate(),i.observer&&f.observer||t.update(),t.slideTo(s,0,!1)},addSlide:function(e,t){const i=this,{$wrapperEl:n,params:r,activeIndex:s}=i;let a=s;r.loop&&(a-=i.loopedSlides,i.loopDestroy(),i.slides=n.children("."+r.slideClass));const o=i.slides.length;if(e<=0)return void i.prependSlide(t);if(e>=o)return void i.appendSlide(t);let l=a>e?a+1:a;const c=[];for(let t=o-1;t>=e;t-=1){const e=i.slides.eq(t);e.remove(),c.unshift(e)}if("object"==typeof t&&"length"in t){for(let e=0;e<t.length;e+=1)t[e]&&n.append(t[e]);l=a>e?a+t.length:a}else n.append(t);for(let e=0;e<c.length;e+=1)n.append(c[e]);r.loop&&i.loopCreate(),r.observer&&f.observer||i.update(),r.loop?i.slideTo(l+i.loopedSlides,0,!1):i.slideTo(l,0,!1)},removeSlide:function(e){const t=this,{params:i,$wrapperEl:n,activeIndex:r}=t;let s=r;i.loop&&(s-=t.loopedSlides,t.loopDestroy(),t.slides=n.children("."+i.slideClass));let a,o=s;if("object"==typeof e&&"length"in e){for(let i=0;i<e.length;i+=1)a=e[i],t.slides[a]&&t.slides.eq(a).remove(),a<o&&(o-=1);o=Math.max(o,0)}else a=e,t.slides[a]&&t.slides.eq(a).remove(),a<o&&(o-=1),o=Math.max(o,0);i.loop&&t.loopCreate(),i.observer&&f.observer||t.update(),i.loop?t.slideTo(o+t.loopedSlides,0,!1):t.slideTo(o,0,!1)},removeAllSlides:function(){const e=this,t=[];for(let i=0;i<e.slides.length;i+=1)t.push(i);e.removeSlide(t)}};const E=function(){const e=o.navigator.platform,t=o.navigator.userAgent,i={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!o.cordova&&!o.phonegap),phonegap:!(!o.cordova&&!o.phonegap),electron:!1},n=o.screen.width,r=o.screen.height,s=t.match(/(Android);?[\s\/]+([\d.]+)?/);let a=t.match(/(iPad).*OS\s([\d_]+)/);const l=t.match(/(iPod)(.*OS\s([\d_]+))?/),c=!a&&t.match(/(iPhone\sOS|iOS)\s([\d_]+)/),u=t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0,d=t.indexOf("Edge/")>=0,h=t.indexOf("Gecko/")>=0&&t.indexOf("Firefox/")>=0,p="Win32"===e,v=t.toLowerCase().indexOf("electron")>=0;let g="MacIntel"===e;return!a&&g&&f.touch&&(1024===n&&1366===r||834===n&&1194===r||834===n&&1112===r||768===n&&1024===r)&&(a=t.match(/(Version)\/([\d.]+)/),g=!1),i.ie=u,i.edge=d,i.firefox=h,s&&!p&&(i.os="android",i.osVersion=s[2],i.android=!0,i.androidChrome=t.toLowerCase().indexOf("chrome")>=0),(a||c||l)&&(i.os="ios",i.ios=!0),c&&!l&&(i.osVersion=c[2].replace(/_/g,"."),i.iphone=!0),a&&(i.osVersion=a[2].replace(/_/g,"."),i.ipad=!0),l&&(i.osVersion=l[3]?l[3].replace(/_/g,"."):null,i.ipod=!0),i.ios&&i.osVersion&&t.indexOf("Version/")>=0&&"10"===i.osVersion.split(".")[0]&&(i.osVersion=t.toLowerCase().split("version/")[1].split(" ")[0]),i.webView=!(!(c||a||l)||!t.match(/.*AppleWebKit(?!.*Safari)/i)&&!o.navigator.standalone)||o.matchMedia&&o.matchMedia("(display-mode: standalone)").matches,i.webview=i.webView,i.standalone=i.webView,i.desktop=!(i.ios||i.android)||v,i.desktop&&(i.electron=v,i.macos=g,i.windows=p,i.macos&&(i.os="macos"),i.windows&&(i.os="windows")),i.pixelRatio=o.devicePixelRatio||1,i}();function S(e){const t=this,i=t.touchEventsData,{params:n,touches:r}=t;if(t.animating&&n.preventInteractionOnTransition)return;let a=e;a.originalEvent&&(a=a.originalEvent);const l=c(a.target);if("wrapper"===n.touchEventsTarget&&!l.closest(t.wrapperEl).length)return;if(i.isTouchEvent="touchstart"===a.type,!i.isTouchEvent&&"which"in a&&3===a.which)return;if(!i.isTouchEvent&&"button"in a&&a.button>0)return;if(i.isTouched&&i.isMoved)return;if(n.noSwiping&&l.closest(n.noSwipingSelector?n.noSwipingSelector:"."+n.noSwipingClass)[0])return void(t.allowClick=!0);if(n.swipeHandler&&!l.closest(n.swipeHandler)[0])return;r.currentX="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,r.currentY="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY;const u=r.currentX,d=r.currentY,f=n.edgeSwipeDetection||n.iOSEdgeSwipeDetection,p=n.edgeSwipeThreshold||n.iOSEdgeSwipeThreshold;if(!f||!(u<=p||u>=o.screen.width-p)){if(h.extend(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),r.startX=u,r.startY=d,i.touchStartTime=h.now(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,n.threshold>0&&(i.allowThresholdMove=!1),"touchstart"!==a.type){let e=!0;l.is(i.formElements)&&(e=!1),s.activeElement&&c(s.activeElement).is(i.formElements)&&s.activeElement!==l[0]&&s.activeElement.blur();const r=e&&t.allowTouchMove&&n.touchStartPreventDefault;(n.touchStartForcePreventDefault||r)&&a.preventDefault()}t.emit("touchStart",a)}}function w(e){const t=this,i=t.touchEventsData,{params:n,touches:r,rtlTranslate:a}=t;let o=e;if(o.originalEvent&&(o=o.originalEvent),!i.isTouched)return void(i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",o));if(i.isTouchEvent&&"touchmove"!==o.type)return;const l="touchmove"===o.type&&o.targetTouches&&(o.targetTouches[0]||o.changedTouches[0]),u="touchmove"===o.type?l.pageX:o.pageX,d="touchmove"===o.type?l.pageY:o.pageY;if(o.preventedByNestedSwiper)return r.startX=u,void(r.startY=d);if(!t.allowTouchMove)return t.allowClick=!1,void(i.isTouched&&(h.extend(r,{startX:u,startY:d,currentX:u,currentY:d}),i.touchStartTime=h.now()));if(i.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop)if(t.isVertical()){if(d<r.startY&&t.translate<=t.maxTranslate()||d>r.startY&&t.translate>=t.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(u<r.startX&&t.translate<=t.maxTranslate()||u>r.startX&&t.translate>=t.minTranslate())return;if(i.isTouchEvent&&s.activeElement&&o.target===s.activeElement&&c(o.target).is(i.formElements))return i.isMoved=!0,void(t.allowClick=!1);if(i.allowTouchCallbacks&&t.emit("touchMove",o),o.targetTouches&&o.targetTouches.length>1)return;r.currentX=u,r.currentY=d;const f=r.currentX-r.startX,p=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(f**2+p**2)<t.params.threshold)return;if(void 0===i.isScrolling){let e;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:f*f+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(f))/Math.PI,i.isScrolling=t.isHorizontal()?e>n.touchAngle:90-e>n.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",o),void 0===i.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(i.startMoving=!0)),i.isScrolling)return void(i.isTouched=!1);if(!i.startMoving)return;t.allowClick=!1,!n.cssMode&&o.cancelable&&o.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&o.stopPropagation(),i.isMoved||(n.loop&&t.loopFix(),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating&&t.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!n.grabCursor||!0!==t.allowSlideNext&&!0!==t.allowSlidePrev||t.setGrabCursor(!0),t.emit("sliderFirstMove",o)),t.emit("sliderMove",o),i.isMoved=!0;let v=t.isHorizontal()?f:p;r.diff=v,v*=n.touchRatio,a&&(v=-v),t.swipeDirection=v>0?"prev":"next",i.currentTranslate=v+i.startTranslate;let g=!0,m=n.resistanceRatio;if(n.touchReleaseOnEdges&&(m=0),v>0&&i.currentTranslate>t.minTranslate()?(g=!1,n.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+v)**m)):v<0&&i.currentTranslate<t.maxTranslate()&&(g=!1,n.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-v)**m)),g&&(o.preventedByNestedSwiper=!0),!t.allowSlideNext&&"next"===t.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&"prev"===t.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.threshold>0){if(!(Math.abs(v)>n.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,void(r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}n.followFinger&&!n.cssMode&&((n.freeMode||n.watchSlidesProgress||n.watchSlidesVisibility)&&(t.updateActiveIndex(),t.updateSlidesClasses()),n.freeMode&&(0===i.velocities.length&&i.velocities.push({position:r[t.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:r[t.isHorizontal()?"currentX":"currentY"],time:h.now()})),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function T(e){const t=this,i=t.touchEventsData,{params:n,touches:r,rtlTranslate:s,$wrapperEl:a,slidesGrid:o,snapGrid:l}=t;let c=e;if(c.originalEvent&&(c=c.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",c),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&n.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);n.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const u=h.now(),d=u-i.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(c),t.emit("tap click",c),d<300&&u-i.lastClickTime<300&&t.emit("doubleTap doubleClick",c)),i.lastClickTime=h.now(),h.nextTick(()=>{t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||0===r.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);let f;if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,f=n.followFinger?s?t.translate:-t.translate:-i.currentTranslate,n.cssMode)return;if(n.freeMode){if(f<-t.minTranslate())return void t.slideTo(t.activeIndex);if(f>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(n.freeModeMomentum){if(i.velocities.length>1){const e=i.velocities.pop(),r=i.velocities.pop(),s=e.position-r.position,a=e.time-r.time;t.velocity=s/a,t.velocity/=2,Math.abs(t.velocity)<n.freeModeMinimumVelocity&&(t.velocity=0),(a>150||h.now()-e.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=n.freeModeMomentumVelocityRatio,i.velocities.length=0;let e=1e3*n.freeModeMomentumRatio;const r=t.velocity*e;let o=t.translate+r;s&&(o=-o);let c,u=!1;const d=20*Math.abs(t.velocity)*n.freeModeMomentumBounceRatio;let f;if(o<t.maxTranslate())n.freeModeMomentumBounce?(o+t.maxTranslate()<-d&&(o=t.maxTranslate()-d),c=t.maxTranslate(),u=!0,i.allowMomentumBounce=!0):o=t.maxTranslate(),n.loop&&n.centeredSlides&&(f=!0);else if(o>t.minTranslate())n.freeModeMomentumBounce?(o-t.minTranslate()>d&&(o=t.minTranslate()+d),c=t.minTranslate(),u=!0,i.allowMomentumBounce=!0):o=t.minTranslate(),n.loop&&n.centeredSlides&&(f=!0);else if(n.freeModeSticky){let e;for(let t=0;t<l.length;t+=1)if(l[t]>-o){e=t;break}o=Math.abs(l[e]-o)<Math.abs(l[e-1]-o)||"next"===t.swipeDirection?l[e]:l[e-1],o=-o}if(f&&t.once("transitionEnd",()=>{t.loopFix()}),0!==t.velocity){if(e=s?Math.abs((-o-t.translate)/t.velocity):Math.abs((o-t.translate)/t.velocity),n.freeModeSticky){const i=Math.abs((s?-o:o)-t.translate),r=t.slidesSizesGrid[t.activeIndex];e=i<r?n.speed:i<2*r?1.5*n.speed:2.5*n.speed}}else if(n.freeModeSticky)return void t.slideToClosest();n.freeModeMomentumBounce&&u?(t.updateProgress(c),t.setTransition(e),t.setTranslate(o),t.transitionStart(!0,t.swipeDirection),t.animating=!0,a.transitionEnd(()=>{t&&!t.destroyed&&i.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(n.speed),setTimeout(()=>{t.setTranslate(c),a.transitionEnd(()=>{t&&!t.destroyed&&t.transitionEnd()})},0))})):t.velocity?(t.updateProgress(o),t.setTransition(e),t.setTranslate(o),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,a.transitionEnd(()=>{t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(o),t.updateActiveIndex(),t.updateSlidesClasses()}else if(n.freeModeSticky)return void t.slideToClosest();return void((!n.freeModeMomentum||d>=n.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses()))}let p=0,v=t.slidesSizesGrid[0];for(let e=0;e<o.length;e+=e<n.slidesPerGroupSkip?1:n.slidesPerGroup){const t=e<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;void 0!==o[e+t]?f>=o[e]&&f<o[e+t]&&(p=e,v=o[e+t]-o[e]):f>=o[e]&&(p=e,v=o[o.length-1]-o[o.length-2])}const g=(f-o[p])/v,m=p<n.slidesPerGroupSkip-1?1:n.slidesPerGroup;if(d>n.longSwipesMs){if(!n.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(g>=n.longSwipesRatio?t.slideTo(p+m):t.slideTo(p)),"prev"===t.swipeDirection&&(g>1-n.longSwipesRatio?t.slideTo(p+m):t.slideTo(p))}else{if(!n.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(c.target===t.navigation.nextEl||c.target===t.navigation.prevEl)?c.target===t.navigation.nextEl?t.slideTo(p+m):t.slideTo(p):("next"===t.swipeDirection&&t.slideTo(p+m),"prev"===t.swipeDirection&&t.slideTo(p))}}function x(){const e=this,{params:t,el:i}=e;if(i&&0===i.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:n,allowSlidePrev:r,snapGrid:s}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=r,e.allowSlideNext=n,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function C(e){const t=this;t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function O(){const e=this,{wrapperEl:t,rtlTranslate:i}=e;let n;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=i?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const r=e.maxTranslate()-e.minTranslate();n=0===r?0:(e.translate-e.minTranslate())/r,n!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let P=!1;function A(){}var L={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0};const I={update:v,translate:g,transition:m,slide:y,loop:b,grabCursor:_,manipulation:k,events:{attachEvents:function(){const e=this,{params:t,touchEvents:i,el:n,wrapperEl:r}=e;e.onTouchStart=S.bind(e),e.onTouchMove=w.bind(e),e.onTouchEnd=T.bind(e),t.cssMode&&(e.onScroll=O.bind(e)),e.onClick=C.bind(e);const a=!!t.nested;if(!f.touch&&f.pointerEvents)n.addEventListener(i.start,e.onTouchStart,!1),s.addEventListener(i.move,e.onTouchMove,a),s.addEventListener(i.end,e.onTouchEnd,!1);else{if(f.touch){const r=!("touchstart"!==i.start||!f.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};n.addEventListener(i.start,e.onTouchStart,r),n.addEventListener(i.move,e.onTouchMove,f.passiveListener?{passive:!1,capture:a}:a),n.addEventListener(i.end,e.onTouchEnd,r),i.cancel&&n.addEventListener(i.cancel,e.onTouchEnd,r),P||(s.addEventListener("touchstart",A),P=!0)}(t.simulateTouch&&!E.ios&&!E.android||t.simulateTouch&&!f.touch&&E.ios)&&(n.addEventListener("mousedown",e.onTouchStart,!1),s.addEventListener("mousemove",e.onTouchMove,a),s.addEventListener("mouseup",e.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&n.addEventListener("click",e.onClick,!0),t.cssMode&&r.addEventListener("scroll",e.onScroll),t.updateOnWindowResize?e.on(E.ios||E.android?"resize orientationchange observerUpdate":"resize observerUpdate",x,!0):e.on("observerUpdate",x,!0)},detachEvents:function(){const e=this,{params:t,touchEvents:i,el:n,wrapperEl:r}=e,a=!!t.nested;if(!f.touch&&f.pointerEvents)n.removeEventListener(i.start,e.onTouchStart,!1),s.removeEventListener(i.move,e.onTouchMove,a),s.removeEventListener(i.end,e.onTouchEnd,!1);else{if(f.touch){const r=!("onTouchStart"!==i.start||!f.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};n.removeEventListener(i.start,e.onTouchStart,r),n.removeEventListener(i.move,e.onTouchMove,a),n.removeEventListener(i.end,e.onTouchEnd,r),i.cancel&&n.removeEventListener(i.cancel,e.onTouchEnd,r)}(t.simulateTouch&&!E.ios&&!E.android||t.simulateTouch&&!f.touch&&E.ios)&&(n.removeEventListener("mousedown",e.onTouchStart,!1),s.removeEventListener("mousemove",e.onTouchMove,a),s.removeEventListener("mouseup",e.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&n.removeEventListener("click",e.onClick,!0),t.cssMode&&r.removeEventListener("scroll",e.onScroll),e.off(E.ios||E.android?"resize orientationchange observerUpdate":"resize observerUpdate",x)}},breakpoints:{setBreakpoint:function(){const e=this,{activeIndex:t,initialized:i,loopedSlides:n=0,params:r,$el:s}=e,a=r.breakpoints;if(!a||a&&0===Object.keys(a).length)return;const o=e.getBreakpoint(a);if(o&&e.currentBreakpoint!==o){const l=o in a?a[o]:void 0;l&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach(e=>{const t=l[e];void 0!==t&&(l[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")});const c=l||e.originalParams,u=r.slidesPerColumn>1,d=c.slidesPerColumn>1;u&&!d?s.removeClass(`${r.containerModifierClass}multirow ${r.containerModifierClass}multirow-column`):!u&&d&&(s.addClass(r.containerModifierClass+"multirow"),"column"===c.slidesPerColumnFill&&s.addClass(r.containerModifierClass+"multirow-column"));const f=c.direction&&c.direction!==r.direction,p=r.loop&&(c.slidesPerView!==r.slidesPerView||f);f&&i&&e.changeDirection(),h.extend(e.params,c),h.extend(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),e.currentBreakpoint=o,p&&i&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-n+e.loopedSlides,0,!1)),e.emit("breakpoint",c)}},getBreakpoint:function(e){if(!e)return;let t=!1;const i=Object.keys(e).map(e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:o.innerHeight*t,point:e}}return{value:e,point:e}});i.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let e=0;e<i.length;e+=1){const{point:n,value:r}=i[e];r<=o.innerWidth&&(t=n)}return t||"max"}},checkOverflow:{checkOverflow:function(){const e=this,t=e.params,i=e.isLocked,n=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&n?e.isLocked=n<=e.size:e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,i!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),i&&i!==e.isLocked&&(e.isEnd=!1,e.navigation&&e.navigation.update())}},classes:{addClasses:function(){const{classNames:e,params:t,rtl:i,$el:n}=this,r=[];r.push("initialized"),r.push(t.direction),t.freeMode&&r.push("free-mode"),t.autoHeight&&r.push("autoheight"),i&&r.push("rtl"),t.slidesPerColumn>1&&(r.push("multirow"),"column"===t.slidesPerColumnFill&&r.push("multirow-column")),E.android&&r.push("android"),E.ios&&r.push("ios"),t.cssMode&&r.push("css-mode"),r.forEach(i=>{e.push(t.containerModifierClass+i)}),n.addClass(e.join(" "))},removeClasses:function(){const{$el:e,classNames:t}=this;e.removeClass(t.join(" "))}},images:{loadImage:function(e,t,i,n,r,s){let a;function l(){s&&s()}c(e).parent("picture")[0]||e.complete&&r?l():t?(a=new o.Image,a.onload=l,a.onerror=l,n&&(a.sizes=n),i&&(a.srcset=i),t&&(a.src=t)):l()},preloadImages:function(){const e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(let i=0;i<e.imagesToLoad.length;i+=1){const n=e.imagesToLoad[i];e.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,t)}}}},D={};class M extends p{constructor(...e){let t,i;1===e.length&&e[0].constructor&&e[0].constructor===Object?i=e[0]:[t,i]=e,i||(i={}),i=h.extend({},i),t&&!i.el&&(i.el=t),super(i),Object.keys(I).forEach(e=>{Object.keys(I[e]).forEach(t=>{M.prototype[t]||(M.prototype[t]=I[e][t])})});const n=this;void 0===n.modules&&(n.modules={}),Object.keys(n.modules).forEach(e=>{const t=n.modules[e];if(t.params){const e=Object.keys(t.params)[0],n=t.params[e];if("object"!=typeof n||null===n)return;if(!(e in i)||!("enabled"in n))return;!0===i[e]&&(i[e]={enabled:!0}),"object"!=typeof i[e]||"enabled"in i[e]||(i[e].enabled=!0),i[e]||(i[e]={enabled:!1})}});const r=h.extend({},L);n.useModulesParams(r),n.params=h.extend({},r,D,i),n.originalParams=h.extend({},n.params),n.passedParams=h.extend({},i),n.$=c;const s=c(n.params.el);if(t=s[0],!t)return;if(s.length>1){const e=[];return s.each((t,n)=>{const r=h.extend({},i,{el:n});e.push(new M(r))}),e}let a;return t.swiper=n,s.data("swiper",n),t&&t.shadowRoot&&t.shadowRoot.querySelector?(a=c(t.shadowRoot.querySelector("."+n.params.wrapperClass)),a.children=e=>s.children(e)):a=s.children("."+n.params.wrapperClass),h.extend(n,{$el:s,el:t,$wrapperEl:a,wrapperEl:a[0],classNames:[],slides:c(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===n.params.direction,isVertical:()=>"vertical"===n.params.direction,rtl:"rtl"===t.dir.toLowerCase()||"rtl"===s.css("direction"),rtlTranslate:"horizontal"===n.params.direction&&("rtl"===t.dir.toLowerCase()||"rtl"===s.css("direction")),wrongRTL:"-webkit-box"===a.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev,touchEvents:function(){const e=["touchstart","touchmove","touchend","touchcancel"];let t=["mousedown","mousemove","mouseup"];return f.pointerEvents&&(t=["pointerdown","pointermove","pointerup"]),n.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},n.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},f.touch||!n.params.simulateTouch?n.touchEventsTouch:n.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:h.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:n.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),n.useModules(),n.params.init&&n.init(),n}slidesPerViewDynamic(){const{params:e,slides:t,slidesGrid:i,size:n,activeIndex:r}=this;let s=1;if(e.centeredSlides){let e,i=t[r].swiperSlideSize;for(let a=r+1;a<t.length;a+=1)t[a]&&!e&&(i+=t[a].swiperSlideSize,s+=1,i>n&&(e=!0));for(let a=r-1;a>=0;a-=1)t[a]&&!e&&(i+=t[a].swiperSlideSize,s+=1,i>n&&(e=!0))}else for(let e=r+1;e<t.length;e+=1)i[e]-i[r]<n&&(s+=1);return s}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;function n(){const t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}let r;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(n(),e.params.autoHeight&&e.updateAutoHeight()):(r=("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),r||n()),i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t=!0){const i=this,n=i.params.direction;return e||(e="horizontal"===n?"vertical":"horizontal"),e===n||"horizontal"!==e&&"vertical"!==e||(i.$el.removeClass(`${i.params.containerModifierClass}${n}`).addClass(`${i.params.containerModifierClass}${e}`),i.params.direction=e,i.slides.each((t,i)=>{"vertical"===e?i.style.width="":i.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}init(){const e=this;e.initialized||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit),e.attachEvents(),e.initialized=!0,e.emit("init"))}destroy(e=!0,t=!0){const i=this,{params:n,$el:r,$wrapperEl:s,slides:a}=i;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),t&&(i.removeClasses(),r.removeAttr("style"),s.removeAttr("style"),a&&a.length&&a.removeClass([n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(e=>{i.off(e)}),!1!==e&&(i.$el[0].swiper=null,i.$el.data("swiper",null),h.deleteProps(i)),i.destroyed=!0),null}static extendDefaults(e){h.extend(D,e)}static get extendedDefaults(){return D}static get defaults(){return L}static get Class(){return p}static get $(){return c}}var R={name:"device",proto:{device:E},static:{device:E}},j={name:"support",proto:{support:f},static:{support:f}};const N={isEdge:!!o.navigator.userAgent.match(/Edge/g),isSafari:function(){const e=o.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(o.navigator.userAgent)};var B={name:"browser",proto:{browser:N},static:{browser:N}},F={name:"resize",create(){const e=this;h.extend(e,{resize:{resizeHandler(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init(){o.addEventListener("resize",this.resize.resizeHandler),o.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy(){o.removeEventListener("resize",this.resize.resizeHandler),o.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}};const U={func:o.MutationObserver||o.WebkitMutationObserver,attach(e,t={}){const i=this,n=new(0,U.func)(e=>{if(1===e.length)return void i.emit("observerUpdate",e[0]);const t=function(){i.emit("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)});n.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),i.observer.observers.push(n)},init(){const e=this;if(f.observer&&e.params.observer){if(e.params.observeParents){const t=e.$el.parents();for(let i=0;i<t.length;i+=1)e.observer.attach(t[i])}e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy(){this.observer.observers.forEach(e=>{e.disconnect()}),this.observer.observers=[]}};var H={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create(){h.extend(this,{observer:{init:U.init.bind(this),attach:U.attach.bind(this),destroy:U.destroy.bind(this),observers:[]}})},on:{init(){this.observer.init()},destroy(){this.observer.destroy()}}};const z={update(e){const t=this,{slidesPerView:i,slidesPerGroup:n,centeredSlides:r}=t.params,{addSlidesBefore:s,addSlidesAfter:a}=t.params.virtual,{from:o,to:l,slides:c,slidesGrid:u,renderSlide:d,offset:f}=t.virtual;t.updateActiveIndex();const p=t.activeIndex||0;let v,g,m;v=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",r?(g=Math.floor(i/2)+n+s,m=Math.floor(i/2)+n+a):(g=i+(n-1)+s,m=n+a);const y=Math.max((p||0)-m,0),b=Math.min((p||0)+g,c.length-1),_=(t.slidesGrid[y]||0)-(t.slidesGrid[0]||0);function k(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(h.extend(t.virtual,{from:y,to:b,offset:_,slidesGrid:t.slidesGrid}),o===y&&l===b&&!e)return t.slidesGrid!==u&&_!==f&&t.slides.css(v,_+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:_,from:y,to:b,slides:function(){const e=[];for(let t=y;t<=b;t+=1)e.push(c[t]);return e}()}),void k();const E=[],S=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(let e=o;e<=l;e+=1)(e<y||e>b)&&t.$wrapperEl.find(`.${t.params.slideClass}[data-swiper-slide-index="${e}"]`).remove();for(let t=0;t<c.length;t+=1)t>=y&&t<=b&&(void 0===l||e?S.push(t):(t>l&&S.push(t),t<o&&E.push(t)));S.forEach(e=>{t.$wrapperEl.append(d(c[e],e))}),E.sort((e,t)=>t-e).forEach(e=>{t.$wrapperEl.prepend(d(c[e],e))}),t.$wrapperEl.children(".swiper-slide").css(v,_+"px"),k()},renderSlide(e,t){const i=this,n=i.params.virtual;if(n.cache&&i.virtual.cache[t])return i.virtual.cache[t];const r=n.renderSlide?c(n.renderSlide.call(i,e,t)):c(`<div class="${i.params.slideClass}" data-swiper-slide-index="${t}">${e}</div>`);return r.attr("data-swiper-slide-index")||r.attr("data-swiper-slide-index",t),n.cache&&(i.virtual.cache[t]=r),r},appendSlide(e){const t=this;if("object"==typeof e&&"length"in e)for(let i=0;i<e.length;i+=1)e[i]&&t.virtual.slides.push(e[i]);else t.virtual.slides.push(e);t.virtual.update(!0)},prependSlide(e){const t=this,i=t.activeIndex;let n=i+1,r=1;if(Array.isArray(e)){for(let i=0;i<e.length;i+=1)e[i]&&t.virtual.slides.unshift(e[i]);n=i+e.length,r=e.length}else t.virtual.slides.unshift(e);if(t.params.virtual.cache){const e=t.virtual.cache,i={};Object.keys(e).forEach(t=>{const n=e[t],s=n.attr("data-swiper-slide-index");s&&n.attr("data-swiper-slide-index",parseInt(s,10)+1),i[parseInt(t,10)+r]=n}),t.virtual.cache=i}t.virtual.update(!0),t.slideTo(n,0)},removeSlide(e){const t=this;if(null==e)return;let i=t.activeIndex;if(Array.isArray(e))for(let n=e.length-1;n>=0;n-=1)t.virtual.slides.splice(e[n],1),t.params.virtual.cache&&delete t.virtual.cache[e[n]],e[n]<i&&(i-=1),i=Math.max(i,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<i&&(i-=1),i=Math.max(i,0);t.virtual.update(!0),t.slideTo(i,0)},removeAllSlides(){const e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}};var G={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create(){h.extend(this,{virtual:{update:z.update.bind(this),appendSlide:z.appendSlide.bind(this),prependSlide:z.prependSlide.bind(this),removeSlide:z.removeSlide.bind(this),removeAllSlides:z.removeAllSlides.bind(this),renderSlide:z.renderSlide.bind(this),slides:this.params.virtual.slides,cache:{}}})},on:{beforeInit(){const e=this;if(!e.params.virtual.enabled)return;e.classNames.push(e.params.containerModifierClass+"virtual");const t={watchSlidesProgress:!0};h.extend(e.params,t),h.extend(e.originalParams,t),e.params.initialSlide||e.virtual.update()},setTranslate(){this.params.virtual.enabled&&this.virtual.update()}}};const V={handle(e){const t=this,{rtlTranslate:i}=t;let n=e;n.originalEvent&&(n=n.originalEvent);const r=n.keyCode||n.charCode,a=t.params.keyboard.pageUpDown,l=a&&33===r,c=a&&34===r,u=37===r,d=39===r,h=38===r,f=40===r;if(!t.allowSlideNext&&(t.isHorizontal()&&d||t.isVertical()&&f||c))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&u||t.isVertical()&&h||l))return!1;if(!(n.shiftKey||n.altKey||n.ctrlKey||n.metaKey||s.activeElement&&s.activeElement.nodeName&&("input"===s.activeElement.nodeName.toLowerCase()||"textarea"===s.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(l||c||u||d||h||f)){let e=!1;if(t.$el.parents("."+t.params.slideClass).length>0&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;const n=o.innerWidth,r=o.innerHeight,s=t.$el.offset();i&&(s.left-=t.$el[0].scrollLeft);const a=[[s.left,s.top],[s.left+t.width,s.top],[s.left,s.top+t.height],[s.left+t.width,s.top+t.height]];for(let t=0;t<a.length;t+=1){const i=a[t];i[0]>=0&&i[0]<=n&&i[1]>=0&&i[1]<=r&&(e=!0)}if(!e)return}t.isHorizontal()?((l||c||u||d)&&(n.preventDefault?n.preventDefault():n.returnValue=!1),((c||d)&&!i||(l||u)&&i)&&t.slideNext(),((l||u)&&!i||(c||d)&&i)&&t.slidePrev()):((l||c||h||f)&&(n.preventDefault?n.preventDefault():n.returnValue=!1),(c||f)&&t.slideNext(),(l||h)&&t.slidePrev()),t.emit("keyPress",r)}},enable(){this.keyboard.enabled||(c(s).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable(){this.keyboard.enabled&&(c(s).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}};var $={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create(){h.extend(this,{keyboard:{enabled:!1,enable:V.enable.bind(this),disable:V.disable.bind(this),handle:V.handle.bind(this)}})},on:{init(){const e=this;e.params.keyboard.enabled&&e.keyboard.enable()},destroy(){const e=this;e.keyboard.enabled&&e.keyboard.disable()}}};const Y={lastScrollTime:h.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:()=>o.navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){let e="onwheel"in s;if(!e){const t=s.createElement("div");t.setAttribute("onwheel","return;"),e="function"==typeof t.onwheel}return!e&&s.implementation&&s.implementation.hasFeature&&!0!==s.implementation.hasFeature("","")&&(e=s.implementation.hasFeature("Events.wheel","3.0")),e}()?"wheel":"mousewheel",normalize(e){let t=0,i=0,n=0,r=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),n=10*t,r=10*i,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(n=e.deltaX),e.shiftKey&&!n&&(n=r,r=0),(n||r)&&e.deltaMode&&(1===e.deltaMode?(n*=40,r*=40):(n*=800,r*=800)),n&&!t&&(t=n<1?-1:1),r&&!i&&(i=r<1?-1:1),{spinX:t,spinY:i,pixelX:n,pixelY:r}},handleMouseEnter(){this.mouseEntered=!0},handleMouseLeave(){this.mouseEntered=!1},handle(e){let t=e;const i=this,n=i.params.mousewheel;i.params.cssMode&&t.preventDefault();let r=i.$el;if("container"!==i.params.mousewheel.eventsTarged&&(r=c(i.params.mousewheel.eventsTarged)),!i.mouseEntered&&!r[0].contains(t.target)&&!n.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);let s=0;const a=i.rtlTranslate?-1:1,o=Y.normalize(t);if(n.forceToAxis)if(i.isHorizontal()){if(!(Math.abs(o.pixelX)>Math.abs(o.pixelY)))return!0;s=-o.pixelX*a}else{if(!(Math.abs(o.pixelY)>Math.abs(o.pixelX)))return!0;s=-o.pixelY}else s=Math.abs(o.pixelX)>Math.abs(o.pixelY)?-o.pixelX*a:-o.pixelY;if(0===s)return!0;if(n.invert&&(s=-s),i.params.freeMode){const e={time:h.now(),delta:Math.abs(s),direction:Math.sign(s)},{lastEventBeforeSnap:r}=i.mousewheel,a=r&&e.time<r.time+500&&e.delta<=r.delta&&e.direction===r.direction;if(!a){i.mousewheel.lastEventBeforeSnap=void 0,i.params.loop&&i.loopFix();let r=i.getTranslate()+s*n.sensitivity;const o=i.isBeginning,l=i.isEnd;if(r>=i.minTranslate()&&(r=i.minTranslate()),r<=i.maxTranslate()&&(r=i.maxTranslate()),i.setTransition(0),i.setTranslate(r),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!o&&i.isBeginning||!l&&i.isEnd)&&i.updateSlidesClasses(),i.params.freeModeSticky){clearTimeout(i.mousewheel.timeout),i.mousewheel.timeout=void 0;const t=i.mousewheel.recentWheelEvents;t.length>=15&&t.shift();const n=t.length?t[t.length-1]:void 0,r=t[0];if(t.push(e),n&&(e.delta>n.delta||e.direction!==n.direction))t.splice(0);else if(t.length>=15&&e.time-r.time<500&&r.delta-e.delta>=1&&e.delta<=6){const n=s>0?.8:.2;i.mousewheel.lastEventBeforeSnap=e,t.splice(0),i.mousewheel.timeout=h.nextTick(()=>{i.slideToClosest(i.params.speed,!0,void 0,n)},0)}i.mousewheel.timeout||(i.mousewheel.timeout=h.nextTick(()=>{i.mousewheel.lastEventBeforeSnap=e,t.splice(0),i.slideToClosest(i.params.speed,!0,void 0,.5)},500))}if(a||i.emit("scroll",t),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.autoplay.stop(),r===i.minTranslate()||r===i.maxTranslate())return!0}}else{const t={time:h.now(),delta:Math.abs(s),direction:Math.sign(s),raw:e},n=i.mousewheel.recentWheelEvents;n.length>=2&&n.shift();const r=n.length?n[n.length-1]:void 0;if(n.push(t),r?(t.direction!==r.direction||t.delta>r.delta||t.time>r.time+150)&&i.mousewheel.animateSlider(t):i.mousewheel.animateSlider(t),i.mousewheel.releaseScroll(t))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},animateSlider(e){const t=this;return e.delta>=6&&h.now()-t.mousewheel.lastScrollTime<60||(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),t.emit("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),t.emit("scroll",e.raw)),t.mousewheel.lastScrollTime=(new o.Date).getTime(),!1)},releaseScroll(e){const t=this,i=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&i.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&i.releaseOnEdges)return!0;return!1},enable(){const e=this,t=Y.event();if(e.params.cssMode)return e.wrapperEl.removeEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(e.mousewheel.enabled)return!1;let i=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(i=c(e.params.mousewheel.eventsTarged)),i.on("mouseenter",e.mousewheel.handleMouseEnter),i.on("mouseleave",e.mousewheel.handleMouseLeave),i.on(t,e.mousewheel.handle),e.mousewheel.enabled=!0,!0},disable(){const e=this,t=Y.event();if(e.params.cssMode)return e.wrapperEl.addEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(!e.mousewheel.enabled)return!1;let i=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(i=c(e.params.mousewheel.eventsTarged)),i.off(t,e.mousewheel.handle),e.mousewheel.enabled=!1,!0}};const W={update(){const e=this,t=e.params.navigation;if(e.params.loop)return;const{$nextEl:i,$prevEl:n}=e.navigation;n&&n.length>0&&(e.isBeginning?n.addClass(t.disabledClass):n.removeClass(t.disabledClass),n[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass)),i&&i.length>0&&(e.isEnd?i.addClass(t.disabledClass):i.removeClass(t.disabledClass),i[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](t.lockClass))},onPrevClick(e){e.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick(e){e.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init(){const e=this,t=e.params.navigation;if(!t.nextEl&&!t.prevEl)return;let i,n;t.nextEl&&(i=c(t.nextEl),e.params.uniqueNavElements&&"string"==typeof t.nextEl&&i.length>1&&1===e.$el.find(t.nextEl).length&&(i=e.$el.find(t.nextEl))),t.prevEl&&(n=c(t.prevEl),e.params.uniqueNavElements&&"string"==typeof t.prevEl&&n.length>1&&1===e.$el.find(t.prevEl).length&&(n=e.$el.find(t.prevEl))),i&&i.length>0&&i.on("click",e.navigation.onNextClick),n&&n.length>0&&n.on("click",e.navigation.onPrevClick),h.extend(e.navigation,{$nextEl:i,nextEl:i&&i[0],$prevEl:n,prevEl:n&&n[0]})},destroy(){const e=this,{$nextEl:t,$prevEl:i}=e.navigation;t&&t.length&&(t.off("click",e.navigation.onNextClick),t.removeClass(e.params.navigation.disabledClass)),i&&i.length&&(i.off("click",e.navigation.onPrevClick),i.removeClass(e.params.navigation.disabledClass))}};const X={update(){const e=this,t=e.rtl,i=e.params.pagination;if(!i.el||!e.pagination.el||!e.pagination.$el||0===e.pagination.$el.length)return;const n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,r=e.pagination.$el;let s;const a=e.params.loop?Math.ceil((n-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(s=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),s>n-1-2*e.loopedSlides&&(s-=n-2*e.loopedSlides),s>a-1&&(s-=a),s<0&&"bullets"!==e.params.paginationType&&(s=a+s)):s=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===i.type&&e.pagination.bullets&&e.pagination.bullets.length>0){const n=e.pagination.bullets;let a,o,l;if(i.dynamicBullets&&(e.pagination.bulletSize=n.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),r.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(i.dynamicMainBullets+4)+"px"),i.dynamicMainBullets>1&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=s-e.previousIndex,e.pagination.dynamicBulletIndex>i.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=i.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),a=s-e.pagination.dynamicBulletIndex,o=a+(Math.min(n.length,i.dynamicMainBullets)-1),l=(o+a)/2),n.removeClass(`${i.bulletActiveClass} ${i.bulletActiveClass}-next ${i.bulletActiveClass}-next-next ${i.bulletActiveClass}-prev ${i.bulletActiveClass}-prev-prev ${i.bulletActiveClass}-main`),r.length>1)n.each((e,t)=>{const n=c(t),r=n.index();r===s&&n.addClass(i.bulletActiveClass),i.dynamicBullets&&(r>=a&&r<=o&&n.addClass(i.bulletActiveClass+"-main"),r===a&&n.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),r===o&&n.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next"))});else{const t=n.eq(s),r=t.index();if(t.addClass(i.bulletActiveClass),i.dynamicBullets){const t=n.eq(a),s=n.eq(o);for(let e=a;e<=o;e+=1)n.eq(e).addClass(i.bulletActiveClass+"-main");if(e.params.loop)if(r>=n.length-i.dynamicMainBullets){for(let e=i.dynamicMainBullets;e>=0;e-=1)n.eq(n.length-e).addClass(i.bulletActiveClass+"-main");n.eq(n.length-i.dynamicMainBullets-1).addClass(i.bulletActiveClass+"-prev")}else t.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),s.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next");else t.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),s.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next")}}if(i.dynamicBullets){const r=Math.min(n.length,i.dynamicMainBullets+4),s=(e.pagination.bulletSize*r-e.pagination.bulletSize)/2-l*e.pagination.bulletSize,a=t?"right":"left";n.css(e.isHorizontal()?a:"top",s+"px")}}if("fraction"===i.type&&(r.find("."+i.currentClass).text(i.formatFractionCurrent(s+1)),r.find("."+i.totalClass).text(i.formatFractionTotal(a))),"progressbar"===i.type){let t;t=i.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";const n=(s+1)/a;let o=1,l=1;"horizontal"===t?o=n:l=n,r.find("."+i.progressbarFillClass).transform(`translate3d(0,0,0) scaleX(${o}) scaleY(${l})`).transition(e.params.speed)}"custom"===i.type&&i.renderCustom?(r.html(i.renderCustom(e,s+1,a)),e.emit("paginationRender",e,r[0])):e.emit("paginationUpdate",e,r[0]),r[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](i.lockClass)},render(){const e=this,t=e.params.pagination;if(!t.el||!e.pagination.el||!e.pagination.$el||0===e.pagination.$el.length)return;const i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,n=e.pagination.$el;let r="";if("bullets"===t.type){const s=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;for(let i=0;i<s;i+=1)t.renderBullet?r+=t.renderBullet.call(e,i,t.bulletClass):r+=`<${t.bulletElement} class="${t.bulletClass}"></${t.bulletElement}>`;n.html(r),e.pagination.bullets=n.find("."+t.bulletClass)}"fraction"===t.type&&(r=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`,n.html(r)),"progressbar"===t.type&&(r=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):`<span class="${t.progressbarFillClass}"></span>`,n.html(r)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])},init(){const e=this,t=e.params.pagination;if(!t.el)return;let i=c(t.el);0!==i.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&i.length>1&&(i=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&i.addClass(t.clickableClass),i.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(i.addClass(`${t.modifierClass}${t.type}-dynamic`),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&i.addClass(t.progressbarOppositeClass),t.clickable&&i.on("click","."+t.bulletClass,(function(t){t.preventDefault();let i=c(this).index()*e.params.slidesPerGroup;e.params.loop&&(i+=e.loopedSlides),e.slideTo(i)})),h.extend(e.pagination,{$el:i,el:i[0]}))},destroy(){const e=this.params.pagination;if(!e.el||!this.pagination.el||!this.pagination.$el||0===this.pagination.$el.length)return;const t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click","."+e.bulletClass)}};const K={setTranslate(){const e=this;if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:t,rtlTranslate:i,progress:n}=e,{dragSize:r,trackSize:s,$dragEl:a,$el:o}=t,l=e.params.scrollbar;let c=r,u=(s-r)*n;i?(u=-u,u>0?(c=r-u,u=0):-u+r>s&&(c=s+u)):u<0?(c=r+u,u=0):u+r>s&&(c=s-u),e.isHorizontal()?(a.transform(`translate3d(${u}px, 0, 0)`),a[0].style.width=c+"px"):(a.transform(`translate3d(0px, ${u}px, 0)`),a[0].style.height=c+"px"),l.hide&&(clearTimeout(e.scrollbar.timeout),o[0].style.opacity=1,e.scrollbar.timeout=setTimeout(()=>{o[0].style.opacity=0,o.transition(400)},1e3))},setTransition(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize(){const e=this;if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:t}=e,{$dragEl:i,$el:n}=t;i[0].style.width="",i[0].style.height="";const r=e.isHorizontal()?n[0].offsetWidth:n[0].offsetHeight,s=e.size/e.virtualSize,a=s*(r/e.size);let o;o="auto"===e.params.scrollbar.dragSize?r*s:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?i[0].style.width=o+"px":i[0].style.height=o+"px",n[0].style.display=s>=1?"none":"",e.params.scrollbar.hide&&(n[0].style.opacity=0),h.extend(t,{trackSize:r,divider:s,moveDivider:a,dragSize:o}),t.$el[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)},getPointerPosition(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition(e){const{scrollbar:t,rtlTranslate:i}=this,{$el:n,dragSize:r,trackSize:s,dragStartPos:a}=t;let o;o=(t.getPointerPosition(e)-n.offset()[this.isHorizontal()?"left":"top"]-(null!==a?a:r/2))/(s-r),o=Math.max(Math.min(o,1),0),i&&(o=1-o);const l=this.minTranslate()+(this.maxTranslate()-this.minTranslate())*o;this.updateProgress(l),this.setTranslate(l),this.updateActiveIndex(),this.updateSlidesClasses()},onDragStart(e){const t=this,i=t.params.scrollbar,{scrollbar:n,$wrapperEl:r}=t,{$el:s,$dragEl:a}=n;t.scrollbar.isTouched=!0,t.scrollbar.dragStartPos=e.target===a[0]||e.target===a?n.getPointerPosition(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),r.transition(100),a.transition(100),n.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),s.transition(0),i.hide&&s.css("opacity",1),t.params.cssMode&&t.$wrapperEl.css("scroll-snap-type","none"),t.emit("scrollbarDragStart",e)},onDragMove(e){const{scrollbar:t,$wrapperEl:i}=this,{$el:n,$dragEl:r}=t;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),i.transition(0),n.transition(0),r.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd(e){const t=this,i=t.params.scrollbar,{scrollbar:n,$wrapperEl:r}=t,{$el:s}=n;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,t.params.cssMode&&(t.$wrapperEl.css("scroll-snap-type",""),r.transition("")),i.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=h.nextTick(()=>{s.css("opacity",0),s.transition(400)},1e3)),t.emit("scrollbarDragEnd",e),i.snapOnRelease&&t.slideToClosest())},enableDraggable(){const e=this;if(!e.params.scrollbar.el)return;const{scrollbar:t,touchEventsTouch:i,touchEventsDesktop:n,params:r}=e,a=t.$el[0],o=!(!f.passiveListener||!r.passiveListeners)&&{passive:!1,capture:!1},l=!(!f.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};f.touch?(a.addEventListener(i.start,e.scrollbar.onDragStart,o),a.addEventListener(i.move,e.scrollbar.onDragMove,o),a.addEventListener(i.end,e.scrollbar.onDragEnd,l)):(a.addEventListener(n.start,e.scrollbar.onDragStart,o),s.addEventListener(n.move,e.scrollbar.onDragMove,o),s.addEventListener(n.end,e.scrollbar.onDragEnd,l))},disableDraggable(){const e=this;if(!e.params.scrollbar.el)return;const{scrollbar:t,touchEventsTouch:i,touchEventsDesktop:n,params:r}=e,a=t.$el[0],o=!(!f.passiveListener||!r.passiveListeners)&&{passive:!1,capture:!1},l=!(!f.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};f.touch?(a.removeEventListener(i.start,e.scrollbar.onDragStart,o),a.removeEventListener(i.move,e.scrollbar.onDragMove,o),a.removeEventListener(i.end,e.scrollbar.onDragEnd,l)):(a.removeEventListener(n.start,e.scrollbar.onDragStart,o),s.removeEventListener(n.move,e.scrollbar.onDragMove,o),s.removeEventListener(n.end,e.scrollbar.onDragEnd,l))},init(){const e=this;if(!e.params.scrollbar.el)return;const{scrollbar:t,$el:i}=e,n=e.params.scrollbar;let r=c(n.el);e.params.uniqueNavElements&&"string"==typeof n.el&&r.length>1&&1===i.find(n.el).length&&(r=i.find(n.el));let s=r.find("."+e.params.scrollbar.dragClass);0===s.length&&(s=c(`<div class="${e.params.scrollbar.dragClass}"></div>`),r.append(s)),h.extend(t,{$el:r,el:r[0],$dragEl:s,dragEl:s[0]}),n.draggable&&t.enableDraggable()},destroy(){this.scrollbar.disableDraggable()}};const q={setTransform(e,t){const{rtl:i}=this,n=c(e),r=i?-1:1,s=n.attr("data-swiper-parallax")||"0";let a=n.attr("data-swiper-parallax-x"),o=n.attr("data-swiper-parallax-y");const l=n.attr("data-swiper-parallax-scale"),u=n.attr("data-swiper-parallax-opacity");if(a||o?(a=a||"0",o=o||"0"):this.isHorizontal()?(a=s,o="0"):(o=s,a="0"),a=a.indexOf("%")>=0?parseInt(a,10)*t*r+"%":a*t*r+"px",o=o.indexOf("%")>=0?parseInt(o,10)*t+"%":o*t+"px",null!=u){const e=u-(u-1)*(1-Math.abs(t));n[0].style.opacity=e}if(null==l)n.transform(`translate3d(${a}, ${o}, 0px)`);else{const e=l-(l-1)*(1-Math.abs(t));n.transform(`translate3d(${a}, ${o}, 0px) scale(${e})`)}},setTranslate(){const e=this,{$el:t,slides:i,progress:n,snapGrid:r}=e;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((t,i)=>{e.parallax.setTransform(i,n)}),i.each((t,i)=>{let s=i.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(s+=Math.ceil(t/2)-n*(r.length-1)),s=Math.min(Math.max(s,-1),1),c(i).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((t,i)=>{e.parallax.setTransform(i,s)})})},setTransition(e=this.params.speed){const{$el:t}=this;t.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((t,i)=>{const n=c(i);let r=parseInt(n.attr("data-swiper-parallax-duration"),10)||e;0===e&&(r=0),n.transition(r)})}};const Z={getDistanceBetweenTouches(e){if(e.targetTouches.length<2)return 1;const t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,n=e.targetTouches[1].pageX,r=e.targetTouches[1].pageY;return Math.sqrt((n-t)**2+(r-i)**2)},onGestureStart(e){const t=this,i=t.params.zoom,n=t.zoom,{gesture:r}=n;if(n.fakeGestureTouched=!1,n.fakeGestureMoved=!1,!f.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;n.fakeGestureTouched=!0,r.scaleStart=Z.getDistanceBetweenTouches(e)}r.$slideEl&&r.$slideEl.length||(r.$slideEl=c(e.target).closest("."+t.params.slideClass),0===r.$slideEl.length&&(r.$slideEl=t.slides.eq(t.activeIndex)),r.$imageEl=r.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),r.$imageWrapEl=r.$imageEl.parent("."+i.containerClass),r.maxRatio=r.$imageWrapEl.attr("data-swiper-zoom")||i.maxRatio,0!==r.$imageWrapEl.length)?(r.$imageEl&&r.$imageEl.transition(0),t.zoom.isScaling=!0):r.$imageEl=void 0},onGestureChange(e){const t=this.params.zoom,i=this.zoom,{gesture:n}=i;if(!f.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;i.fakeGestureMoved=!0,n.scaleMove=Z.getDistanceBetweenTouches(e)}n.$imageEl&&0!==n.$imageEl.length&&(i.scale=f.gestures?e.scale*i.currentScale:n.scaleMove/n.scaleStart*i.currentScale,i.scale>n.maxRatio&&(i.scale=n.maxRatio-1+(i.scale-n.maxRatio+1)**.5),i.scale<t.minRatio&&(i.scale=t.minRatio+1-(t.minRatio-i.scale+1)**.5),n.$imageEl.transform(`translate3d(0,0,0) scale(${i.scale})`))},onGestureEnd(e){const t=this.params.zoom,i=this.zoom,{gesture:n}=i;if(!f.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!E.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}n.$imageEl&&0!==n.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,n.maxRatio),t.minRatio),n.$imageEl.transition(this.params.speed).transform(`translate3d(0,0,0) scale(${i.scale})`),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(n.$slideEl=void 0))},onTouchStart(e){const t=this.zoom,{gesture:i,image:n}=t;i.$imageEl&&0!==i.$imageEl.length&&(n.isTouched||(E.android&&e.cancelable&&e.preventDefault(),n.isTouched=!0,n.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,n.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove(e){const t=this,i=t.zoom,{gesture:n,image:r,velocity:s}=i;if(!n.$imageEl||0===n.$imageEl.length)return;if(t.allowClick=!1,!r.isTouched||!n.$slideEl)return;r.isMoved||(r.width=n.$imageEl[0].offsetWidth,r.height=n.$imageEl[0].offsetHeight,r.startX=h.getTranslate(n.$imageWrapEl[0],"x")||0,r.startY=h.getTranslate(n.$imageWrapEl[0],"y")||0,n.slideWidth=n.$slideEl[0].offsetWidth,n.slideHeight=n.$slideEl[0].offsetHeight,n.$imageWrapEl.transition(0),t.rtl&&(r.startX=-r.startX,r.startY=-r.startY));const a=r.width*i.scale,o=r.height*i.scale;if(!(a<n.slideWidth&&o<n.slideHeight)){if(r.minX=Math.min(n.slideWidth/2-a/2,0),r.maxX=-r.minX,r.minY=Math.min(n.slideHeight/2-o/2,0),r.maxY=-r.minY,r.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,r.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!r.isMoved&&!i.isScaling){if(t.isHorizontal()&&(Math.floor(r.minX)===Math.floor(r.startX)&&r.touchesCurrent.x<r.touchesStart.x||Math.floor(r.maxX)===Math.floor(r.startX)&&r.touchesCurrent.x>r.touchesStart.x))return void(r.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(r.minY)===Math.floor(r.startY)&&r.touchesCurrent.y<r.touchesStart.y||Math.floor(r.maxY)===Math.floor(r.startY)&&r.touchesCurrent.y>r.touchesStart.y))return void(r.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),r.isMoved=!0,r.currentX=r.touchesCurrent.x-r.touchesStart.x+r.startX,r.currentY=r.touchesCurrent.y-r.touchesStart.y+r.startY,r.currentX<r.minX&&(r.currentX=r.minX+1-(r.minX-r.currentX+1)**.8),r.currentX>r.maxX&&(r.currentX=r.maxX-1+(r.currentX-r.maxX+1)**.8),r.currentY<r.minY&&(r.currentY=r.minY+1-(r.minY-r.currentY+1)**.8),r.currentY>r.maxY&&(r.currentY=r.maxY-1+(r.currentY-r.maxY+1)**.8),s.prevPositionX||(s.prevPositionX=r.touchesCurrent.x),s.prevPositionY||(s.prevPositionY=r.touchesCurrent.y),s.prevTime||(s.prevTime=Date.now()),s.x=(r.touchesCurrent.x-s.prevPositionX)/(Date.now()-s.prevTime)/2,s.y=(r.touchesCurrent.y-s.prevPositionY)/(Date.now()-s.prevTime)/2,Math.abs(r.touchesCurrent.x-s.prevPositionX)<2&&(s.x=0),Math.abs(r.touchesCurrent.y-s.prevPositionY)<2&&(s.y=0),s.prevPositionX=r.touchesCurrent.x,s.prevPositionY=r.touchesCurrent.y,s.prevTime=Date.now(),n.$imageWrapEl.transform(`translate3d(${r.currentX}px, ${r.currentY}px,0)`)}},onTouchEnd(){const e=this.zoom,{gesture:t,image:i,velocity:n}=e;if(!t.$imageEl||0===t.$imageEl.length)return;if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;let r=300,s=300;const a=n.x*r,o=i.currentX+a,l=n.y*s,c=i.currentY+l;0!==n.x&&(r=Math.abs((o-i.currentX)/n.x)),0!==n.y&&(s=Math.abs((c-i.currentY)/n.y));const u=Math.max(r,s);i.currentX=o,i.currentY=c;const d=i.width*e.scale,h=i.height*e.scale;i.minX=Math.min(t.slideWidth/2-d/2,0),i.maxX=-i.minX,i.minY=Math.min(t.slideHeight/2-h/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),t.$imageWrapEl.transition(u).transform(`translate3d(${i.currentX}px, ${i.currentY}px,0)`)},onTransitionEnd(){const e=this.zoom,{gesture:t}=e;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl&&t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl&&t.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0)},toggle(e){const t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in(e){const t=this,i=t.zoom,n=t.params.zoom,{gesture:r,image:s}=i;if(r.$slideEl||(t.params.virtual&&t.params.virtual.enabled&&t.virtual?r.$slideEl=t.$wrapperEl.children("."+t.params.slideActiveClass):r.$slideEl=t.slides.eq(t.activeIndex),r.$imageEl=r.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),r.$imageWrapEl=r.$imageEl.parent("."+n.containerClass)),!r.$imageEl||0===r.$imageEl.length)return;let a,o,l,c,u,d,h,f,p,v,g,m,y,b,_,k,E,S;r.$slideEl.addClass(""+n.zoomedSlideClass),void 0===s.touchesStart.x&&e?(a="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,o="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(a=s.touchesStart.x,o=s.touchesStart.y),i.scale=r.$imageWrapEl.attr("data-swiper-zoom")||n.maxRatio,i.currentScale=r.$imageWrapEl.attr("data-swiper-zoom")||n.maxRatio,e?(E=r.$slideEl[0].offsetWidth,S=r.$slideEl[0].offsetHeight,l=r.$slideEl.offset().left,c=r.$slideEl.offset().top,u=l+E/2-a,d=c+S/2-o,p=r.$imageEl[0].offsetWidth,v=r.$imageEl[0].offsetHeight,g=p*i.scale,m=v*i.scale,y=Math.min(E/2-g/2,0),b=Math.min(S/2-m/2,0),_=-y,k=-b,h=u*i.scale,f=d*i.scale,h<y&&(h=y),h>_&&(h=_),f<b&&(f=b),f>k&&(f=k)):(h=0,f=0),r.$imageWrapEl.transition(300).transform(`translate3d(${h}px, ${f}px,0)`),r.$imageEl.transition(300).transform(`translate3d(0,0,0) scale(${i.scale})`)},out(){const e=this,t=e.zoom,i=e.params.zoom,{gesture:n}=t;n.$slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?n.$slideEl=e.$wrapperEl.children("."+e.params.slideActiveClass):n.$slideEl=e.slides.eq(e.activeIndex),n.$imageEl=n.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),n.$imageWrapEl=n.$imageEl.parent("."+i.containerClass)),n.$imageEl&&0!==n.$imageEl.length&&(t.scale=1,t.currentScale=1,n.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),n.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),n.$slideEl.removeClass(""+i.zoomedSlideClass),n.$slideEl=void 0)},enable(){const e=this,t=e.zoom;if(t.enabled)return;t.enabled=!0;const i=!("touchstart"!==e.touchEvents.start||!f.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},n=!f.passiveListener||{passive:!1,capture:!0},r="."+e.params.slideClass;f.gestures?(e.$wrapperEl.on("gesturestart",r,t.onGestureStart,i),e.$wrapperEl.on("gesturechange",r,t.onGestureChange,i),e.$wrapperEl.on("gestureend",r,t.onGestureEnd,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,r,t.onGestureStart,i),e.$wrapperEl.on(e.touchEvents.move,r,t.onGestureChange,n),e.$wrapperEl.on(e.touchEvents.end,r,t.onGestureEnd,i),e.touchEvents.cancel&&e.$wrapperEl.on(e.touchEvents.cancel,r,t.onGestureEnd,i)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove,n)},disable(){const e=this,t=e.zoom;if(!t.enabled)return;e.zoom.enabled=!1;const i=!("touchstart"!==e.touchEvents.start||!f.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},n=!f.passiveListener||{passive:!1,capture:!0},r="."+e.params.slideClass;f.gestures?(e.$wrapperEl.off("gesturestart",r,t.onGestureStart,i),e.$wrapperEl.off("gesturechange",r,t.onGestureChange,i),e.$wrapperEl.off("gestureend",r,t.onGestureEnd,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,r,t.onGestureStart,i),e.$wrapperEl.off(e.touchEvents.move,r,t.onGestureChange,n),e.$wrapperEl.off(e.touchEvents.end,r,t.onGestureEnd,i),e.touchEvents.cancel&&e.$wrapperEl.off(e.touchEvents.cancel,r,t.onGestureEnd,i)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove,n)}};const J={loadInSlide(e,t=!0){const i=this,n=i.params.lazy;if(void 0===e)return;if(0===i.slides.length)return;const r=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children(`.${i.params.slideClass}[data-swiper-slide-index="${e}"]`):i.slides.eq(e);let s=r.find(`.${n.elementClass}:not(.${n.loadedClass}):not(.${n.loadingClass})`);!r.hasClass(n.elementClass)||r.hasClass(n.loadedClass)||r.hasClass(n.loadingClass)||(s=s.add(r[0])),0!==s.length&&s.each((e,s)=>{const a=c(s);a.addClass(n.loadingClass);const o=a.attr("data-background"),l=a.attr("data-src"),u=a.attr("data-srcset"),d=a.attr("data-sizes"),h=a.parent("picture");i.loadImage(a[0],l||o,u,d,!1,()=>{if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(o?(a.css("background-image",`url("${o}")`),a.removeAttr("data-background")):(u&&(a.attr("srcset",u),a.removeAttr("data-srcset")),d&&(a.attr("sizes",d),a.removeAttr("data-sizes")),h.length&&h.children("source").each((e,t)=>{const i=c(t);i.attr("data-srcset")&&(i.attr("srcset",i.attr("data-srcset")),i.removeAttr("data-srcset"))}),l&&(a.attr("src",l),a.removeAttr("data-src"))),a.addClass(n.loadedClass).removeClass(n.loadingClass),r.find("."+n.preloaderClass).remove(),i.params.loop&&t){const e=r.attr("data-swiper-slide-index");if(r.hasClass(i.params.slideDuplicateClass)){const t=i.$wrapperEl.children(`[data-swiper-slide-index="${e}"]:not(.${i.params.slideDuplicateClass})`);i.lazy.loadInSlide(t.index(),!1)}else{const t=i.$wrapperEl.children(`.${i.params.slideDuplicateClass}[data-swiper-slide-index="${e}"]`);i.lazy.loadInSlide(t.index(),!1)}}i.emit("lazyImageReady",r[0],a[0]),i.params.autoHeight&&i.updateAutoHeight()}}),i.emit("lazyImageLoad",r[0],a[0])})},load(){const e=this,{$wrapperEl:t,params:i,slides:n,activeIndex:r}=e,s=e.virtual&&i.virtual.enabled,a=i.lazy;let o=i.slidesPerView;function l(e){if(s){if(t.children(`.${i.slideClass}[data-swiper-slide-index="${e}"]`).length)return!0}else if(n[e])return!0;return!1}function u(e){return s?c(e).attr("data-swiper-slide-index"):c(e).index()}if("auto"===o&&(o=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+i.slideVisibleClass).each((t,i)=>{const n=s?c(i).attr("data-swiper-slide-index"):c(i).index();e.lazy.loadInSlide(n)});else if(o>1)for(let t=r;t<r+o;t+=1)l(t)&&e.lazy.loadInSlide(t);else e.lazy.loadInSlide(r);if(a.loadPrevNext)if(o>1||a.loadPrevNextAmount&&a.loadPrevNextAmount>1){const t=a.loadPrevNextAmount,i=o,s=Math.min(r+i+Math.max(t,i),n.length),c=Math.max(r-Math.max(i,t),0);for(let t=r+o;t<s;t+=1)l(t)&&e.lazy.loadInSlide(t);for(let t=c;t<r;t+=1)l(t)&&e.lazy.loadInSlide(t)}else{const n=t.children("."+i.slideNextClass);n.length>0&&e.lazy.loadInSlide(u(n));const r=t.children("."+i.slidePrevClass);r.length>0&&e.lazy.loadInSlide(u(r))}}};const Q={LinearSpline:function(e,t){const i=function(){let e,t,i;return(n,r)=>{for(t=-1,e=n.length;e-t>1;)i=e+t>>1,n[i]<=r?t=i:e=i;return e}}();let n,r;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(r=i(this.x,e),n=r-1,(e-this.x[n])*(this.y[r]-this.y[n])/(this.x[r]-this.x[n])+this.y[n]):0},this},getInterpolateFunction(e){const t=this;t.controller.spline||(t.controller.spline=t.params.loop?new Q.LinearSpline(t.slidesGrid,e.slidesGrid):new Q.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate(e,t){const i=this,n=i.controller.control;let r,s;function a(e){const t=i.rtlTranslate?-i.translate:i.translate;"slide"===i.params.controller.by&&(i.controller.getInterpolateFunction(e),s=-i.controller.spline.interpolate(-t)),s&&"container"!==i.params.controller.by||(r=(e.maxTranslate()-e.minTranslate())/(i.maxTranslate()-i.minTranslate()),s=(t-i.minTranslate())*r+e.minTranslate()),i.params.controller.inverse&&(s=e.maxTranslate()-s),e.updateProgress(s),e.setTranslate(s,i),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(n))for(let e=0;e<n.length;e+=1)n[e]!==t&&n[e]instanceof M&&a(n[e]);else n instanceof M&&t!==n&&a(n)},setTransition(e,t){const i=this,n=i.controller.control;let r;function s(t){t.setTransition(e,i),0!==e&&(t.transitionStart(),t.params.autoHeight&&h.nextTick(()=>{t.updateAutoHeight()}),t.$wrapperEl.transitionEnd(()=>{n&&(t.params.loop&&"slide"===i.params.controller.by&&t.loopFix(),t.transitionEnd())}))}if(Array.isArray(n))for(r=0;r<n.length;r+=1)n[r]!==t&&n[r]instanceof M&&s(n[r]);else n instanceof M&&t!==n&&s(n)}};const ee={makeElFocusable:e=>(e.attr("tabIndex","0"),e),makeElNotFocusable:e=>(e.attr("tabIndex","-1"),e),addElRole:(e,t)=>(e.attr("role",t),e),addElLabel:(e,t)=>(e.attr("aria-label",t),e),disableEl:e=>(e.attr("aria-disabled",!0),e),enableEl:e=>(e.attr("aria-disabled",!1),e),onEnterKey(e){const t=this,i=t.params.a11y;if(13!==e.keyCode)return;const n=c(e.target);t.navigation&&t.navigation.$nextEl&&n.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(i.lastSlideMessage):t.a11y.notify(i.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&n.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(i.firstSlideMessage):t.a11y.notify(i.prevSlideMessage)),t.pagination&&n.is("."+t.params.pagination.bulletClass)&&n[0].click()},notify(e){const t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation(){const e=this;if(e.params.loop||!e.navigation)return;const{$nextEl:t,$prevEl:i}=e.navigation;i&&i.length>0&&(e.isBeginning?(e.a11y.disableEl(i),e.a11y.makeElNotFocusable(i)):(e.a11y.enableEl(i),e.a11y.makeElFocusable(i))),t&&t.length>0&&(e.isEnd?(e.a11y.disableEl(t),e.a11y.makeElNotFocusable(t)):(e.a11y.enableEl(t),e.a11y.makeElFocusable(t)))},updatePagination(){const e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((i,n)=>{const r=c(n);e.a11y.makeElFocusable(r),e.a11y.addElRole(r,"button"),e.a11y.addElLabel(r,t.paginationBulletMessage.replace(/\{\{index\}\}/,r.index()+1))})},init(){const e=this;e.$el.append(e.a11y.liveRegion);const t=e.params.a11y;let i,n;e.navigation&&e.navigation.$nextEl&&(i=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(n=e.navigation.$prevEl),i&&(e.a11y.makeElFocusable(i),e.a11y.addElRole(i,"button"),e.a11y.addElLabel(i,t.nextSlideMessage),i.on("keydown",e.a11y.onEnterKey)),n&&(e.a11y.makeElFocusable(n),e.a11y.addElRole(n,"button"),e.a11y.addElLabel(n,t.prevSlideMessage),n.on("keydown",e.a11y.onEnterKey)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass,e.a11y.onEnterKey)},destroy(){const e=this;let t,i;e.a11y.liveRegion&&e.a11y.liveRegion.length>0&&e.a11y.liveRegion.remove(),e.navigation&&e.navigation.$nextEl&&(t=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(i=e.navigation.$prevEl),t&&t.off("keydown",e.a11y.onEnterKey),i&&i.off("keydown",e.a11y.onEnterKey),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.off("keydown","."+e.params.pagination.bulletClass,e.a11y.onEnterKey)}};const te={init(){const e=this;if(!e.params.history)return;if(!o.history||!o.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);const t=e.history;t.initialized=!0,t.paths=te.getPathValues(),(t.paths.key||t.paths.value)&&(t.scrollToSlide(0,t.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||o.addEventListener("popstate",e.history.setHistoryPopState))},destroy(){const e=this;e.params.history.replaceState||o.removeEventListener("popstate",e.history.setHistoryPopState)},setHistoryPopState(){this.history.paths=te.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues(){const e=o.location.pathname.slice(1).split("/").filter(e=>""!==e),t=e.length;return{key:e[t-2],value:e[t-1]}},setHistory(e,t){if(!this.history.initialized||!this.params.history.enabled)return;const i=this.slides.eq(t);let n=te.slugify(i.attr("data-history"));o.location.pathname.includes(e)||(n=`${e}/${n}`);const r=o.history.state;r&&r.value===n||(this.params.history.replaceState?o.history.replaceState({value:n},null,n):o.history.pushState({value:n},null,n))},slugify:e=>e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),scrollToSlide(e,t,i){const n=this;if(t)for(let r=0,s=n.slides.length;r<s;r+=1){const s=n.slides.eq(r);if(te.slugify(s.attr("data-history"))===t&&!s.hasClass(n.params.slideDuplicateClass)){const t=s.index();n.slideTo(t,e,i)}}else n.slideTo(0,e,i)}};const ie={onHashCange(){const e=this;e.emit("hashChange");const t=s.location.hash.replace("#","");if(t!==e.slides.eq(e.activeIndex).attr("data-hash")){const i=e.$wrapperEl.children(`.${e.params.slideClass}[data-hash="${t}"]`).index();if(void 0===i)return;e.slideTo(i)}},setHash(){const e=this;if(e.hashNavigation.initialized&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&o.history&&o.history.replaceState)o.history.replaceState(null,null,"#"+e.slides.eq(e.activeIndex).attr("data-hash")||""),e.emit("hashSet");else{const t=e.slides.eq(e.activeIndex),i=t.attr("data-hash")||t.attr("data-history");s.location.hash=i||"",e.emit("hashSet")}},init(){const e=this;if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;e.hashNavigation.initialized=!0;const t=s.location.hash.replace("#","");if(t){const i=0;for(let n=0,r=e.slides.length;n<r;n+=1){const r=e.slides.eq(n);if((r.attr("data-hash")||r.attr("data-history"))===t&&!r.hasClass(e.params.slideDuplicateClass)){const t=r.index();e.slideTo(t,i,e.params.runCallbacksOnInit,!0)}}}e.params.hashNavigation.watchState&&c(o).on("hashchange",e.hashNavigation.onHashCange)},destroy(){const e=this;e.params.hashNavigation.watchState&&c(o).off("hashchange",e.hashNavigation.onHashCange)}};const ne={run(){const e=this,t=e.slides.eq(e.activeIndex);let i=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=h.nextTick(()=>{e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),e.params.cssMode&&e.autoplay.running&&e.autoplay.run()},i)},start(){return void 0===this.autoplay.timeout&&(!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0))},stop(){const e=this;return!!e.autoplay.running&&(void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0))},pause(e){const t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?(t.$wrapperEl[0].addEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].addEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd)):(t.autoplay.paused=!1,t.autoplay.run())))}};const re={setTranslate(){const e=this,{slides:t}=e;for(let i=0;i<t.length;i+=1){const t=e.slides.eq(i);let n=-t[0].swiperSlideOffset;e.params.virtualTranslate||(n-=e.translate);let r=0;e.isHorizontal()||(r=n,n=0);const s=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(t[0].progress),0):1+Math.min(Math.max(t[0].progress,-1),0);t.css({opacity:s}).transform(`translate3d(${n}px, ${r}px, 0px)`)}},setTransition(e){const t=this,{slides:i,$wrapperEl:n}=t;if(i.transition(e),t.params.virtualTranslate&&0!==e){let e=!1;i.transitionEnd(()=>{if(e)return;if(!t||t.destroyed)return;e=!0,t.animating=!1;const i=["webkitTransitionEnd","transitionend"];for(let e=0;e<i.length;e+=1)n.trigger(i[e])})}}};const se={setTranslate(){const{$el:e,$wrapperEl:t,slides:i,width:n,height:r,rtlTranslate:s,size:a}=this,o=this.params.cubeEffect,l=this.isHorizontal(),u=this.virtual&&this.params.virtual.enabled;let d,h=0;o.shadow&&(l?(d=t.find(".swiper-cube-shadow"),0===d.length&&(d=c('<div class="swiper-cube-shadow"></div>'),t.append(d)),d.css({height:n+"px"})):(d=e.find(".swiper-cube-shadow"),0===d.length&&(d=c('<div class="swiper-cube-shadow"></div>'),e.append(d))));for(let e=0;e<i.length;e+=1){const t=i.eq(e);let n=e;u&&(n=parseInt(t.attr("data-swiper-slide-index"),10));let r=90*n,d=Math.floor(r/360);s&&(r=-r,d=Math.floor(-r/360));const f=Math.max(Math.min(t[0].progress,1),-1);let p=0,v=0,g=0;n%4==0?(p=4*-d*a,g=0):(n-1)%4==0?(p=0,g=4*-d*a):(n-2)%4==0?(p=a+4*d*a,g=a):(n-3)%4==0&&(p=-a,g=3*a+4*a*d),s&&(p=-p),l||(v=p,p=0);const m=`rotateX(${l?0:-r}deg) rotateY(${l?r:0}deg) translate3d(${p}px, ${v}px, ${g}px)`;if(f<=1&&f>-1&&(h=90*n+90*f,s&&(h=90*-n-90*f)),t.transform(m),o.slideShadows){let e=l?t.find(".swiper-slide-shadow-left"):t.find(".swiper-slide-shadow-top"),i=l?t.find(".swiper-slide-shadow-right"):t.find(".swiper-slide-shadow-bottom");0===e.length&&(e=c(`<div class="swiper-slide-shadow-${l?"left":"top"}"></div>`),t.append(e)),0===i.length&&(i=c(`<div class="swiper-slide-shadow-${l?"right":"bottom"}"></div>`),t.append(i)),e.length&&(e[0].style.opacity=Math.max(-f,0)),i.length&&(i[0].style.opacity=Math.max(f,0))}}if(t.css({"-webkit-transform-origin":`50% 50% -${a/2}px`,"-moz-transform-origin":`50% 50% -${a/2}px`,"-ms-transform-origin":`50% 50% -${a/2}px`,"transform-origin":`50% 50% -${a/2}px`}),o.shadow)if(l)d.transform(`translate3d(0px, ${n/2+o.shadowOffset}px, ${-n/2}px) rotateX(90deg) rotateZ(0deg) scale(${o.shadowScale})`);else{const e=Math.abs(h)-90*Math.floor(Math.abs(h)/90),t=1.5-(Math.sin(2*e*Math.PI/360)/2+Math.cos(2*e*Math.PI/360)/2),i=o.shadowScale,n=o.shadowScale/t,s=o.shadowOffset;d.transform(`scale3d(${i}, 1, ${n}) translate3d(0px, ${r/2+s}px, ${-r/2/n}px) rotateX(-90deg)`)}const f=N.isSafari||N.isWebView?-a/2:0;t.transform(`translate3d(0px,0,${f}px) rotateX(${this.isHorizontal()?0:h}deg) rotateY(${this.isHorizontal()?-h:0}deg)`)},setTransition(e){const{$el:t,slides:i}=this;i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}};const ae={setTranslate(){const e=this,{slides:t,rtlTranslate:i}=e;for(let n=0;n<t.length;n+=1){const r=t.eq(n);let s=r[0].progress;e.params.flipEffect.limitRotation&&(s=Math.max(Math.min(r[0].progress,1),-1));let a=-180*s,o=0,l=-r[0].swiperSlideOffset,u=0;if(e.isHorizontal()?i&&(a=-a):(u=l,l=0,o=-a,a=0),r[0].style.zIndex=-Math.abs(Math.round(s))+t.length,e.params.flipEffect.slideShadows){let t=e.isHorizontal()?r.find(".swiper-slide-shadow-left"):r.find(".swiper-slide-shadow-top"),i=e.isHorizontal()?r.find(".swiper-slide-shadow-right"):r.find(".swiper-slide-shadow-bottom");0===t.length&&(t=c(`<div class="swiper-slide-shadow-${e.isHorizontal()?"left":"top"}"></div>`),r.append(t)),0===i.length&&(i=c(`<div class="swiper-slide-shadow-${e.isHorizontal()?"right":"bottom"}"></div>`),r.append(i)),t.length&&(t[0].style.opacity=Math.max(-s,0)),i.length&&(i[0].style.opacity=Math.max(s,0))}r.transform(`translate3d(${l}px, ${u}px, 0px) rotateX(${o}deg) rotateY(${a}deg)`)}},setTransition(e){const t=this,{slides:i,activeIndex:n,$wrapperEl:r}=t;if(i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){let e=!1;i.eq(n).transitionEnd((function(){if(e)return;if(!t||t.destroyed)return;e=!0,t.animating=!1;const i=["webkitTransitionEnd","transitionend"];for(let e=0;e<i.length;e+=1)r.trigger(i[e])}))}}};const oe={setTranslate(){const{width:e,height:t,slides:i,$wrapperEl:n,slidesSizesGrid:r}=this,s=this.params.coverflowEffect,a=this.isHorizontal(),o=this.translate,l=a?e/2-o:t/2-o,u=a?s.rotate:-s.rotate,d=s.depth;for(let e=0,t=i.length;e<t;e+=1){const t=i.eq(e),n=r[e],o=(l-t[0].swiperSlideOffset-n/2)/n*s.modifier;let h=a?u*o:0,f=a?0:u*o,p=-d*Math.abs(o),v=s.stretch;"string"==typeof v&&-1!==v.indexOf("%")&&(v=parseFloat(s.stretch)/100*n);let g=a?0:v*o,m=a?v*o:0,y=1-(1-s.scale)*Math.abs(o);Math.abs(m)<.001&&(m=0),Math.abs(g)<.001&&(g=0),Math.abs(p)<.001&&(p=0),Math.abs(h)<.001&&(h=0),Math.abs(f)<.001&&(f=0),Math.abs(y)<.001&&(y=0);const b=`translate3d(${m}px,${g}px,${p}px)  rotateX(${f}deg) rotateY(${h}deg) scale(${y})`;if(t.transform(b),t[0].style.zIndex=1-Math.abs(Math.round(o)),s.slideShadows){let e=a?t.find(".swiper-slide-shadow-left"):t.find(".swiper-slide-shadow-top"),i=a?t.find(".swiper-slide-shadow-right"):t.find(".swiper-slide-shadow-bottom");0===e.length&&(e=c(`<div class="swiper-slide-shadow-${a?"left":"top"}"></div>`),t.append(e)),0===i.length&&(i=c(`<div class="swiper-slide-shadow-${a?"right":"bottom"}"></div>`),t.append(i)),e.length&&(e[0].style.opacity=o>0?o:0),i.length&&(i[0].style.opacity=-o>0?-o:0)}}if(f.pointerEvents||f.prefixedPointerEvents){n[0].style.perspectiveOrigin=l+"px 50%"}},setTransition(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}};const le={init(){const e=this,{thumbs:t}=e.params,i=e.constructor;t.swiper instanceof i?(e.thumbs.swiper=t.swiper,h.extend(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),h.extend(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):h.isObject(t.swiper)&&(e.thumbs.swiper=new i(h.extend({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick)},onThumbClick(){const e=this,t=e.thumbs.swiper;if(!t)return;const i=t.clickedIndex,n=t.clickedSlide;if(n&&c(n).hasClass(e.params.thumbs.slideThumbActiveClass))return;if(null==i)return;let r;if(r=t.params.loop?parseInt(c(t.clickedSlide).attr("data-swiper-slide-index"),10):i,e.params.loop){let t=e.activeIndex;e.slides.eq(t).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,t=e.activeIndex);const i=e.slides.eq(t).prevAll(`[data-swiper-slide-index="${r}"]`).eq(0).index(),n=e.slides.eq(t).nextAll(`[data-swiper-slide-index="${r}"]`).eq(0).index();r=void 0===i?n:void 0===n?i:n-t<t-i?n:i}e.slideTo(r)},update(e){const t=this,i=t.thumbs.swiper;if(!i)return;const n="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():i.params.slidesPerView,r=t.params.thumbs.autoScrollOffset,s=r&&!i.params.loop;if(t.realIndex!==i.realIndex||s){let a,o,l=i.activeIndex;if(i.params.loop){i.slides.eq(l).hasClass(i.params.slideDuplicateClass)&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,l=i.activeIndex);const e=i.slides.eq(l).prevAll(`[data-swiper-slide-index="${t.realIndex}"]`).eq(0).index(),n=i.slides.eq(l).nextAll(`[data-swiper-slide-index="${t.realIndex}"]`).eq(0).index();a=void 0===e?n:void 0===n?e:n-l==l-e?l:n-l<l-e?n:e,o=t.activeIndex>t.previousIndex?"next":"prev"}else a=t.realIndex,o=a>t.previousIndex?"next":"prev";s&&(a+="next"===o?r:-1*r),i.visibleSlidesIndexes&&i.visibleSlidesIndexes.indexOf(a)<0&&(i.params.centeredSlides?a=a>l?a-Math.floor(n/2)+1:a+Math.floor(n/2)-1:a>l&&(a=a-n+1),i.slideTo(a,e?0:void 0))}let a=1;const o=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(a=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(a=1),a=Math.floor(a),i.slides.removeClass(o),i.params.loop||i.params.virtual&&i.params.virtual.enabled)for(let e=0;e<a;e+=1)i.$wrapperEl.children(`[data-swiper-slide-index="${t.realIndex+e}"]`).addClass(o);else for(let e=0;e<a;e+=1)i.slides.eq(t.realIndex+e).addClass(o)}};const ce=[R,j,B,F,H,G,$,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create(){h.extend(this,{mousewheel:{enabled:!1,enable:Y.enable.bind(this),disable:Y.disable.bind(this),handle:Y.handle.bind(this),handleMouseEnter:Y.handleMouseEnter.bind(this),handleMouseLeave:Y.handleMouseLeave.bind(this),animateSlider:Y.animateSlider.bind(this),releaseScroll:Y.releaseScroll.bind(this),lastScrollTime:h.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[]}})},on:{init(){const e=this;!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy(){const e=this;e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create(){h.extend(this,{navigation:{init:W.init.bind(this),update:W.update.bind(this),destroy:W.destroy.bind(this),onNextClick:W.onNextClick.bind(this),onPrevClick:W.onPrevClick.bind(this)}})},on:{init(){this.navigation.init(),this.navigation.update()},toEdge(){this.navigation.update()},fromEdge(){this.navigation.update()},destroy(){this.navigation.destroy()},click(e){const t=this,{$nextEl:i,$prevEl:n}=t.navigation;if(t.params.navigation.hideOnClick&&!c(e.target).is(n)&&!c(e.target).is(i)){let e;i?e=i.hasClass(t.params.navigation.hiddenClass):n&&(e=n.hasClass(t.params.navigation.hiddenClass)),!0===e?t.emit("navigationShow",t):t.emit("navigationHide",t),i&&i.toggleClass(t.params.navigation.hiddenClass),n&&n.toggleClass(t.params.navigation.hiddenClass)}}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create(){h.extend(this,{pagination:{init:X.init.bind(this),render:X.render.bind(this),update:X.update.bind(this),destroy:X.destroy.bind(this),dynamicBulletIndex:0}})},on:{init(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange(){const e=this;(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange(){const e=this;e.params.loop||e.pagination.update()},slidesLengthChange(){const e=this;e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange(){const e=this;e.params.loop||(e.pagination.render(),e.pagination.update())},destroy(){this.pagination.destroy()},click(e){const t=this;if(t.params.pagination.el&&t.params.pagination.hideOnClick&&t.pagination.$el.length>0&&!c(e.target).hasClass(t.params.pagination.bulletClass)){!0===t.pagination.$el.hasClass(t.params.pagination.hiddenClass)?t.emit("paginationShow",t):t.emit("paginationHide",t),t.pagination.$el.toggleClass(t.params.pagination.hiddenClass)}}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create(){h.extend(this,{scrollbar:{init:K.init.bind(this),destroy:K.destroy.bind(this),updateSize:K.updateSize.bind(this),setTranslate:K.setTranslate.bind(this),setTransition:K.setTransition.bind(this),enableDraggable:K.enableDraggable.bind(this),disableDraggable:K.disableDraggable.bind(this),setDragPosition:K.setDragPosition.bind(this),getPointerPosition:K.getPointerPosition.bind(this),onDragStart:K.onDragStart.bind(this),onDragMove:K.onDragMove.bind(this),onDragEnd:K.onDragEnd.bind(this),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update(){this.scrollbar.updateSize()},resize(){this.scrollbar.updateSize()},observerUpdate(){this.scrollbar.updateSize()},setTranslate(){this.scrollbar.setTranslate()},setTransition(e){this.scrollbar.setTransition(e)},destroy(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create(){h.extend(this,{parallax:{setTransform:q.setTransform.bind(this),setTranslate:q.setTranslate.bind(this),setTransition:q.setTransition.bind(this)}})},on:{beforeInit(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition(e){this.params.parallax.enabled&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create(){const e=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(i=>{t[i]=Z[i].bind(e)}),h.extend(e,{zoom:t});let i=1;Object.defineProperty(e.zoom,"scale",{get:()=>i,set(t){if(i!==t){const i=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,n=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",t,i,n)}i=t}})},on:{init(){const e=this;e.params.zoom.enabled&&e.zoom.enable()},destroy(){this.zoom.disable()},touchStart(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap(e){const t=this;t.params.zoom.enabled&&t.zoom.enabled&&t.params.zoom.toggle&&t.zoom.toggle(e)},transitionEnd(){const e=this;e.zoom.enabled&&e.params.zoom.enabled&&e.zoom.onTransitionEnd()},slideChange(){const e=this;e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&e.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create(){h.extend(this,{lazy:{initialImageLoaded:!1,load:J.load.bind(this),loadInSlide:J.loadInSlide.bind(this)}})},on:{beforeInit(){const e=this;e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)},init(){const e=this;e.params.lazy.enabled&&!e.params.loop&&0===e.params.initialSlide&&e.lazy.load()},scroll(){const e=this;e.params.freeMode&&!e.params.freeModeSticky&&e.lazy.load()},resize(){const e=this;e.params.lazy.enabled&&e.lazy.load()},scrollbarDragMove(){const e=this;e.params.lazy.enabled&&e.lazy.load()},transitionStart(){const e=this;e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd(){const e=this;e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&e.lazy.load()},slideChange(){const e=this;e.params.lazy.enabled&&e.params.cssMode&&e.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create(){h.extend(this,{controller:{control:this.params.controller.control,getInterpolateFunction:Q.getInterpolateFunction.bind(this),setTranslate:Q.setTranslate.bind(this),setTransition:Q.setTransition.bind(this)}})},on:{update(){const e=this;e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},resize(){const e=this;e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},observerUpdate(){const e=this;e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},setTranslate(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create(){const e=this;h.extend(e,{a11y:{liveRegion:c(`<span class="${e.params.a11y.notificationClass}" aria-live="assertive" aria-atomic="true"></span>`)}}),Object.keys(ee).forEach(t=>{e.a11y[t]=ee[t].bind(e)})},on:{init(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create(){h.extend(this,{history:{init:te.init.bind(this),setHistory:te.setHistory.bind(this),setHistoryPopState:te.setHistoryPopState.bind(this),scrollToSlide:te.scrollToSlide.bind(this),destroy:te.destroy.bind(this)}})},on:{init(){const e=this;e.params.history.enabled&&e.history.init()},destroy(){const e=this;e.params.history.enabled&&e.history.destroy()},transitionEnd(){const e=this;e.history.initialized&&e.history.setHistory(e.params.history.key,e.activeIndex)},slideChange(){const e=this;e.history.initialized&&e.params.cssMode&&e.history.setHistory(e.params.history.key,e.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create(){h.extend(this,{hashNavigation:{initialized:!1,init:ie.init.bind(this),destroy:ie.destroy.bind(this),setHash:ie.setHash.bind(this),onHashCange:ie.onHashCange.bind(this)}})},on:{init(){const e=this;e.params.hashNavigation.enabled&&e.hashNavigation.init()},destroy(){const e=this;e.params.hashNavigation.enabled&&e.hashNavigation.destroy()},transitionEnd(){const e=this;e.hashNavigation.initialized&&e.hashNavigation.setHash()},slideChange(){const e=this;e.hashNavigation.initialized&&e.params.cssMode&&e.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create(){const e=this;h.extend(e,{autoplay:{running:!1,paused:!1,run:ne.run.bind(e),start:ne.start.bind(e),stop:ne.stop.bind(e),pause:ne.pause.bind(e),onVisibilityChange(){"hidden"===document.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===document.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd(t){e&&!e.destroyed&&e.$wrapperEl&&t.target===this&&(e.$wrapperEl[0].removeEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].removeEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd),e.autoplay.paused=!1,e.autoplay.running?e.autoplay.run():e.autoplay.stop())}}})},on:{init(){const e=this;e.params.autoplay.enabled&&(e.autoplay.start(),document.addEventListener("visibilitychange",e.autoplay.onVisibilityChange))},beforeTransitionStart(e,t){const i=this;i.autoplay.running&&(t||!i.params.autoplay.disableOnInteraction?i.autoplay.pause(e):i.autoplay.stop())},sliderFirstMove(){const e=this;e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd(){const e=this;e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy(){const e=this;e.autoplay.running&&e.autoplay.stop(),document.removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create(){h.extend(this,{fadeEffect:{setTranslate:re.setTranslate.bind(this),setTransition:re.setTransition.bind(this)}})},on:{beforeInit(){if("fade"!==this.params.effect)return;this.classNames.push(this.params.containerModifierClass+"fade");const e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};h.extend(this.params,e),h.extend(this.originalParams,e)},setTranslate(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create(){h.extend(this,{cubeEffect:{setTranslate:se.setTranslate.bind(this),setTransition:se.setTransition.bind(this)}})},on:{beforeInit(){if("cube"!==this.params.effect)return;this.classNames.push(this.params.containerModifierClass+"cube"),this.classNames.push(this.params.containerModifierClass+"3d");const e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};h.extend(this.params,e),h.extend(this.originalParams,e)},setTranslate(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create(){h.extend(this,{flipEffect:{setTranslate:ae.setTranslate.bind(this),setTransition:ae.setTransition.bind(this)}})},on:{beforeInit(){if("flip"!==this.params.effect)return;this.classNames.push(this.params.containerModifierClass+"flip"),this.classNames.push(this.params.containerModifierClass+"3d");const e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};h.extend(this.params,e),h.extend(this.originalParams,e)},setTranslate(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create(){h.extend(this,{coverflowEffect:{setTranslate:oe.setTranslate.bind(this),setTransition:oe.setTransition.bind(this)}})},on:{beforeInit(){"coverflow"===this.params.effect&&(this.classNames.push(this.params.containerModifierClass+"coverflow"),this.classNames.push(this.params.containerModifierClass+"3d"),this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},setTranslate(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create(){h.extend(this,{thumbs:{swiper:null,init:le.init.bind(this),update:le.update.bind(this),onThumbClick:le.onThumbClick.bind(this)}})},on:{beforeInit(){const{thumbs:e}=this.params;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange(){this.thumbs.swiper&&this.thumbs.update()},update(){this.thumbs.swiper&&this.thumbs.update()},resize(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate(){this.thumbs.swiper&&this.thumbs.update()},setTransition(e){const t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy(){const e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];void 0===M.use&&(M.use=M.Class.use,M.installModule=M.Class.installModule),M.use(ce);t.a=M},530:function(e,t,i){"use strict";function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(){s=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function u(e,t,i,r){var s=t&&t.prototype instanceof f?t:f,a=Object.create(s.prototype),o=new x(r||[]);return n(a,"_invoke",{value:E(e,i,o)}),a}function d(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h={};function f(){}function p(){}function v(){}var g={};c(g,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(C([])));y&&y!==t&&i.call(y,a)&&(g=y);var b=v.prototype=f.prototype=Object.create(g);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var r;n(this,"_invoke",{value:function(n,s){function a(){return new t((function(r,a){!function n(r,s,a,o){var l=d(e[r],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,o)}),(function(e){n("throw",e,a,o)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,o)}))}o(l.arg)}(n,s,r,a)}))}return r=r?r.then(a,a):a()}})}function E(e,t,i){var n="suspendedStart";return function(r,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw s;return{value:void 0,done:!0}}for(i.method=r,i.arg=s;;){var a=i.delegate;if(a){var o=S(a,i);if(o){if(o===h)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=d(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}function S(e,t){var i=t.method,n=e.iterator[i];if(void 0===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),h;var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(k.prototype),c(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,i,n,r,s){void 0===s&&(s=Promise);var a=new k(u(t,i,n,r),s);return e.isGeneratorFunction(i)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(b),c(b,l,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return a.type="throw",a.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),T(i),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;T(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:C(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),h}},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,i,n,r,s,a){try{var o=e[s](a),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,r)}function l(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var s=e.apply(t,i);function a(e){o(s,n,r,a,l,"next",e)}function l(e){o(s,n,r,a,l,"throw",e)}a(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function d(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,i){return(t=w(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=p(e);if(t){var r=p(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return y(this,i)}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=s.call(i)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return S(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function w(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}i.d(t,"a",(function(){return dn}));var T=i(358),x=i(393),C=i(367);function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){N(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function A(){A=function(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,n=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,i){return e[t]=i}}function c(e,t,i,r){var s=t&&t.prototype instanceof h?t:h,a=Object.create(s.prototype),o=new T(r||[]);return n(a,"_invoke",{value:k(e,i,o)}),a}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function h(){}function f(){}function p(){}var v={};l(v,s,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(x([])));m&&m!==t&&i.call(m,s)&&(v=m);var y=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var r;n(this,"_invoke",{value:function(n,s){function a(){return new t((function(r,a){!function n(r,s,a,o){var l=u(e[r],e,s);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,o)}),(function(e){n("throw",e,a,o)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,o)}))}o(l.arg)}(n,s,r,a)}))}return r=r?r.then(a,a):a()}})}function k(e,t,i){var n="suspendedStart";return function(r,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw s;return{value:void 0,done:!0}}for(i.method=r,i.arg=s;;){var a=i.delegate;if(a){var o=E(a,i);if(o){if(o===d)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=u(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}function E(e,t){var i=t.method,n=e.iterator[i];if(void 0===n)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var s=r.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function x(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(_.prototype),l(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,i,n,r,s){void 0===s&&(s=Promise);var a=new _(c(t,i,n,r),s);return e.isGeneratorFunction(i)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(y),l(y,o,"Generator"),l(y,s,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var n in t)i.push(n);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(i,n){return a.type="throw",a.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var o=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),w(i),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var r=n.arg;w(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:x(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},e}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t,i,n,r,s,a){try{var o=e[s](a),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,r)}function D(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var s=e.apply(t,i);function a(e){I(s,n,r,a,o,"next",e)}function o(e){I(s,n,r,a,o,"throw",e)}a(void 0)}))}}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J(n.key),n)}}function j(e,t,i){return t&&R(e.prototype,t),i&&R(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function N(e,t,i){return(t=J(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function z(e,t,i){return(z=H()?Reflect.construct.bind():function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&U(r,i.prototype),r}).apply(null,arguments)}function G(e){var t="function"==typeof Map?new Map:void 0;return(G=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return z(e,arguments,F(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),U(n,e)})(e)}function V(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}function W(e){var t=H();return function(){var i,n=F(e);if(t){var r=F(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Y(this,i)}}function X(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function K(){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=X(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}}).apply(this,arguments)}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Z(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return q(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw s}}}}function J(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var Q,ee=function(){function e(){M(this,e)}return j(e,null,[{key:"start",value:function(e){return e&&e.length?1===e.length&&e.end(0)-e.start(0)<1e-6||1===e.length&&e.start(0)<0?0:e.start(0):0}},{key:"end",value:function(e){return e&&e.length?1===e.length&&e.end(0)-e.start(0)<1e-6?0:e.end(e.length-1):0}},{key:"get",value:function(e){if(e)try{return e.buffered}catch(e){}}},{key:"buffers",value:function(e,t){if(!e||!e.length)return[];for(var i=[],n=0,r=e.length;n<r;n++){var s=i.length;if(s&&t){var a=i[s-1],o=a[1];if(e.start(n)-o<=t){var l=e.end(n);l>o&&(a[1]=l)}else i.push([e.start(n),e.end(n)])}else i.push([e.start(n),e.end(n)])}return i}},{key:"totalLength",value:function(e){return e&&e.length?e.reduce((function(e,t){return e+(t[1]-t[0])}),0):0}},{key:"info",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!t||!t.length)return{start:0,end:0,buffers:[]};for(var r=0,s=0,a=0,o=0,l=0,c=0,u=0,d=e.buffers(t,n),h=0,f=d.length;h<f;h++){var p=d[h];if(i+n>=p[0]&&i<=p[1])r=p[0],s=p[1],a=h;else{if(i+n<p[0]){o=p[0],l=p[1];break}i+n>p[1]&&(c=p[0],u=p[1])}}return{start:r,end:s,index:a,buffers:d,nextStart:o,nextEnd:l,prevStart:c,prevEnd:u,currentTime:i,behind:i-r,remaining:s?s-i:0,length:e.totalLength&&e.totalLength(d)}}}]),e}(),te="undefined"!=typeof window,ie="manifest",ne="network",re="network_timeout",se="network_forbidden",ae="network_notfound",oe="network_range_not_satisfiable",le="demux",ce="remux",ue="media",de="drm",he="other",fe="runtime",pe={FLV:"FLV",HLS:"HLS",MP4:"MP4",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",OPTION:"OPTION",DASH:"DASH",LICENSE:"LICENSE",CUSTOM_LICENSE:"CUSTOM_LICENSE",MSE_HIJACK:"MSE_HIJACK",EME_HIJACK:"EME_HIJACK",SIDX:"SIDX",NO_CANPLAY_ERROR:"NO_CANPLAY_ERROR",BUFFERBREAK_ERROR:"BUFFERBREAK_ERROR",WAITING_TIMEOUT_ERROR:"WAITING_TIMEOUT_ERROR",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_CODEC_NOT_SUPPORTED:"MEDIA_ERR_CODEC_NOT_SUPPORTED",MEDIA_ERR_URL_EMPTY:"MEDIA_ERR_URL_EMPTY"},ve=(N(Q={},ie,{HLS:1100,DASH:1200}),N(Q,ne,2100),N(Q,re,2101),N(Q,se,2103),N(Q,ae,2104),N(Q,oe,2116),N(Q,le,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),N(Q,ce,{FMP4:4100,MP4:4200}),N(Q,ue,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,EME_HIJACK:5301}),N(Q,de,{LICENSE:7100,CUSTOM_LICENSE:7200}),N(Q,he,8e3),N(Q,fe,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),Q),ge=function(e){B(i,e);var t=W(i);function i(e,n,r,s,a){var o;return M(this,i),(o=t.call(this,a||(null==r?void 0:r.message))).errorType=e===re?ne:e,o.originError=r,o.ext=s,o.errorCode=ve[e][n]||ve[e],o.errorMessage=o.message,o.errorCode||(o.errorType=he,o.errorCode=ve[o.errorType]),o}return j(i,null,[{key:"create",value:function(e,t,n,r,s){return e instanceof i?e:(e instanceof Error&&(n=e,e=""),e||(e=he),new i(e,t,n,r,s))}},{key:"network",value:function(e){var t;return new i(null!=e&&e.isTimeout?re:ne,null,e instanceof Error?e:null,{url:null==e?void 0:e.url,response:null==e?void 0:e.response,httpCode:null==e||null===(t=e.response)||void 0===t?void 0:t.status})}}]),i}(G(Error)),me={DEBUG:1,LOG:2,WARN:3,ERROR:4},ye=["Boolean","Number","String","Undefined","Null","Date","Object"],be=function(){function e(t,i){M(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),this.logCacheLevel=(null==i?void 0:i.logCacheLevel)||3,this.logMaxSize=(null==i?void 0:i.logMaxSize)||204800,this.logSize=0,this.logTextArray=[]}return j(e,[{key:"debug",value:function(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];this.logCache.apply(this,[me.DEBUG].concat(n)),e.disabled||(t=console).debug.apply(t,[this._prefix,_e()].concat(n))}},{key:"log",value:function(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];this.logCache.apply(this,[me.LOG].concat(n)),e.disabled||(t=console).log.apply(t,[this._prefix,_e()].concat(n))}},{key:"warn",value:function(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];this.logCache.apply(this,[me.WARN].concat(n)),e.disabled||(t=console).warn.apply(t,[this._prefix,_e()].concat(n))}},{key:"error",value:function(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];this.logCache.apply(this,[me.ERROR].concat(n)),e.disabled||(t=console).error.apply(t,[this._prefix,_e()].concat(n))}},{key:"logCache",value:function(e){if(!(e<this.logCacheLevel)){var t="";try{for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];var s=n.map((function(e){return Ee(e)}));t=this._prefix+_e()+JSON.stringify(s)}catch(e){return}if(e>=this.logCacheLevel&&(this.logSize+=t.length,this.logTextArray.push(t)),this.logSize>this.logMaxSize){var a=this.logTextArray.shift();this.logSize-=a.length}}}},{key:"getLogCache",value:function(){var e=this.logTextArray.join("\n");return this.reset(),e}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var t;e.disabled||(console.group(this._prefix),(t=console).table.apply(t,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(e){this.logCacheLevel=e}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();function _e(){return(new Date).toLocaleString()}function ke(e){if("object"!==L(e))return e;var t=Object.prototype.toString.call(e).slice(8,-1);switch(t){case"Array":case"Uint8Array":case"ArrayBuffer":return t+"["+e.length+"]";case"Object":return"{}";default:return t}}function Ee(e,t,i){i||(i=1),t||(t=2);var n={};if(!e||"object"!==L(e))return e;var r=Object.prototype.toString.call(e).slice(8,-1);if(!ye.includes(r))return r;if(!(i>t)){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i===t?n[s]=ke(e[s]):"object"===L(e[s])?n[s]=Ee(e[s],t,i+1):n[s]=e[s]);return n}}function Se(){var e,t,i=new Promise((function(i,n){e=i,t=n}));return i.used=!1,i.resolve=function(){return i.used=!0,e.apply(void 0,arguments)},i.reject=function(){return i.used=!0,t.apply(void 0,arguments)},i}function we(){try{return parseInt(performance.now(),10)}catch(e){return(new Date).getTime()}}N(be,"disabled",!0);var Te=function(e){try{return JSON.stringify(e)}catch(e){return""}};function xe(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{return te?e&&"undefined"!=typeof ManagedMediaSource?ManagedMediaSource:window.MediaSource:null}catch(e){}}function Ce(e){return/ManagedMediaSource/gi.test(Object.prototype.toString.call(e))}var Oe="appendBuffer",Pe="removeBuffer",Ae="updateDuration",Le=(Error,function(){function e(t,i){var n=this;M(this,e),N(this,"media",null),N(this,"mediaSource",null),N(this,"_openPromise",Se()),N(this,"_queue",Object.create(null)),N(this,"_sourceBuffer",Object.create(null)),N(this,"_mseFullFlag",{}),N(this,"_st",0),N(this,"_opst",0),N(this,"_logger",null),N(this,"_config",null),N(this,"_url",null),N(this,"_onStartStreaming",(function(){n._logger.debug("startstreaming")})),N(this,"_onEndStreaming",(function(){n._logger.debug("endstreaming")})),N(this,"_onSBUpdateEnd",(function(e){var t=n._queue[e];if(t){var i=t[0];if((null==i?void 0:i.opName)!==Ae&&t.shift(),i){var r,s=we()-n._opst;n._logger.debug("UpdateEnd(".concat(e,"/").concat(i.opName,")"),Te(function(e){var t=[];if(e instanceof TimeRanges)for(var i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}(null===(r=n._sourceBuffer[e])||void 0===r?void 0:r.buffered)),s,i.context),i.promise.resolve({name:i.opName,context:i.context,costtime:s}),n._startQueue(e)}}})),N(this,"_onSBUpdateError",(function(e,t){var i=n._queue[e];if(i){var r=i[0];r&&(n._logger.error("UpdateError",e,r.opName,r.context),r.promise.reject(new ge(ue,pe.MSE_APPEND_BUFFER,t)))}})),this._config=Object.assign(e.getDefaultConfig(),i),t&&this.bindMedia(t),this._logger=new be("MSE"),this._config.openLog&&be.enable()}var t,i,n;return j(e,[{key:"isOpened",get:function(){var e;return"open"===(null===(e=this.mediaSource)||void 0===e?void 0:e.readyState)}},{key:"hasOpTasks",get:function(){var e=this,t=!1;return Object.keys(this._queue).forEach((function(i){var n=e._queue[i];Array.isArray(n)&&(t||(t=n.length>0))})),t}},{key:"url",get:function(){return this._url}},{key:"duration",get:function(){var e;return(null===(e=this.mediaSource)||void 0===e?void 0:e.duration)||-1}},{key:"isEnded",get:function(){return!!this.mediaSource&&"ended"===this.mediaSource.readyState}},{key:"streaming",get:function(){return!Ce(this.mediaSource)||this.mediaSource.streaming}},{key:"isFull",value:function(t){return t?this._mseFullFlag[t]:this._mseFullFlag[e.VIDEO]}},{key:"updateDuration",value:function(e){var t=this,i=this.mediaSource&&this.mediaSource.duration>e;if(this.mediaSource&&this.mediaSource.duration>e){var n=0;if(Object.keys(this._sourceBuffer).forEach((function(e){try{n=Math.max(t.bufferEnd(e)||0,n)}catch(e){}})),e<n)return Promise.resolve()}return this._enqueueBlockingOp((function(){t.isEnded?t._logger.debug("setDuration but ended"):t.mediaSource&&(t.mediaSource.duration=e,t._logger.debug("setDuration",e))}),Ae,{isReduceDuration:i})}},{key:"open",value:function(){var e=this;if(this._openPromise.used&&!this.isOpened&&this.mediaSource){var t=this.mediaSource;t.addEventListener("sourceopen",(function i(){var n=we()-e._st;e._logger.debug("sourceopen",n),t.removeEventListener("sourceopen",i),e._openPromise.resolve({costtime:n})})),this._openPromise=Se()}return this._openPromise}},{key:"bindMedia",value:(n=D(A().mark((function e(t){var i,n,r,s,a=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mediaSource&&!this.media){e.next=3;break}return e.next=3,this.unbindMedia();case 3:if(i=xe(this._config.preferMMS),t&&i){e.next=6;break}throw new Error("Param media or MediaSource does not exist");case 6:return this.media=t,n=this.mediaSource=new i,r=Ce(n),this._st=we(),s=function e(){var i=we()-a._st;a._logger.debug("sourceopen"),n.removeEventListener("sourceopen",e),URL.revokeObjectURL(t.src),a._openPromise.resolve({costtime:i})},n.addEventListener("sourceopen",s),r&&(n.addEventListener("startstreaming",this._onStartStreaming),n.addEventListener("endstreaming",this._onEndStreaming)),this._url=URL.createObjectURL(n),t.src=this._url,t.disableRemotePlayback=r,e.abrupt("return",this._openPromise);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"unbindMedia",value:(i=D(A().mark((function e(){var t,i,n,r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._openPromise.used||this._openPromise.resolve(),t=this.mediaSource){if(Object.keys(this._queue).forEach((function(e){var t=r._queue[e];t&&t.forEach((function(e){var t,i;return null===(t=e.promise)||void 0===t||null===(i=t.resolve)||void 0===i?void 0:i.call(t)}))})),i=!!this.media&&this.media.readyState>=1,n="open"===t.readyState,i&&n)try{t.endOfStream()}catch(e){}Object.keys(this._sourceBuffer).forEach((function(e){try{t.removeSourceBuffer(r._sourceBuffer[e])}catch(e){}})),Ce(t)&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming))}if(this.media){this.media.disableRemotePlayback=!1,this.media.removeAttribute("src");try{this.media.load()}catch(e){}this.media=null}this.mediaSource=null,this._openPromise=Se(),this._queue=Object.create(null),this._sourceBuffer=Object.create(null);case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"createSource",value:function(e,t){if(!this._sourceBuffer[e]&&this.mediaSource){var i;try{i=this._sourceBuffer[e]=this.mediaSource.addSourceBuffer(t)}catch(e){throw new ge(ue,pe.MSE_ADD_SB,e)}i.mimeType=t,i.addEventListener("updateend",this._onSBUpdateEnd.bind(this,e)),i.addEventListener("error",this._onSBUpdateError.bind(this,e))}}},{key:"changeType",value:function(e,t){var i=this,n=this._sourceBuffer[e];return this.mediaSource&&n&&n.mimeType!==t?"function"!=typeof n.changeType?Promise.reject():this._enqueueOp(e,(function(){n.changeType(t),n.mimeType=t,i._onSBUpdateEnd(e)}),"changeType",{mimeType:t}):Promise.resolve()}},{key:"createOrChangeSource",value:function(e,t){return this.createSource(e,t),this.changeType(e,t)}},{key:"append",value:function(e,t,i){var n=this;return t&&t.byteLength&&this._sourceBuffer[e]?this._enqueueOp(e,(function(){var r;n.mediaSource&&!n.media.error&&(n._logger.debug("MSE APPEND START",i),n._opst=we(),null===(r=n._sourceBuffer[e])||void 0===r||r.appendBuffer(t))}),Oe,i):Promise.resolve()}},{key:"remove",value:function(e,t,i,n){var r=this,s=!1;return this._mseFullFlag[e]&&(s=!0),this._enqueueOp(e,(function(){if(r.mediaSource&&!r.media.error){var s=r._sourceBuffer[e];t>=i||!s?r._onSBUpdateEnd(e):(r._opst=we(),r._logger.debug("MSE REMOVE START",e,t,i,n),s.remove(t,i))}}),Pe,n,s)}},{key:"clearBuffer",value:function(e,t){var i,n=this;return Object.keys(this._sourceBuffer).forEach((function(r){i=n.remove(r,e,t)})),i||Promise.resolve()}},{key:"clearAllBuffer",value:function(){var e,t=this;return Object.keys(this._sourceBuffer).forEach((function(i){var n=t._sourceBuffer[i];e=t.remove(i,0,ee.end(ee.get(n)))})),e}},{key:"clearOpQueues",value:function(e,t){var i;this._logger.debug("MSE clearOpQueue START");var n=this._queue[e];if(t&&n)this._queue[e]=[];else if(n&&n[e]&&!(n.length<5)){var r=[];n.forEach((function(e){e.context&&e.context.isinit&&r.push(e)})),this._queue[e]=n.slice(0,2),r.length>0&&(i=this._queue[e]).push.apply(i,r)}}},{key:"endOfStream",value:function(e){var t=this;return this.mediaSource&&"open"===this.mediaSource.readyState?this._enqueueBlockingOp((function(){var i=t.mediaSource;i&&"open"===i.readyState&&(t._logger.debug("MSE endOfStream START"),e?i.endOfStream(e):i.endOfStream())}),"endOfStream"):Promise.resolve()}},{key:"setLiveSeekableRange",value:function(e,t){var i=this.mediaSource;e<0||t<e||null==i||!i.setLiveSeekableRange||"open"!==i.readyState||i.setLiveSeekableRange(e,t)}},{key:"getSourceBuffer",value:function(e){return this._sourceBuffer[e]}},{key:"buffered",value:function(e){return ee.get(this._sourceBuffer[e])}},{key:"bufferStart",value:function(e){return ee.start(this.buffered(e))}},{key:"bufferEnd",value:function(e){return ee.end(this.buffered(e))}},{key:"_enqueueOp",value:function(e,t,i,n,r){var s=this;if(!this.mediaSource)return Promise.resolve();var a=this._queue[e]=this._queue[e]||[],o={exec:t,promise:Se(),opName:i,context:n};return r?(a.splice(0,0,o),this._mseFullFlag[e]=!1,this._startQueue(e)):a.push(o),this.isOpened||this.isEnded?1===a.length&&this._startQueue(e):this._openPromise.then((function(){1===a.length&&s._startQueue(e)})),o.promise}},{key:"_enqueueBlockingOp",value:(t=D(A().mark((function e(t,i,n){var r,s,a=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mediaSource){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if((r=Object.keys(this._sourceBuffer)).length){e.next=5;break}return e.abrupt("return",t());case 5:return s=[],r.forEach((function(e){var t=a._queue[e],r=Se();s.push(r),t.push({exec:function(){r.resolve()},promise:r,opName:i,context:n}),1===t.length&&a._startQueue(e)})),e.abrupt("return",Promise.all(s).then((function(){try{return t()}finally{r.forEach((function(e){var t=a._queue[e],i=a._sourceBuffer[e];null==t||t.shift(),i&&i.updating||a._startQueue(e)}))}})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,i,n){return t.apply(this,arguments)})},{key:"_startQueue",value:function(e){var t=this._queue[e];if(t){var i=t[0];if(i&&!this._mseFullFlag[e])try{i.exec()}catch(n){n&&n.message&&n.message.indexOf("SourceBuffer is full")>=0?(this._mseFullFlag[e]=!0,this._logger.error("[MSE error],  context,",i.context," ,name,",i.opName,",err,SourceBuffer is full"),i.promise.reject(new ge(ue,pe.MSE_FULL,n))):(this._logger.error(n),i.promise.reject(new ge(ue,pe.MSE_OTHER,n)),t.shift(),this._startQueue(e))}}}},{key:"setTimeoffset",value:function(e,t,i){var n=this;return this._enqueueOp(e,(function(){t<0&&(t+=.001),n._sourceBuffer[e].timestampOffset=t,n._onSBUpdateEnd(e)}),"setTimeoffset",i)}},{key:"abort",value:function(e,t){var i=this;return this.isOpened?this._enqueueOp(e,(function(){i._sourceBuffer[e].abort(),i._onSBUpdateEnd(e)}),"abort",t):Promise.resolve()}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"',t=xe();if(!t)return!1;try{return t.isTypeSupported(e)}catch(t){return this._logger.error(e,t),!1}}},{key:"isMMSOnly",value:function(){return"undefined"!=typeof ManagedMediaSource&&"undefined"==typeof MediaSource}},{key:"getDefaultConfig",value:function(){return{openLog:!1,preferMMS:!1}}}]),e}());N(Le,"VIDEO","video"),N(Le,"AUDIO","audio");var Ie={ERROR:"error",TTFB:"core.ttfb",LOAD_START:"core.loadstart",LOAD_RESPONSE_HEADERS:"core.loadresponseheaders",LOAD_COMPLETE:"core.loadcomplete",LOAD_RETRY:"core.loadretry",SOURCEBUFFER_CREATED:"core.sourcebuffercreated",MEDIASOURCE_OPENED:"core.mediasourceopened",ANALYZE_DURATION_EXCEEDED:"core.analyzedurationexceeded",REMOVE_BUFFER:"core.removebuffer",BUFFEREOS:"core.buffereos",KEYFRAME:"core.keyframe",CHASEFRAME:"core.chaseframe",METADATA_PARSED:"core.metadataparsed",SEI:"core.sei",SEI_IN_TIME:"core.seiintime",FLV_SCRIPT_DATA:"core.flvscriptdata",LOWDECODE:"core.lowdecode",SWITCH_URL_SUCCESS:"core.switchurlsuccess",SWITCH_URL_FAILED:"core.switchurlfailed",SPEED:"core.speed",HLS_MANIFEST_LOADED:"core.hlsmanifestloaded",HLS_LEVEL_LOADED:"core.hlslevelloaded",DEMUXED_TRACK:"core.demuxedtrack",STREAM_EXCEPTION:"core.streamexception",LARGE_AV_FIRST_FRAME_GAP_DETECT:"LARGE_AV_FIRST_FRAME_GAP_DETECT",LARGE_VIDEO_DTS_GAP_DETECT:"LARGE_VIDEO_DTS_GAP_DETECT",LARGE_AUDIO_DTS_GAP_DETECT:"LARGE_AUDIO_DTS_GAP_DETECT",AUDIO_GAP_DETECT:"AUDIO_GAP_DETECT",AUDIO_OVERLAP_DETECT:"AUDIO_OVERLAP_DETECT",MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT:"MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT",REAL_TIME_SPEED:"real_time_speed"},De=i(365),Me=i.n(De);function Re(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if((t=t.filter(Boolean)).length<2)return t[0];var n=new Uint8Array(t.reduce((function(e,t){return e+t.byteLength}),0)),r=0;return t.forEach((function(e){n.set(e,r),r+=e.byteLength})),n}function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}var Ne=function(){function e(t){var i=this;M(this,e),N(this,"_seiSet",new Set),this.emitter=t,t.on(Ie.SEI,(function(e){e&&i._seiSet.add(e)}))}return j(e,[{key:"throw",value:function(e,t){var i=this;if(null!=e&&this._seiSet.size){var n=e-.2,r=e+.2,s=[];this._seiSet.forEach((function(e){e.time>=n&&e.time<=r&&s.push(e)})),s.forEach((function(e){i._seiSet.delete(e),i.emitter.emit(Ie.SEI_IN_TIME,e)})),t&&this._seiSet.forEach((function(t){t.time<e-5&&i._seiSet.delete(t)}))}}},{key:"reset",value:function(){this._seiSet.clear()}}]),e}(),Be=function(){function e(){M(this,e),N(this,"_prevCurrentTime",0)}return j(e,[{key:"do",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(e){var r=e.currentTime,s=0;if(this._prevCurrentTime===r){var a=ee.info(ee.get(e),r);if(!a.buffers.length)return;i&&a.nextStart||a.nextStart&&a.nextStart-r<t?s=a.nextStart+.1:a.end&&a.end-r>n&&!e.seeking&&(s=r+.1)}this._prevCurrentTime=r,s&&r!==s&&(e.currentTime=s)}}}]),e}(),Fe=function(){function e(t){M(this,e),N(this,"encodeType",""),N(this,"audioCodec",""),N(this,"videoCodec",""),N(this,"domain",""),N(this,"fps",0),N(this,"bitrate",0),N(this,"width",0),N(this,"height",0),N(this,"samplerate",0),N(this,"channelCount",0),N(this,"gop",0),N(this,"_bitsAccumulateSize",0),N(this,"_bitsAccumulateDuration",0),N(this,"_startGopId",-1),this._timescale=t}return j(e,[{key:"getStats",value:function(){return{encodeType:this.encodeType,audioCodec:this.audioCodec,videoCodec:this.videoCodec,domain:this.domain,fps:this.fps,bitrate:this.bitrate,width:this.width,height:this.height,samplerate:this.samplerate,channelCount:this.channelCount,gop:this.gop}}},{key:"setEncodeType",value:function(e){this.encodeType=e}},{key:"setFpsFromScriptData",value:function(e){var t,i=e.data,n=null==i||null===(t=i.onMetaData)||void 0===t?void 0:t.framerate;n&&n>0&&n<100&&(this.fps=n)}},{key:"setVideoMeta",value:function(e){if(this.width=e.width,this.height=e.height,this.videoCodec=e.codec,this.encodeType=e.codecType,e.fpsNum&&e.fpsDen){var t=e.fpsNum/e.fpsDen;t>0&&t<100&&(this.fps=t)}}},{key:"setAudioMeta",value:function(e){this.audioCodec=e.codec,this.samplerate=e.sampleRate,this.channelCount=e.channelCount}},{key:"setDomain",value:function(e){this.domain=e.split("/").slice(2,3)[0]}},{key:"updateBitrate",value:function(e){var t=this;if((!this.fps||this.fps>=100)&&e.length){var i=e.reduce((function(e,t){return e+t.duration}),0)/e.length;this.fps=Math.round(this._timescale/i)}e.forEach((function(e){-1===t._startGopId&&(t._startGopId=e.gopId),e.gopId===t._startGopId&&t.gop++,t._bitsAccumulateDuration+=e.duration/(t._timescale/1e3),t._bitsAccumulateSize+=e.units.reduce((function(e,t){return e+t.length}),0),t._bitsAccumulateDuration>=1e3&&(t.bitrate=8*t._bitsAccumulateSize,t._bitsAccumulateDuration=0,t._bitsAccumulateSize=0)}))}}]),e}(),Ue=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;M(this,e),N(this,"_core",null),N(this,"_samples",[]),this._core=t,this._timescale=i,this._stats=new Fe(i),this._bindEvents()}return j(e,[{key:"getStats",value:function(){var e,t,i,n,r,s,a,o=(null===(e=this._core)||void 0===e?void 0:e.media)||{},l=o.currentTime,c=void 0===l?0:l,u=o.decodeFps,d=void 0===u?0:u;return P(P({},this._stats.getStats()),{},{downloadSpeed:(null===(t=this._core)||void 0===t||null===(i=t.speedInfo)||void 0===i?void 0:i.call(t).speed)||0,avgSpeed:(null===(n=this._core)||void 0===n||null===(r=n.speedInfo)||void 0===r?void 0:r.call(n).avgSpeed)||0,currentTime:c,bufferEnd:(null===(s=this._core)||void 0===s||null===(a=s.bufferInfo())||void 0===a?void 0:a.remaining)||0,decodeFps:d})}},{key:"_bindEvents",value:function(){var e=this;this._core.on(Ie.DEMUXED_TRACK,(function(t){var i=t.videoTrack;return e._stats.updateBitrate(i.samples)})),this._core.on(Ie.FLV_SCRIPT_DATA,(function(t){e._stats.setFpsFromScriptData(t)})),this._core.on(Ie.METADATA_PARSED,(function(t){"video"===t.type?e._stats.setVideoMeta(t.track):e._stats.setAudioMeta(t.track)})),this._core.on(Ie.TTFB,(function(t){e._stats.setDomain(t.responseUrl)}))}},{key:"reset",value:function(){this._samples=[],this._stats=new Fe(this._timescale)}}]),e}();function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,et(n.key),n)}}function Ge(e,t,i){return t&&ze(e.prototype,t),i&&ze(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ve(e,t,i){return(t=et(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return(We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ye(e);if(t){var r=Ye(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Xe(this,i)}}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,s,a,o=[],l=!0,c=!1;try{if(s=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=s.call(i)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}(e,t)||Je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e){return function(e){if(Array.isArray(e))return Qe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){if(e){if("string"==typeof e)return Qe(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Qe(e,t):void 0}}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function et(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var tt=function(){function e(t){He(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]")}return Ge(e,[{key:"warn",value:function(){var t;if(!e.disabled){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];(t=console).warn.apply(t,[this._prefix].concat(n))}}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();Ve(tt,"disabled",!0);var it="video",nt="audio",rt="metadata",st="avc",at="hevc",ot="aac",lt="g7110a",ct="g7110m",ut="LARGE_AV_SHIFT",dt="LARGE_VIDEO_GAP",ht="LARGE_VIDEO_GAP_BETWEEN_CHUNK",ft="LARGE_AUDIO_GAP",pt="AUDIO_FILLED",vt="AUDIO_DROPPED",gt=Ge((function e(t,i,n,r){He(this,e),Ve(this,"duration",1024),Ve(this,"flag",{dependsOn:2,isNonSyncSample:0}),Ve(this,"keyframe",!0),this.originPts=this.pts=this.dts=t,this.data=i,this.size=i.byteLength,this.sampleOffset=r,n&&(this.duration=n)})),mt="undefined"!=typeof window,yt=mt&&navigator.userAgent.toLocaleLowerCase(),bt=mt&&/^((?!chrome|android).)*safari/.test(yt),_t=mt&&yt.includes("firefox"),kt=mt&&yt.includes("android"),Et=function(){function e(){He(this,e)}return Ge(e,null,[{key:"getRateIndexByRate",value:function(t){return e.FREQ.indexOf(t)}},{key:"parseADTS",value:function(t,i){for(var n=t.length,r=0;r+2<n&&(255!==t[r]||240!=(246&t[r+1]));)r++;if(!(r>=n)){var s=r,a=[],o=(60&t[r+2])>>>2,l=e.FREQ[o];if(!l)throw new Error("Invalid sampling index: ".concat(o));for(var c,u,d=1+((192&t[r+2])>>>6),h=(1&t[r+2])<<2|(192&t[r+3])>>>6,f=e._getConfig(o,h,d),p=f.config,v=f.codec,g=0,m=e.getFrameDuration(l);r+7<n;)if(255===t[r]&&240==(246&t[r+1])){if(n-r<(u=(3&t[r+3])<<11|t[r+4]<<3|(224&t[r+5])>>5))break;c=2*(1&~t[r+1]),a.push({pts:i+g*m,data:t.subarray(r+7+c,r+u)}),g++,r+=u}else r++;return{skip:s,remaining:r>=n?void 0:t.subarray(r),frames:a,samplingFrequencyIndex:o,sampleRate:l,objectType:d,channelCount:h,codec:v,config:p,originCodec:"mp4a.40.".concat(d)}}}},{key:"parseAudioSpecificConfig",value:function(t){if(t.length){var i=t[0]>>>3,n=(7&t[0])<<1|t[1]>>>7,r=(120&t[1])>>>3,s=e.FREQ[n];if(s){var a=e._getConfig(n,r,i);return{samplingFrequencyIndex:n,sampleRate:s,objectType:i,channelCount:r,config:a.config,codec:a.codec,originCodec:"mp4a.40.".concat(i)}}}}},{key:"getFrameDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return 1024*t/e}},{key:"_getConfig",value:function(e,t,i){var n,r,s=[];return _t?e>=6?(n=5,r=e-3):(n=2,r=e):kt?(n=2,r=e):(n=2===i||5===i?i:5,r=e,e>=6?r=e-3:1===t&&(n=2,r=e)),s[0]=n<<3,s[0]|=(14&e)>>1,s[1]=(1&e)<<7,s[1]|=t<<3,5===n&&(s[1]|=(14&r)>>1,s[2]=(1&r)<<7,s[2]|=8,s[3]=0),{config:s,codec:"mp4a.40.".concat(n)}}},{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}]),e}();Ve(Et,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);var St=function(){function e(t,i,n){He(this,e),this.videoTrack=t,this.audioTrack=i,this.metadataTrack=n,this._baseDts=-1,this._baseDtsInited=!1,this._audioNextPts=void 0,this._videoNextDts=void 0,this._audioTimestampBreak=!1,this._videoTimestampBreak=!1,this._lastAudioExceptionGapDot=0,this._lastAudioExceptionOverlapDot=0,this._lastAudioExceptionLargeGapDot=0}return Ge(e,[{key:"fix",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=Math.round(9e4*t);var r=this.videoTrack,s=this.audioTrack,a=r.samples,o=s.samples;if(a.length||o.length){var l=a[0],c=o[0],u=0;if(a.length&&o.length&&(u=l.dts-c.pts),this._baseDtsInited||this._calculateBaseDts(this.audioTrack,this.videoTrack),i&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t),!n){this._videoNextDts=u>0?t+u:t,this._audioNextPts=u>0?t:t-u;var d=l?l.dts-this._baseDts-this._videoNextDts:0,h=c?c.pts-this._baseDts-this._audioNextPts:0;Math.abs(d||h)>9e4&&(this._calculateBaseDts(this.audioTrack,this.videoTrack),this._baseDts-=t)}if(this._resetBaseDtsWhenStreamBreaked(),this._fixAudio(s),this._fixVideo(r),this.metadataTrack.exist()){var f=this.metadataTrack.timescale;this.metadataTrack.seiSamples.forEach((function(t){t.pts=t.originPts-e._baseDts,t.time=Math.max(0,t.pts)/f}))}r.samples.length&&(r.baseMediaDecodeTime=r.samples[0].dts),s.samples.length&&(s.baseMediaDecodeTime=s.samples[0].pts*s.timescale/9e4)}}},{key:"_fixVideo",value:function(e){var t=this,i=e.samples;if(i.length){if(i.forEach((function(e){e.dts-=t._baseDts,e.pts-=t._baseDts})),void 0===this._videoNextDts){var n=i[0];this._videoNextDts=n.dts}var r,s,a=i.length,o=0,l=i[0],c=i[1],u=this._videoNextDts-l.dts;if(Math.abs(u)>45e3)if(e.warnings.push({type:ht,nextDts:this._videoNextDts/90,firstSampleDts:l.dts/90,nextSampleDts:((null===(r=i[1])||void 0===r?void 0:r.dts)||0)/90,sampleDuration:u/90}),l.dts+=u,l.pts+=u,c&&Math.abs(c.dts-l.dts)>9e4)this._videoTimestampBreak=!0,i.forEach((function(e,t){0!==t&&(e.dts+=u,e.pts+=u)}));else for(var d=1;d<a-1;d++){var h,f=null===(h=i[d])||void 0===h?void 0:h.dts,p=i[d-1].dts;f&&f-p<0&&(i[d].dts+=u,i[d].pts+=u)}if(e.fpsNum&&e.fpsDen&&(s=e.timescale*(e.fpsDen/e.fpsNum)),s<900&&(s=0),!s){var v=e.samples[0],g=e.samples[1];s=1===a?9e3:Math.floor(g.dts-v.dts)}for(var m=0;m<a;m++){var y=i[m].dts,b=i[m+1];if((o=m<a-1?b.dts-y:i[m-1]?Math.min(y-i[m-1].dts,s):s)>9e4||o<0){this._videoTimestampBreak=!0,o=this._audioTimestampBreak?s:Math.max(o,2700);var _=this._audioNextPts||0;b&&b.dts>_&&(o=s),e.warnings.push({type:dt,time:y/e.timescale,dts:y,originDts:i[m].originDts,nextDts:this._videoNextDts,sampleDuration:o,refSampleDuration:s})}i[m].duration=o,this._videoNextDts+=o}}}},{key:"_fixAudio",value:function(e){var t=this,i=e.samples;i.length&&(i.forEach((function(e){e.pts-=t._baseDts,e.dts=e.pts})),this._doFixAudioInternal(e,i,9e4))}},{key:"_calculateBaseDts",value:function(e,t){var i=e.samples,n=t.samples;if(!i.length&&!n.length)return!1;var r=1/0,s=1/0;i.length&&(e.baseDts=r=i[0].pts),n.length&&(t.baseDts=s=n[0].dts),this._baseDts=Math.min(r,s);var a=s-r;return Number.isFinite(a)&&Math.abs(a)>45e3&&t.warnings.push({type:ut,videoBaseDts:s,audioBasePts:r,baseDts:this._baseDts,delta:a}),this._baseDtsInited=!0,!0}},{key:"_resetBaseDtsWhenStreamBreaked",value:function(){if(this._baseDtsInited&&this._videoTimestampBreak&&this._audioTimestampBreak){if(!this._calculateBaseDts(this.audioTrack,this.videoTrack))return;this._baseDts-=Math.min(this._audioNextPts,this._videoNextDts),this._audioLastSample=null,this._videoLastSample=null,this._videoTimestampBreak=!1,this._audioTimestampBreak=!1}}},{key:"_doFixAudioInternal",value:function(e,t,i){e.sampleDuration||(e.sampleDuration=Et.getFrameDuration(e.timescale,i));var n=e.sampleDuration;if(void 0===this._audioNextPts){var r=t[0];this._audioNextPts=r.pts}for(var s=0;s<t.length;s++){var a=this._audioNextPts,o=t[s],l=o.pts-a;if(!this._audioTimestampBreak&&l>=3*n&&l<=9e4&&!bt){var c=Et.getSilentFrame(e.codec,e.channelCount)||t[0].data.subarray(),u=Math.floor(l/n);Math.abs(o.pts-this._lastAudioExceptionGapDot)>45e4&&(this._lastAudioExceptionGapDot=o.pts),e.warnings.push({type:pt,pts:o.pts/90,originPts:o.originPts,count:u,nextPts:a/90,refSampleDuration:n});for(var d=0;d<u;d++){var h=new gt(Math.floor(a),c);h.originPts=Math.floor(this._baseDts+a),t.splice(s,0,h),this._audioNextPts+=n,s++}s--}else l<=-3*n&&l>=-9e4?(Math.abs(o.pts-this._lastAudioExceptionOverlapDot)>45e4&&(this._lastAudioExceptionOverlapDot=o.pts,e.warnings.push({type:vt,pts:o.pts/90,originPts:o.originPts,nextPts:a/90,refSampleDuration:n})),t.splice(s,1),s--):(Math.abs(l)>=9e4&&(this._audioTimestampBreak=!0,Math.abs(o.pts-this._lastAudioExceptionLargeGapDot)>45e4&&(this._lastAudioExceptionLargeGapDot=o.pts,e.warnings.push({type:ft,time:o.pts/1e3,pts:o.pts/90,originPts:o.originPts,nextPts:a/90,sampleDuration:l,refSampleDuration:n}))),o.dts=o.pts=a,this._audioNextPts+=n)}}}]),e}();function wt(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t=t.filter(Boolean);var n=new Uint8Array(t.reduce((function(e,t){return e+t.byteLength}),0)),r=0;return t.forEach((function(e){n.set(e,r),r+=e.byteLength})),n}var Tt=Math.pow(2,32);function xt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<8)+(e[t+1]||0)}function Ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<24>>>0)+(e[t+1]<<16)+(e[t+2]<<8)+(e[t+3]||0)}function Ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ct(e,t)*Tt+Ct(e,t+4)}function Pt(e){for(var t,i="avc1.",n=0;n<3;n++)(t=e[n].toString(16)).length<2&&(t="0".concat(t)),i+=t;return i}function At(e){if(!Array.isArray(e)){for(var t=[],i="",n=0;n<e.length;n++)n%2&&(i=e[n-1]+e[n],t.push(parseInt(i,16)),i="");return t}return e.map((function(e){return parseInt(e,16)}))}var Lt=function(){function e(){He(this,e)}return Ge(e,null,[{key:"parseAnnexB",value:function(e){for(var t=e.length,i=2,n=0;null!==e[i]&&void 0!==e[i]&&1!==e[i];)i++;if((n=++i+2)>=t)return[];for(var r=[];n<t;)switch(e[n]){case 0:if(0!==e[n-1]){n+=2;break}if(0!==e[n-2]){n++;break}i!==n-2&&r.push(e.subarray(i,n-2));do{n++}while(1!==e[n]&&n<t);n=(i=n+1)+2;break;case 1:if(0!==e[n-1]||0!==e[n-2]){n+=3;break}i!==n-2&&r.push(e.subarray(i,n-2)),n=(i=n+1)+2;break;default:n+=3}return i<t&&r.push(e.subarray(i)),r}},{key:"parseAvcC",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(!(e.length<4)){for(var i,n=e.length,r=[],s=0;s+t<n;)if(i=Ct(e,s),3===t&&(i>>>=8),s+=t,i){if(s+i>n)break;r.push(e.subarray(s,s+i)),s+=i}return r}}},{key:"parseSEI",value:function(e,t){for(var i=e.length,n=t?2:1,r=0,s=0,a="";255===e[n];)r+=255,n++;for(r+=e[n++];255===e[n];)s+=255,n++;if(s+=e[n++],5===r&&i>n+16)for(var o=0;o<16;o++)a+=e[n].toString(16),n++;return{payload:e.subarray(n,n+s),type:r,size:s,uuid:a}}},{key:"removeEPB",value:function(e){for(var t=e.byteLength,i=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(i.push(n+2),n+=2):n++;if(!i.length)return e;var r=t-i.length,s=new Uint8Array(r),a=0;for(n=0;n<r;a++,n++)a===i[0]&&(a++,i.shift()),s[n]=e[a];return s}}]),e}(),It=function(){function e(t){if(He(this,e),Ve(this,"_bytesAvailable",void 0),Ve(this,"_bitsAvailable",0),Ve(this,"_word",0),!t)throw new Error("ExpGolomb data params is required");this._data=t,this._bytesAvailable=t.byteLength,this._bytesAvailable&&this._loadWord()}return Ge(e,[{key:"bitsAvailable",get:function(){return this._bitsAvailable}},{key:"_loadWord",value:function(){var e=this._data.byteLength-this._bytesAvailable,t=Math.min(4,this._bytesAvailable);if(0===t)throw new Error("No bytes available");var i=new Uint8Array(4);i.set(this._data.subarray(e,e+t)),this._word=new DataView(i.buffer).getUint32(0),this._bitsAvailable=8*t,this._bytesAvailable-=t}},{key:"skipBits",value:function(e){if(this._bitsAvailable>e)this._word<<=e,this._bitsAvailable-=e;else{e-=this._bitsAvailable;var t=Math.floor(e/8);e-=8*t,this._bytesAvailable-=t,this._loadWord(),this._word<<=e,this._bitsAvailable-=e}}},{key:"readBits",value:function(e){if(e>32)throw new Error("Cannot read more than 32 bits");var t=Math.min(this._bitsAvailable,e),i=this._word>>>32-t;return this._bitsAvailable-=t,this._bitsAvailable>0?this._word<<=t:this._bytesAvailable>0&&this._loadWord(),(t=e-t)>0&&this._bitsAvailable?i<<t|this.readBits(t):i}},{key:"skipLZ",value:function(){var e;for(e=0;e<this._bitsAvailable;++e)if(0!=(this._word&2147483648>>>e))return this._word<<=e,this._bitsAvailable-=e,e;return this._loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(e){for(var t=8,i=8,n=0;n<e;n++)0!==i&&(i=(t+this.readEG()+256)%256),t=0===i?t:i}}]),e}(),Dt=function(){function e(){He(this,e)}return Ge(e,null,[{key:"parseAVCDecoderConfigurationRecord",value:function(t){if(!(t.length<7)){for(var i,n,r=1+(3&t[4]),s=[],a=[],o=6,l=31&t[5],c=0;c<l;c++)if(n=t[o]<<8|t[o+1],o+=2,n){var u=t.subarray(o,o+n);o+=n,s.push(u),i||(i=e.parseSPS(Lt.removeEPB(u)))}var d,h=t[o];o++;for(var f=0;f<h;f++)d=t[o]<<8|t[o+1],o+=2,d&&(a.push(t.subarray(o,o+d)),o+=d);return{sps:i,spsArr:s,ppsArr:a,nalUnitSize:r}}}},{key:"parseSPS",value:function(e){var t=new It(e);t.readUByte();var i=t.readUByte(),n=t.readUByte(),r=t.readUByte();t.skipUEG();var s=420;if(100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i){var a=t.readUEG();if(a<=3&&(s=[0,420,422,444][a]),3===a&&t.skipBits(1),t.skipUEG(),t.skipUEG(),t.skipBits(1),t.readBool())for(var o=3!==a?8:12,l=0;l<o;l++)t.readBool()&&(l<6?t.skipScalingList(16):t.skipScalingList(64))}t.skipUEG();var c=t.readUEG();if(0===c)t.readUEG();else if(1===c){t.skipBits(1),t.skipUEG(),t.skipUEG();for(var u=t.readUEG(),d=0;d<u;d++)t.skipUEG()}t.skipUEG(),t.skipBits(1);var h=t.readUEG(),f=t.readUEG(),p=t.readBits(1);0===p&&t.skipBits(1),t.skipBits(1);var v,g,m,y,b,_=0,k=0,E=0,S=0;if(t.readBool()&&(_=t.readUEG(),k=t.readUEG(),E=t.readUEG(),S=t.readUEG()),t.readBool()){if(t.readBool())switch(t.readUByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[t.readUByte()<<8|t.readUByte(),t.readUByte()<<8|t.readUByte()]}if(t.readBool()&&t.readBool(),t.readBool()&&(t.readBits(4),t.readBool()&&t.readBits(24)),t.readBool()&&(t.readUEG(),t.readUEG()),t.readBool()){var w=t.readBits(32),T=t.readBits(32);g=t.readBool(),b=(m=T)/(y=2*w)}}return{codec:Pt(e.subarray(1,4)),profileIdc:i,profileCompatibility:n,levelIdc:r,chromaFormat:s,width:Math.ceil(16*(h+1)-2*(_+k)),height:(2-p)*(f+1)*16-(p?2:4)*(E+S),sarRatio:v,fpsNum:m,fpsDen:y,fps:b,fixedFrame:g}}}]),e}(),Mt=function(){function e(){He(this,e)}return Ge(e,null,[{key:"parseHEVCDecoderConfigurationRecord",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(t.length<23)){i=i||{};for(var n,r,s,a,o,l=1+(3&t[21]),c=[],u=[],d=[],h=23,f=t[22],p=0;p<f;p++){s=63&t[h],a=t[h+1]<<8|t[h+2],h+=3;for(var v=0;v<a;v++)if(o=t[h]<<8|t[h+1],h+=2,o){switch(s){case 32:var g=t.subarray(h,h+o);n||(n=e.parseVPS(Lt.removeEPB(g),i)),d.push(g);break;case 33:var m=t.subarray(h,h+o);r||(r=e.parseSPS(Lt.removeEPB(m),i)),c.push(m);break;case 34:u.push(t.subarray(h,h+o))}h+=o}}return{hvcC:i,sps:r,spsArr:c,ppsArr:u,vpsArr:d,nalUnitSize:l}}}},{key:"parseVPS",value:function(t,i){i=i||{};var n=new It(t);n.readUByte(),n.readUByte(),n.readBits(12);var r=n.readBits(3);return i.numTemporalLayers=Math.max(i.numTemporalLayers||0,r+1),n.readBits(17),e._parseProfileTierLevel(n,r,i),i}},{key:"parseSPS",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i=i||{};var n=new It(t);n.readUByte(),n.readUByte(),n.readBits(4);var r=n.readBits(3);i.numTemporalLayers=Math.max(r+1,i.numTemporalLayers||0),i.temporalIdNested=n.readBits(1),e._parseProfileTierLevel(n,r,i),n.readUEG();var s=i.chromaFormatIdc=n.readUEG(),a=420;s<=3&&(a=[0,420,422,444][s]);var o=0;3===s&&(o=n.readBits(1));var l,c,u,d,h=n.readUEG(),f=n.readUEG(),p=n.readBits(1);if(1===p&&(l=n.readUEG(),c=n.readUEG(),u=n.readUEG(),d=n.readUEG()),i.bitDepthLumaMinus8=n.readUEG(),i.bitDepthChromaMinus8=n.readUEG(),1===p){var v=1!==s&&2!==s||0!==o?1:2,g=1===s&&0===o?2:1;h-=v*(c+l),f-=g*(d+u)}return{codec:"hev1.1.6.L93.B0",width:h,height:f,chromaFormat:a,hvcC:i}}},{key:"_parseProfileTierLevel",value:function(e,t,i){var n=i.generalTierFlag||0;i.generalProfileSpace=e.readBits(2),i.generalTierFlag=Math.max(e.readBits(1),n),i.generalProfileIdc=Math.max(e.readBits(5),i.generalProfileIdc||0),i.generalProfileCompatibilityFlags=e.readBits(32),i.generalConstraintIndicatorFlags=[e.readBits(8),e.readBits(8),e.readBits(8),e.readBits(8),e.readBits(8),e.readBits(8)];var r=e.readBits(8);n<i.generalTierFlag?i.generalLevelIdc=r:i.generalLevelIdc=Math.max(r,i.generalLevelIdc||0);var s=[],a=[];if(t>e.bitsAvailable)throw new Error("maxSubLayersMinus inavlid size ".concat(t));for(var o=0;o<t;o++)s[o]=e.readBits(1),a[o]=e.readBits(1);t>0&&e.readBits(2*(8-t));for(var l=0;l<t;l++)0!==s[l]&&(e.readBits(2),e.readBits(1),e.readBits(5),e.readBits(16),e.readBits(16),e.readBits(4),e.readBits(16),e.readBits(16),e.readBits(12)),0!==a[l]&&e.readBits(8)}}]),e}(),Rt=function(){function e(){He(this,e),Ve(this,"id",1),Ve(this,"type",it),Ve(this,"codecType",st),Ve(this,"pid",-1),Ve(this,"hvcC",void 0),Ve(this,"codec",""),Ve(this,"timescale",0),Ve(this,"formatTimescale",0),Ve(this,"sequenceNumber",0),Ve(this,"baseMediaDecodeTime",0),Ve(this,"baseDts",0),Ve(this,"duration",0),Ve(this,"warnings",[]),Ve(this,"samples",[]),Ve(this,"pps",[]),Ve(this,"sps",[]),Ve(this,"vps",[]),Ve(this,"fpsNum",0),Ve(this,"fpsDen",0),Ve(this,"sarRatio",[]),Ve(this,"width",0),Ve(this,"height",0),Ve(this,"nalUnitSize",4),Ve(this,"present",!1),Ve(this,"isVideoEncryption",!1),Ve(this,"isAudioEncryption",!1),Ve(this,"isVideo",!0),Ve(this,"kid",null),Ve(this,"pssh",null),Ve(this,"ext",void 0)}return Ge(e,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var e=this.samples[0],t=this.samples[this.samples.length-1];return t.dts-e.dts+t.duration}return 0}},{key:"exist",value:function(){return!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),e}(),jt=function(){function e(){He(this,e),Ve(this,"id",2),Ve(this,"type",nt),Ve(this,"codecType",ot),Ve(this,"pid",-1),Ve(this,"codec",""),Ve(this,"sequenceNumber",0),Ve(this,"sampleDuration",0),Ve(this,"timescale",0),Ve(this,"formatTimescale",0),Ve(this,"baseMediaDecodeTime",0),Ve(this,"duration",0),Ve(this,"warnings",[]),Ve(this,"samples",[]),Ve(this,"baseDts",0),Ve(this,"sampleSize",16),Ve(this,"sampleRate",0),Ve(this,"channelCount",0),Ve(this,"objectType",0),Ve(this,"sampleRateIndex",0),Ve(this,"config",[]),Ve(this,"present",!1),Ve(this,"isVideoEncryption",!1),Ve(this,"isAudioEncryption",!1),Ve(this,"kid",null),Ve(this,"ext",void 0)}return Ge(e,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&this.codec&&this.codecType===ot)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}},{key:"firstDts",get:function(){return this.samples.length?this.samples[0].dts:null}},{key:"firstPts",get:function(){return this.samples.length?this.samples[0].pts:null}},{key:"samplesDuration",get:function(){if(this.samples.length>0){var e=this.samples[0],t=this.samples[this.samples.length-1];return t.dts-e.dts+t.duration}return 0}}]),e}(),Nt=function(){function e(t,i,n){He(this,e),Ve(this,"flag",{}),Ve(this,"keyframe",!1),Ve(this,"gopId",0),Ve(this,"duration",0),Ve(this,"size",0),Ve(this,"units",[]),Ve(this,"chromaFormat",420),this.originPts=this.pts=t,this.originDts=this.dts=i,n&&(this.units=n)}return Ge(e,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),e}(),Bt=Ge((function e(t,i){He(this,e),Ve(this,"time",0),this.data=t,this.originPts=this.pts=i})),Ft=function(e){$e(i,e);var t=Ke(i);function i(){return He(this,i),t.apply(this,arguments)}return Ge(i)}(Bt),Ut=function(){function e(){He(this,e),Ve(this,"id",3),Ve(this,"type",rt),Ve(this,"timescale",0),Ve(this,"flvScriptSamples",[]),Ve(this,"seiSamples",[])}return Ge(e,[{key:"exist",value:function(){return!(!this.flvScriptSamples.length&&!this.seiSamples.length||!this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!(!this.flvScriptSamples.length&&!this.seiSamples.length)}}]),e}(),Ht=new tt("TsDemuxer"),zt=function(){function e(t,i,n){He(this,e),Ve(this,"_pmtId",-1),Ve(this,"_remainingPacketData",null),Ve(this,"_videoPesData",[]),Ve(this,"_audioPesData",[]),Ve(this,"_gopId",0),this.videoTrack=t||new Rt,this.audioTrack=i||new jt,this.metadataTrack=n||new Ut,this._fixer=new St(this.videoTrack,this.audioTrack,this.metadataTrack)}return Ge(e,[{key:"demux",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.audioTrack,r=this.videoTrack,s=this.metadataTrack;t&&(this._pmtId=-1,r.reset(),n.reset(),s.reset()),!i||t?(this._remainingPacketData=null,this._videoPesData=[],this._audioPesData=[]):(r.samples=[],n.samples=[],s.seiSamples=[],r.warnings=[],n.warnings=[],this._remainingPacketData&&(e=wt(this._remainingPacketData,e),this._remainingPacketData=null));var a=e.length,o=a%188;o&&(this._remainingPacketData=e.subarray(a-o),a-=o);for(var l=r.pid,c=n.pid,u=0;u<a;u+=188){if(71!==e[u])throw new Error("TS packet did not start with 0x47");var d=!!(64&e[u+1]),h=((31&e[u+1])<<8)+e[u+2],f=(48&e[u+3])>>4,p=void 0;if(f>1){if((p=u+5+e[u+4])===u+188)continue}else p=u+4;switch(h){case 0:d&&(p+=e[p]+1),this._pmtId=(31&e[p+10])<<8|e[p+11];break;case this._pmtId:d&&(p+=e[p]+1);var v=p+3+((15&e[p+1])<<8|e[p+2])-4,g=(15&e[p+10])<<8|e[p+11];for(p+=12+g;p<v;){var m=(31&e[p+1])<<8|e[p+2];switch(e[p]){case 15:n.pid=c=m;break;case 27:if(-1!==l)break;r.codecType=st,r.pid=l=m;break;case 36:if(-1!==l)break;r.codecType=at,r.pid=l=m;break;default:Ht.warn("Unsupported stream. type: ".concat(e[p],", pid: ").concat(m))}p+=5+((15&e[p+3])<<8|e[p+4])}break;case l:d&&this._videoPesData.length&&this._parseVideoData(),this._videoPesData.push(e.subarray(p,u+188));break;case c:d&&this._audioPesData.length&&this._parseAudioData(),this._audioPesData.push(e.subarray(p,u+188));break;case 17:case 8191:break;default:Ht.warn("Unknown pid: ".concat(h))}}return this._parseVideoData(),this._parseAudioData(),n.formatTimescale=r.formatTimescale=r.timescale=s.timescale=9e4,n.timescale=n.sampleRate||0,{videoTrack:r,audioTrack:n,metadataTrack:s}}},{key:"fix",value:function(e,t,i){return this._fixer.fix(e,t,i),{videoTrack:this.videoTrack,audioTrack:this.audioTrack,metadataTrack:this.metadataTrack}}},{key:"demuxAndFix",value:function(e,t,i,n){return this.demux(e,t,i),this.fix(n,t,i)}},{key:"_parseVideoData",value:function(){if(this._videoPesData.length){var t=e._parsePES(wt.apply(void 0,Ze(this._videoPesData)));if(t){var i=Lt.parseAnnexB(t.data);i?this._createVideoSample(i,t.pts,t.dts):Ht.warn("Cannot parse avc units",t),this._videoPesData=[]}else Ht.warn("Cannot parse video pes",this._videoPesData)}}},{key:"_createVideoSample",value:function(e,t,i){var n=this;if(e.length){var r=this.videoTrack,s=r.codecType===at,a=new Nt(t,i);e.forEach((function(e){var i=s?e[0]>>>1&63:31&e[0];switch(i){case 5:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:if(!s&&5!==i||s&&5===i)break;a.setToKeyframe(),n._gopId++;break;case 6:case 39:case 40:if(!s&&6!==i||s&&6===i)break;return void n.metadataTrack.seiSamples.push(new Ft(Lt.parseSEI(Lt.removeEPB(e),s),t));case 32:if(!s)break;if(!r.vps.length){var o=Mt.parseVPS(Lt.removeEPB(e),r.hvcC);r.hvcC=r.hvcC||o,r.vps=[e]}break;case 7:case 33:if(!s&&7!==i||s&&7===i)break;if(!r.sps.length){var l=Lt.removeEPB(e),c=s?Mt.parseSPS(l,r.hvcC):Dt.parseSPS(l);r.sps=[e],r.hvcC=r.hvcC||c.hvcC,r.codec=c.codec,r.width=c.width,r.height=c.height,r.sarRatio=c.sarRatio,r.fpsNum=c.fpsNum,r.fpsDen=c.fpsDen}break;case 8:case 34:if(!s&&8!==i||s&&8===i)break;r.pps.length||(r.pps=[e]);break;case 9:case 35:break;case 38:if(s){for(var u=!1,d=2;d<e.byteLength;d++)if(255===e[d]){u=!0;break}if(!u)return}}a.units.push(e)})),a.gopId=this._gopId,this._pushVideoSample(r,a)}}},{key:"_pushVideoSample",value:function(e,t){if(t.units.length)if(null===t.pts||void 0===t.pts){Ht.warn("Video sample no pts",t);var i=e.samples[e.samples.length-1];i?(t.pts=i.pts,t.dts=i.dts):Ht.warn("Drop video sample",t)}else e.samples.push(t)}},{key:"_parseAudioData",value:function(){if(this._audioPesData.length){var t=e._parsePES(wt.apply(void 0,Ze(this._audioPesData)));t?(this._parseAacData(t),this._audioPesData=[]):Ht.warn("Cannot parse audio pes",this._audioPesData)}}},{key:"_parseAacData",value:function(e){var t=this.audioTrack,i=e.pts;if(null==i){if(Ht.warn("AAC pes not pts",t),!t.samples.length||!t.sampleRate)return;i=t.samples[t.samples.length-1].pts+Et.getFrameDuration(t.sampleRate)}var n,r=Et.parseADTS(e.data,i);r?(t.codec=r.codec,t.channelCount=r.channelCount,t.sampleRate=r.sampleRate,t.objectType=r.objectType,t.sampleRateIndex=r.samplingFrequencyIndex,t.config=r.config,(n=t.samples).push.apply(n,Ze(r.frames.map((function(e){return new gt(e.pts,e.data)})))),r.skip&&Ht.warn("Skip aac adts ".concat(r.skip," bits")),r.remaining&&Ht.warn("Remaining aac adts ".concat(r.remaining," bits"))):Ht.warn("Cannot parse aac adts",e)}}],[{key:"probe",value:function(e){return!!e.length&&(71===e[0]&&71===e[188]&&71===e[376])}},{key:"_parsePES",value:function(e){var t=e[8];if(!(null==t||e.length<t+9)&&1===(e[0]<<16|e[1]<<8|e[2])){var i=(e[4]<<8)+e[5];if(!(i&&i>e.length-6)){var n,r,s=e[7];return 192&s&&(n=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&s?n-(r=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(n=r):r=n),{data:e.subarray(9+t),pts:n,dts:r}}}}}]),e}(),Gt=function(){function e(){He(this,e)}return Ge(e,null,[{key:"findBox",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if(!t)return r;for(var s=0,a="",o=0;t.length>7;){if(s=Ct(t),a=String.fromCharCode.apply(null,t.subarray(4,8)),o=8,1===s?(s=Ot(t,8),o+=8):s||(s=t.length),!i[0]||a===i[0]){var l=t.subarray(0,s);if(!(i.length<2))return e.findBox(l.subarray(o),i.slice(1),n+o);r.push({start:n,size:s,headerSize:o,type:a,data:l})}n+=s,t=t.subarray(s)}return r}},{key:"tfhd",value:function(e){return Wt(e,!0,(function(e,t){e.trackId=Ct(t);var i=4,n=1&e.flags,r=2&e.flags,s=8&e.flags,a=16&e.flags,o=32&e.flags;n&&(i+=4,e.baseDataOffset=Ct(t,i),i+=4),r&&(e.sampleDescriptionIndex=Ct(t,i),i+=4),s&&(e.defaultSampleDuration=Ct(t,i),i+=4),a&&(e.defaultSampleSize=Ct(t,i),i+=4),o&&(e.defaultSampleFlags=Ct(t,i))}))}},{key:"sidx",value:function(e){return Wt(e,!0,(function(e,t){var i=0;e.reference_ID=Ct(t,i),i+=4,e.timescale=Ct(t,i),i+=4,0===e.version?(e.earliest_presentation_time=Ct(t,i),i+=4,e.first_offset=Ct(t,i),i+=4):(e.earliest_presentation_time=Ot(t,i),i+=8,e.first_offset=Ot(t,i),i+=8),i+=2,e.references=[];var n=xt(t,i);i+=2;for(var r=0;r<n;r++){var s={};e.references.push(s);var a=Ct(t,i);i+=4,s.reference_type=a>>31&1,s.referenced_size=2147483647&a,s.subsegment_duration=Ct(t,i),a=Ct(t,i+=4),i+=4,s.starts_with_SAP=a>>31&1,s.SAP_type=a>>28&7,s.SAP_delta_time=268435455&a}}))}},{key:"moov",value:function(t){return Wt(t,!1,(function(t,i,n){t.mvhd=e.mvhd(e.findBox(i,["mvhd"],n)[0]),t.trak=e.findBox(i,["trak"],n).map((function(t){return e.trak(t)})),t.pssh=e.pssh(e.findBox(i,["pssh"],n)[0])}))}},{key:"mvhd",value:function(e){return Wt(e,!0,(function(e,t){var i=0;1===e.version?(e.timescale=Ct(t,16),e.duration=Ot(t,20),i+=28):(e.timescale=Ct(t,8),e.duration=Ct(t,12),i+=16),e.nextTrackId=Ct(t,i+76)}))}},{key:"trak",value:function(t){return Wt(t,!1,(function(t,i,n){t.tkhd=e.tkhd(e.findBox(i,["tkhd"],n)[0]),t.mdia=e.mdia(e.findBox(i,["mdia"],n)[0])}))}},{key:"tkhd",value:function(e){return Wt(e,!0,(function(e,t){var i=0;1===e.version?(e.trackId=Ct(t,16),e.duration=Ot(t,24),i+=32):(e.trackId=Ct(t,8),e.duration=Ct(t,16),i+=20),e.width=Ct(t,i+52),e.height=Ct(t,i+56)}))}},{key:"mdia",value:function(t){return Wt(t,!1,(function(t,i,n){t.mdhd=e.mdhd(e.findBox(i,["mdhd"],n)[0]),t.hdlr=e.hdlr(e.findBox(i,["hdlr"],n)[0]),t.minf=e.minf(e.findBox(i,["minf"],n)[0])}))}},{key:"mdhd",value:function(e){return Wt(e,!0,(function(e,t){var i=0;1===e.version?(e.timescale=Ct(t,16),e.duration=Ot(t,20),i+=28):(e.timescale=Ct(t,8),e.duration=Ct(t,12),i+=16);var n=xt(t,i);e.language=String.fromCharCode(96+(n>>10&31),96+(n>>5&31),96+(31&n))}))}},{key:"hdlr",value:function(e){return Wt(e,!0,(function(e,t){0===e.version&&(e.handlerType=String.fromCharCode.apply(null,t.subarray(4,8)))}))}},{key:"minf",value:function(t){return Wt(t,!1,(function(t,i,n){t.vmhd=e.vmhd(e.findBox(i,["vmhd"],n)[0]),t.smhd=e.smhd(e.findBox(i,["smhd"],n)[0]),t.stbl=e.stbl(e.findBox(i,["stbl"],n)[0])}))}},{key:"vmhd",value:function(e){return Wt(e,!0,(function(e,t){e.graphicsmode=xt(t),e.opcolor=[xt(t,2),xt(t,4),xt(t,6)]}))}},{key:"smhd",value:function(e){return Wt(e,!0,(function(e,t){e.balance=xt(t)}))}},{key:"stbl",value:function(t){return Wt(t,!1,(function(t,i,n){var r,s,a;t.stsd=e.stsd(e.findBox(i,["stsd"],n)[0]),t.stts=e.stts(e.findBox(i,["stts"],n)[0]),t.ctts=e.ctts(e.findBox(i,["ctts"],n)[0]),t.stsc=e.stsc(e.findBox(i,["stsc"],n)[0]),t.stsz=e.stsz(e.findBox(i,["stsz"],n)[0]),t.stco=e.stco(e.findBox(i,["stco"],n)[0]),t.stco||(t.co64=e.co64(e.findBox(i,["co64"],n)[0]),t.stco=t.co64);var o=null===(r=t.stsd.entries[0])||void 0===r||null===(s=r.sinf)||void 0===s||null===(a=s.schi)||void 0===a?void 0:a.tenc.default_IV_size;t.stss=e.stss(e.findBox(i,["stss"],n)[0]),t.senc=e.senc(e.findBox(i,["senc"],n)[0],o)}))}},{key:"senc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return Wt(e,!0,(function(e,i){var n=0,r=Ct(i,n);n+=4,e.samples=[];for(var s=0;s<r;s++){for(var a={InitializationVector:[]},o=0;o<t;o++)a.InitializationVector[o]=i[n+o];if(n+=t,2&e.flags){a.subsamples=[];var l=xt(i,n);n+=2;for(var c=0;c<l;c++){var u={};u.BytesOfClearData=xt(i,n),n+=2,u.BytesOfProtectedData=Ct(i,n),n+=4,a.subsamples.push(u)}}e.samples.push(a)}}))}},{key:"pssh",value:function(e){return Wt(e,!0,(function(e,t){for(var i=[],n=[],r=0,s=0;s<16;s++)n.push(Kt(t[r+s]));if(r+=16,e.version>0){var a=Ct(t,r);r+=4;for(var o=0;o<(""+a).length;o++)for(var l=0;l<16;l++){var c=t[r];r+=1,i.push(Kt(c))}}var u=Ct(t,r);e.data_size=u,r+=4,e.kid=i,e.system_id=n,e.buffer=t}))}},{key:"stsd",value:function(t){return Wt(t,!0,(function(t,i,n){t.entryCount=Ct(i),t.entries=e.findBox(i.subarray(4),[],n+4).map((function(t){switch(t.type){case"avc1":case"avc2":case"avc3":case"avc4":return e.avc1(t);case"hvc1":case"hev1":return e.hvc1(t);case"mp4a":return e.mp4a(t);case"alaw":case"ulaw":return e.alaw(t);case"enca":return Wt(t,!1,(function(t,i,n){t.channelCount=xt(i,16),t.samplesize=xt(i,18),t.sampleRate=Ct(i,24)/65536,i=i.subarray(28),t.sinf=e.sinf(e.findBox(i,["sinf"],n)[0]),t.esds=e.esds(e.findBox(i,["esds"],n)[0])}));case"encv":return Wt(t,!1,(function(t,i,n){t.width=xt(i,24),t.height=xt(i,26),t.horizresolution=Ct(i,28),t.vertresolution=Ct(i,32),i=i.subarray(78),t.sinf=e.sinf(e.findBox(i,["sinf"],n)[0]),t.avcC=e.avcC(e.findBox(i,["avcC"],n)[0]),t.hvcC=e.hvcC(e.findBox(i,["hvcC"],n)[0]),t.pasp=e.pasp(e.findBox(i,["pasp"],n)[0])}))}})).filter(Boolean)}))}},{key:"tenc",value:function(e){return Wt(e,!1,(function(e,t){var i=6;e.default_IsEncrypted=t[i],i+=1,e.default_IV_size=t[i],i+=1,e.default_KID=[];for(var n=0;n<16;n++)e.default_KID.push(Kt(t[i])),i+=1}))}},{key:"schi",value:function(t){return Wt(t,!1,(function(t,i,n){t.tenc=e.tenc(e.findBox(i,["tenc"],n)[0])}))}},{key:"sinf",value:function(t){return Wt(t,!1,(function(t,i,n){t.schi=e.schi(e.findBox(i,["schi"],n)[0]),t.frma=e.frma(e.findBox(i,["frma"],n)[0])}))}},{key:"frma",value:function(e){return Wt(e,!1,(function(e,t){e.data_format="";for(var i=0;i<4;i++)e.data_format+=String.fromCharCode(t[i])}))}},{key:"avc1",value:function(t){return Wt(t,!1,(function(t,i,n){var r=$t(t,i),s=i.subarray(r);n+=r,t.avcC=e.avcC(e.findBox(s,["avcC"],n)[0]),t.pasp=e.pasp(e.findBox(s,["pasp"],n)[0])}))}},{key:"avcC",value:function(e){return Wt(e,!1,(function(t,i){t.data=e.data,t.configurationVersion=i[0],t.AVCProfileIndication=i[1],t.profileCompatibility=i[2],t.AVCLevelIndication=i[3],t.codec=Pt([i[1],i[2],i[3]]),t.lengthSizeMinusOne=3&i[4],t.spsLength=31&i[5],t.sps=[];for(var n=6,r=0;r<t.spsLength;r++){var s=xt(i,n);n+=2,t.sps.push(i.subarray(n,n+s)),n+=s}t.ppsLength=i[n],n+=1,t.pps=[];for(var a=0;a<t.ppsLength;a++){var o=xt(i,n);n+=2,t.pps.push(i.subarray(n,n+=o)),n+=o}}))}},{key:"hvc1",value:function(t){return Wt(t,!1,(function(t,i,n){var r=$t(t,i),s=i.subarray(r);n+=r,t.hvcC=e.hvcC(e.findBox(s,["hvcC"],n)[0]),t.pasp=e.pasp(e.findBox(s,["pasp"],n)[0])}))}},{key:"hvcC",value:function(e){return Wt(e,!1,(function(t,i){t.data=e.data,t.codec="hev1.1.6.L93.B0",t.configurationVersion=i[0];var n=i[1];t.generalProfileSpace=n>>6,t.generalTierFlag=(32&n)>>5,t.generalProfileIdc=31&n,t.generalProfileCompatibility=Ct(i,2),t.generalConstraintIndicatorFlags=i.subarray(6,12),t.generalLevelIdc=i[12],t.avgFrameRate=xt(i,19),t.numOfArrays=i[22],t.vps=[],t.sps=[],t.pps=[];for(var r=23,s=0,a=0,o=0,l=0;l<t.numOfArrays;l++){s=63&i[r],a=xt(i,r+1),r+=3;for(var c,u=[],d=0;d<a;d++)o=xt(i,r),r+=2,u.push(i.subarray(r,r+o)),r+=o;if(32===s)(c=t.vps).push.apply(c,u);else if(33===s){var h;(h=t.sps).push.apply(h,u)}else if(34===s){var f;(f=t.pps).push.apply(f,u)}}}))}},{key:"pasp",value:function(e){return Wt(e,!1,(function(e,t){e.hSpacing=Ct(t),e.vSpacing=Ct(t,4)}))}},{key:"mp4a",value:function(t){return Wt(t,!1,(function(t,i,n){var r=Yt(t,i);t.esds=e.esds(e.findBox(i.subarray(r),["esds"],n+r)[0])}))}},{key:"esds",value:function(e){return Wt(e,!0,(function(e,t){e.codec="mp4a.";for(var i=0,n=0,r=0,s=0;t.length;){for(s=t[i=0],n=t[i+1],i+=2;128&n;)r=(127&n)<<7,n=t[i],i+=1;if(r+=127&n,3===s)t=t.subarray(i+3);else{if(4!==s){if(5===s){var a=e.config=t.subarray(i,i+r),o=(248&a[0])>>3;return 31===o&&a.length>=2&&(o=32+((7&a[0])<<3)+((224&a[1])>>5)),e.objectType=o,e.codec+=o.toString(16),void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}return void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}e.codec+=(t[i].toString(16)+".").padStart(3,"0"),t=t.subarray(i+13)}}}))}},{key:"alaw",value:function(e){return Wt(e,!1,(function(e,t){Yt(e,t)}))}},{key:"stts",value:function(e){return Wt(e,!0,(function(e,t){for(var i=Ct(t),n=[],r=4,s=0;s<i;s++)n.push({count:Ct(t,r),delta:Ct(t,r+4)}),r+=8;e.entryCount=i,e.entries=n}))}},{key:"ctts",value:function(e){return Wt(e,!0,(function(e,t){var i=Ct(t),n=[],r=4;if(1===e.version)for(var s=0;s<i;s++)n.push({count:Ct(t,r),offset:Ct(t,r+4)}),r+=8;else for(var a=0;a<i;a++)n.push({count:Ct(t,r),offset:-(1+~Ct(t,r+4))}),r+=8;e.entryCount=i,e.entries=n}))}},{key:"stsc",value:function(e){return Wt(e,!0,(function(e,t){for(var i=Ct(t),n=[],r=4,s=0;s<i;s++)n.push({firstChunk:Ct(t,r),samplesPerChunk:Ct(t,r+4),sampleDescriptionIndex:Ct(t,r+8)}),r+=12;e.entryCount=i,e.entries=n}))}},{key:"stsz",value:function(e){return Wt(e,!0,(function(e,t){var i=Ct(t),n=Ct(t,4),r=[];if(!i)for(var s=8,a=0;a<n;a++)r.push(Ct(t,s)),s+=4;e.sampleSize=i,e.sampleCount=n,e.entrySizes=r}))}},{key:"stco",value:function(e){return Wt(e,!0,(function(e,t){for(var i=Ct(t),n=[],r=4,s=0;s<i;s++)n.push(Ct(t,r)),r+=4;e.entryCount=i,e.entries=n}))}},{key:"co64",value:function(e){return Wt(e,!0,(function(e,t){for(var i=Ct(t),n=[],r=4,s=0;s<i;s++)n.push(Ot(t,r)),r+=8;e.entryCount=i,e.entries=n}))}},{key:"stss",value:function(e){return Wt(e,!0,(function(e,t){for(var i=Ct(t),n=[],r=4,s=0;s<i;s++)n.push(Ct(t,r)),r+=4;e.entryCount=i,e.entries=n}))}},{key:"moof",value:function(t){return Wt(t,!1,(function(t,i,n){t.mfhd=e.mfhd(e.findBox(i,["mfhd"],n)[0]),t.traf=e.findBox(i,["traf"],n).map((function(t){return e.traf(t)}))}))}},{key:"mfhd",value:function(e){return Wt(e,!0,(function(e,t){e.sequenceNumber=Ct(t)}))}},{key:"traf",value:function(t){return Wt(t,!1,(function(t,i,n){t.tfhd=e.tfhd(e.findBox(i,["tfhd"],n)[0]),t.tfdt=e.tfdt(e.findBox(i,["tfdt"],n)[0]),t.trun=e.trun(e.findBox(i,["trun"],n)[0])}))}},{key:"trun",value:function(e){return Wt(e,!0,(function(e,t){var i=e.version,n=e.flags,r=t.length,s=e.sampleCount=Ct(t),a=4;if(r>a&&1&n&&(e.dataOffset=-(1+~Ct(t,a)),a+=4),r>a&&4&n&&(e.firstSampleFlags=Ct(t,a),a+=4),e.samples=[],r>a)for(var o,l=0;l<s;l++)o={},256&n&&(o.duration=Ct(t,a),a+=4),512&n&&(o.size=Ct(t,a),a+=4),1024&n&&(o.flags=Ct(t,a),a+=4),2048&n&&(o.cts=i?-(1+~Ct(t,a+4)):Ct(t,a),a+=4),e.samples.push(o)}))}},{key:"tfdt",value:function(e){return Wt(e,!0,(function(e,t){1===e.version?e.baseMediaDecodeTime=Ot(t):e.baseMediaDecodeTime=Ct(t)}))}},{key:"probe",value:function(t){return!!e.findBox(t,["ftyp"])}},{key:"parseSampleFlags",value:function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}},{key:"moovToTrack",value:function(e,t,i){var n,r,s=e.trak;if(s&&s.length){var a=s.find((function(e){var t,i;return"vide"===(null===(t=e.mdia)||void 0===t||null===(i=t.hdlr)||void 0===i?void 0:i.handlerType)})),o=s.find((function(e){var t,i;return"soun"===(null===(t=e.mdia)||void 0===t||null===(i=t.hdlr)||void 0===i?void 0:i.handlerType)}));if(a&&t){var l,c,u,d,h,f,p,v=t,g=null===(l=a.tkhd)||void 0===l?void 0:l.trackId;null!=g&&(v.id=a.tkhd.trackId),v.tkhdDuration=a.tkhd.duration,v.mvhdDurtion=e.mvhd.duration,v.mvhdTimecale=e.mvhd.timescale,v.timescale=v.formatTimescale=a.mdia.mdhd.timescale,v.duration=a.mdia.mdhd.duration||v.mvhdDurtion/v.mvhdTimecale*v.timescale;var m,y,b,_,k,E,S,w,T=a.mdia.minf.stbl.stsd.entries[0];if(v.width=T.width,v.height=T.height,T.pasp&&(v.sarRatio=[T.pasp.hSpacing,T.pasp.vSpacing]),T.hvcC)v.codecType=at,v.codec=T.hvcC.codec,v.vps=T.hvcC.vps,v.sps=T.hvcC.sps,v.pps=T.hvcC.pps,v.hvcC=T.hvcC.data;else{if(!T.avcC)throw new Error("unknown video stsd entry");v.codec=T.avcC.codec,v.sps=T.avcC.sps,v.pps=T.avcC.pps}if(v.present=!0,v.ext={},v.ext.stss=null===(c=a.mdia)||void 0===c||null===(u=c.minf)||void 0===u||null===(d=u.stbl)||void 0===d?void 0:d.stss,v.ext.ctts=null===(h=a.mdia)||void 0===h||null===(f=h.minf)||void 0===f||null===(p=f.stbl)||void 0===p?void 0:p.ctts,T&&"encv"===T.type)v.isVideoEncryption=!0,T.default_KID=null===(m=T.sinf)||void 0===m||null===(y=m.schi)||void 0===y?void 0:y.tenc.default_KID,T.default_IsEncrypted=null===(b=T.sinf)||void 0===b||null===(_=b.schi)||void 0===_?void 0:_.tenc.default_IsEncrypted,T.default_IV_size=null===(k=T.sinf)||void 0===k||null===(E=k.schi)||void 0===E?void 0:E.tenc.default_IV_size,v.videoSenc=a.mdia.minf.stbl.senc&&a.mdia.minf.stbl.senc.samples,T.data_format=null===(S=T.sinf)||void 0===S||null===(w=S.frma)||void 0===w?void 0:w.data_format,v.useEME=e.useEME,v.kidValue=e.kidValue,v.pssh=e.pssh,v.encv=T}if(o&&i){var x,C,O,P,A,L,I,D,M,R=i,j=null===(x=o.tkhd)||void 0===x?void 0:x.trackId;null!=j&&(R.id=o.tkhd.trackId),R.tkhdDuration=o.tkhd.duration,R.mvhdDurtion=e.mvhd.duration,R.mvhdTimecale=e.mvhd.timescale,R.timescale=R.formatTimescale=o.mdia.mdhd.timescale,R.duration=o.mdia.mdhd.duration||R.mvhdDurtion/R.mvhdTimecale*R.timescale;var N,B,F,U,H,z,G,V,$=o.mdia.minf.stbl.stsd.entries[0];switch(R.sampleSize=$.sampleSize,R.sampleRate=$.sampleRate,R.channelCount=$.channelCount,R.present=!0,$.type){case"alaw":R.codecType=R.codec=lt,R.sampleRate=8e3;break;case"ulaw":R.codecType=R.codec=ct,R.sampleRate=8e3;break;default:R.sampleDuration=Et.getFrameDuration(R.sampleRate,R.timescale),R.sampleRateIndex=Et.getRateIndexByRate(R.sampleRate),R.objectType=(null===(n=$.esds)||void 0===n?void 0:n.objectType)||2,$.esds&&(R.config=Array.from($.esds.config)),R.codec=(null===(r=$.esds)||void 0===r?void 0:r.codec)||"mp4a.40.2"}if(R.sampleDuration=Et.getFrameDuration(R.sampleRate,R.timescale),R.objectType=(null===(C=$.esds)||void 0===C?void 0:C.objectType)||2,$.esds&&($.esds.config?R.config=Array.from($.esds.config):console.warn("esds config is null")),R.codec=(null===(O=$.esds)||void 0===O?void 0:O.codec)||"mp4a.40.2",R.sampleRateIndex=Et.getRateIndexByRate(R.sampleRate),R.ext={},R.ext.stss=null===(P=o.mdia)||void 0===P||null===(A=P.minf)||void 0===A||null===(L=A.stbl)||void 0===L?void 0:L.stss,R.ext.ctts=null===(I=o.mdia)||void 0===I||null===(D=I.minf)||void 0===D||null===(M=D.stbl)||void 0===M?void 0:M.ctts,R.present=!0,$&&"enca"===$.type)R.isAudioEncryption=!0,$.data_format=null===(N=$.sinf)||void 0===N||null===(B=N.frma)||void 0===B?void 0:B.data_format,$.default_KID=null===(F=$.sinf)||void 0===F||null===(U=F.schi)||void 0===U?void 0:U.tenc.default_KID,$.default_IsEncrypted=null===(H=$.sinf)||void 0===H||null===(z=H.schi)||void 0===z?void 0:z.tenc.default_IsEncrypted,$.default_IV_size=null===(G=$.sinf)||void 0===G||null===(V=G.schi)||void 0===V?void 0:V.tenc.default_IV_size,R.audioSenc=o.mdia.minf.stbl.senc&&o.mdia.minf.stbl.senc.samples,R.useEME=e.useEME,R.kidValue=e.kidValue,R.enca=$}if(i&&(i.isVideoEncryption=!!t&&t.isVideoEncryption),t&&(t.isAudioEncryption=!!i&&i.isAudioEncryption),null!=t&&t.encv||null!=i&&i.enca){var Y,W,X=null==t||null===(Y=t.encv)||void 0===Y?void 0:Y.default_KID,K=null==i||null===(W=i.enca)||void 0===W?void 0:W.default_KID,q=X||K?(X||K).join(""):null;t&&(t.kid=q),i&&(i.kid=q)}return t&&(t.flags=3841),i&&(i.flags=1793),{videoTrack:t,audioTrack:i}}}},{key:"evaluateDefaultDuration",value:function(e,t,i){var n,r=null==t||null===(n=t.samples)||void 0===n?void 0:n.length;return r?1024*r/t.timescale*e.timescale/i:1024}},{key:"moofToSamples",value:function(t,i,n){var r={};return t.mfhd&&(i&&(i.sequenceNumber=t.mfhd.sequenceNumber),n&&(n.sequenceNumber=t.mfhd.sequenceNumber)),t.traf.forEach((function(t){var s=t.tfhd,a=t.tfdt,o=t.trun;if(s&&o){a&&(i&&i.id===s.trackId&&(i.baseMediaDecodeTime=a.baseMediaDecodeTime),n&&n.id===s.trackId&&(n.baseMediaDecodeTime=a.baseMediaDecodeTime));var l=s.defaultSampleSize||0,c=s.defaultSampleDuration||e.evaluateDefaultDuration(i,n,o.samples.length||o.sampleCount),u=o.dataOffset||0,d=0,h=-1;if(!o.samples.length&&o.sampleCount){r[s.trackId]=[];for(var f=0;f<o.sampleCount;f++)r[s.trackId].push({offset:u,dts:d,duration:c,size:l}),d+=c,u+=l}else r[s.trackId]=o.samples.map((function(e,t){return(e={offset:u,dts:d,pts:d+(e.cts||0),duration:e.duration||c,size:e.size||l,gopId:h,keyframe:0===t||null!==e.flags&&void 0!==e.flags&&(65536&e.flags)>>>0!=65536}).keyframe&&(h++,e.gopId=h),d+=e.duration,u+=e.size,e}))}})),r}},{key:"moovToSamples",value:function(e){var t=e.trak;if(t&&t.length){var i=t.find((function(e){var t,i;return"vide"===(null===(t=e.mdia)||void 0===t||null===(i=t.hdlr)||void 0===i?void 0:i.handlerType)})),n=t.find((function(e){var t,i;return"soun"===(null===(t=e.mdia)||void 0===t||null===(i=t.hdlr)||void 0===i?void 0:i.handlerType)}));if(i||n){var r,s;if(i){var a,o,l=null===(a=i.mdia)||void 0===a||null===(o=a.minf)||void 0===o?void 0:o.stbl;if(!l)return;var c=l.stts,u=l.stsc,d=l.stsz,h=l.stco,f=l.stss,p=l.ctts;if(!(c&&u&&d&&h&&f))return;r=Vt(c,u,d,h,p,f)}if(n){var v,g,m,y=null===(v=n.mdia)||void 0===v||null===(g=v.minf)||void 0===g?void 0:g.stbl;if(!y)return;var b=null===(m=n.mdia.mdhd)||void 0===m?void 0:m.timescale,_=y.stts,k=y.stsc,E=y.stsz,S=y.stco;if(!(b&&_&&k&&E&&S))return;s=Vt(_,k,E,S)}return{videoSamples:r,audioSamples:s}}}}}]),e}();function Vt(e,t,i,n,r,s){var a,o,l,c=[],u=null==r?void 0:r.entries,d=t.entries,h=n.entries,f=i.entrySizes,p=null==s?void 0:s.entries;p&&(a={},p.forEach((function(e){a[e-1]=!0}))),u&&(o=[],u.forEach((function(e){for(var t=e.count,i=e.offset,n=0;n<t;n++)o.push(i)})));var v=-1,g=0,m=0,y=0,b=0,_=0,k=d[0].samplesPerChunk,E=d[1]?d[1].firstChunk-1:1/0;return e.entries.forEach((function(e){for(var t=e.count,n=e.delta,r=0;r<t;r++)l={dts:g,duration:n,size:f[m]||i.sampleSize,offset:h[y]+_,index:m},p&&(l.keyframe=a[m],l.keyframe&&v++,l.gopId=v),o&&m<o.length&&(l.pts=l.dts+o[m]),c.push(l),g+=n,++m<k?_+=l.size:(y++,_=0,y>=E&&(b++,E=d[b+1]?d[b+1].firstChunk-1:1/0),k+=d[b].samplesPerChunk)})),c}function $t(e,t){return e.dataReferenceIndex=xt(t,6),e.width=xt(t,24),e.height=xt(t,26),e.horizresolution=Ct(t,28),e.vertresolution=Ct(t,32),e.frameCount=xt(t,40),e.depth=xt(t,74),78}function Yt(e,t){return e.dataReferenceIndex=xt(t,6),e.channelCount=xt(t,16),e.sampleSize=xt(t,18),e.sampleRate=Ct(t,24)/65536,28}function Wt(e,t,i){if(e){if(e.size!==e.data.length)throw new Error("box ".concat(e.type," size !== data.length"));var n={start:e.start,size:e.size,headerSize:e.headerSize,type:e.type};return t&&(n.version=e.data[e.headerSize],n.flags=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<16)+(e[t+1]<<8)+(e[t+2]||0)}(e.data,e.headerSize+1),n.headerSize+=4),i(n,e.data.subarray(n.headerSize),n.start+n.headerSize),n}}var Xt=function(e,t,i){for(var n=String(i),r=t>>0,s=Math.ceil(r/n.length),a=[],o=String(e);s--;)a.push(n);return a.join("").substring(0,r-o.length)+o},Kt=function(){for(var e=[],t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.forEach((function(t){e.push(Xt(Number(t).toString(16),2,0))})),e[0]},qt=function(){function e(){c(this,e);var t=window.crypto||window.msCrypto;this.subtle=t&&(t.subtle||t.webkitSubtle),this.externalDecryptor=null}var t,i;return d(e,[{key:"destroy",value:function(){var e;null!==(e=this.externalDecryptor)&&void 0!==e&&e.destroy&&this.externalDecryptor.destroy()}},{key:"decrypt",value:function(e,t){if(e||t){var i=[];return e&&(i[0]=this._decryptSegment(e)),t&&(i[1]=this._decryptSegment(t)),Promise.all(i)}}},{key:"_decryptSegment",value:(i=l(s().mark((function e(t){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.data,!t.key){e.next=5;break}return e.next=4,this._decryptData(t.data,t.key,t.keyIv);case 4:i=e.sent;case 5:if(t.map){e.next=7;break}return e.abrupt("return",i);case 7:return e.abrupt("return",Re(t.map,i));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_decryptData",value:(t=l(s().mark((function e(t,i,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.externalDecryptor){e.next=6;break}return e.next=3,this.externalDecryptor.decrypt(t,i,n);case 3:return e.abrupt("return",e.sent);case 6:if(this.subtle){e.next=8;break}throw new Error("crypto is not defined");case 8:return e.next=10,this.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["encrypt","decrypt"]);case 10:return r=e.sent,e.t0=Uint8Array,e.next=14,this.subtle.decrypt({name:"AES-CBC",iv:n},r,t);case 14:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 16:case"end":return e.stop()}}),e,this)}))),function(e,i,n){return t.apply(this,arguments)})}]),e}(),Zt=function(){function e(t,i,n){He(this,e),this.videoTrack=t||new Rt,this.audioTrack=i||new jt,this.metadataTrack=n||new Ut}return Ge(e,[{key:"demux",value:function(e,t){var i=this.videoTrack,n=this.audioTrack,r=i.exist(),s=n.exist();if(i.samples=[],n.samples=[],t){if(!s){var a=Gt.findBox(t,["moov"])[0];if(!a)throw new Error("cannot found moov box");Gt.moovToTrack(Gt.moov(a),null,n)}var o=Gt.findBox(t,["moof"])[0];if(o){var l=Gt.moofToSamples(Gt.moof(o),null,n)[n.id],c=n.baseMediaDecodeTime;if(l){var u=o.start;l.map((function(e){e.offset+=u;var i=t.subarray(e.offset,e.offset+e.size);n.samples.push(new gt(e.dts+c,i,e.duration))}))}}}if(e){if(!r&&!s){var d=Gt.findBox(e,["moov"])[0];if(!d)throw new Error("cannot found moov box");Gt.moovToTrack(Gt.moov(d),i,n)}var h=Gt.findBox(e,["moof"])[0];if(h){var f,p=Gt.moofToSamples(Gt.moof(h),i,n),v=i.baseMediaDecodeTime,g=n.baseMediaDecodeTime,m=h.start;Object.keys(p).forEach((function(t){i.id==t?p[t].map((function(t){t.offset+=m;var n=new Nt((t.pts||t.dts)+v,t.dts+v);n.duration=t.duration,n.gopId=t.gopId,t.keyframe&&n.setToKeyframe();var r=e.subarray(t.offset,t.offset+t.size);n.data=r;for(var s=0,a=r.length-1;s<a;)f=Ct(r,s),s+=4,n.units.push(r.subarray(s,s+f)),s+=f;i.samples.push(n)})):n.id==t&&p[t].map((function(t){t.offset+=m;var i=e.subarray(t.offset,t.offset+t.size);n.samples.push(new gt(t.dts+g,i,t.duration))}))}))}}return{videoTrack:i,audioTrack:n,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}}],[{key:"probe",value:function(e){return Gt.probe(e)}}]),e}();function Jt(e){for(var t=0,i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];n.forEach((function(e){t+=e.length}));var s=new e(t),a=0;return n.forEach((function(e){s.set(e,a),a+=e.length})),s}var Qt=function(){function e(){He(this,e),this.buffer=new Uint8Array(0)}return Ge(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];i.forEach((function(t){t?e.buffer=Jt(Uint8Array,e.buffer,t):window.console.warn(t)}))}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,255&e])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}}]),e}(),ei=Math.pow(2,32)-1,ti=function(){function e(){He(this,e)}return Ge(e,null,[{key:"box",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=8+(i=i.filter(Boolean)).reduce((function(e,t){return e+t.byteLength}),0),s=new Uint8Array(r);s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=255&r,s.set(e,4);var a=8;return i.forEach((function(e){s.set(e,a),a+=e.byteLength})),s}},{key:"ftyp",value:function(t){return t.find((function(e){return e.type===it&&e.codecType===at}))?e.FTYPHEV1:e.FTYPAVC1}},{key:"initSegment",value:function(t){return wt(e.ftyp(t),e.moov(t))}},{key:"pssh",value:function(t){var i=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],At(t.kid),[0,0,0,0]));return e.box(e.types.pssh,i)}},{key:"moov",value:function(t){if(t[0].useEME&&(t[0].encv||t[0].enca)){t[0].pssh||(t[0].pssh={kid:t[0].kid});var i=this.pssh(t[0].pssh);return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale),e.mvex(t)].concat(Ze(t.map((function(t){return e.trak(t)}))),[i]))}return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale)].concat(Ze(t.map((function(t){return e.trak(t)}))),[e.mvex(t)]))}},{key:"mvhd",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,n=e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,255&i,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));return n}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.tkhdDuration||0,t.width,t.height),e.mdia(t))}},{key:"tkhd",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,r>>8&255,255&r,0,0]));return s}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minf(t))}},{key:"mdhd",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,n=e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,255&i,t>>24&255,t>>16&255,t>>8&255,255&t,85,196,0,0]));return n}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"minf",value:function(t){return e.box(e.types.minf,t.type===it?e.VMHD:e.SMHD,e.DINF,e.stbl(t))}},{key:"stbl",value:function(t){var i=[];return t&&t.ext&&t.ext.stss&&i.push(e.stss(t.ext.stss.entries)),e.box(e.types.stbl,e.stsd(t),e.STTS,i[0],e.STSC,e.STSZ,e.STCO)}},{key:"stsd",value:function(t){var i;return i="audio"===t.type?t.useEME&&t.enca?e.enca(t):e.mp4a(t):t.useEME&&t.encv?e.encv(t):e.avc1hev1(t),e.box(e.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),i)}},{key:"enca",value:function(t){var i=t.enca.channelCount,n=t.enca.sampleRate,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,i,0,16,0,0,0,0,n>>8&255,255&n,0,0]),s=e.esds(t.config),a=e.sinf(t.enca);return e.box(e.types.enca,r,s,a)}},{key:"encv",value:function(t){var i,n,r=t.sps.length>0?t.sps[0]:[],s=t.pps.length>0?t.pps[0]:[],a=t.width,o=t.height,l=t.sarRatio[0],c=t.sarRatio[1],u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,255&a,o>>8&255,255&o,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d=new Uint8Array((i=(n=[1,r[1],r[2],r[3],255,225,r.length>>>8&255,255&r.length]).concat.apply(n,Ze(r)).concat([1,s.length>>>8&255,255&s.length])).concat.apply(i,Ze(s))),h=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),f=e.sinf(t.encv),p=new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,c>>24,c>>16&255,c>>8&255,255&c]);return e.box(e.types.encv,u,e.box(e.types.avcC,d),e.box(e.types.btrt,h),f,e.box(e.types.pasp,p))}},{key:"schi",value:function(t){var i=new Uint8Array([]),n=e.tenc(t);return e.box(e.types.schi,i,n)}},{key:"tenc",value:function(t){var i=new Uint8Array([0,0,0,0,0,0,255&t.default_IsEncrypted,255&t.default_IV_size].concat(At(t.default_KID)));return e.box(e.types.tenc,i)}},{key:"sinf",value:function(t){var i=new Uint8Array([]),n=new Uint8Array([t.data_format.charCodeAt(0),t.data_format.charCodeAt(1),t.data_format.charCodeAt(2),t.data_format.charCodeAt(3)]),r=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),s=e.schi(t);return e.box(e.types.sinf,i,e.box(e.types.frma,n),e.box(e.types.schm,r),s)}},{key:"avc1hev1",value:function(t){var i=t.codecType===at,n=i?e.types.hvc1:e.types.avc1,r=i?e.hvcC(t):e.avcC(t),s=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),r];return i?s.push(e.box(e.types.fiel,new Uint8Array([1,0]))):t.sarRatio&&t.sarRatio.length>1&&s.push(e.pasp(t.sarRatio)),e.box.apply(e,[n].concat(s))}},{key:"avcC",value:function(t){var i,n,r,s=[],a=[];return t.sps.forEach((function(e){r=e.byteLength,s.push(r>>>8&255),s.push(255&r),s.push.apply(s,Ze(e))})),t.pps.forEach((function(e){r=e.byteLength,a.push(r>>>8&255),a.push(255&r),a.push.apply(a,Ze(e))})),e.box(e.types.avcC,new Uint8Array((i=(n=[1,s[3],s[4],s[5],255,224|t.sps.length]).concat.apply(n,s).concat([t.pps.length])).concat.apply(i,a)))}},{key:"hvcC",value:function(t){var i=t.hvcC;if(i instanceof ArrayBuffer||i instanceof Uint8Array)return i;var n,r=t.vps,s=t.sps,a=t.pps;if(i){var o=i.generalProfileCompatibilityFlags,l=i.generalConstraintIndicatorFlags,c=(r.length&&1)+(s.length&&1)+(a.length&&1);n=[1,i.generalProfileSpace<<6|i.generalTierFlag<<5|i.generalProfileIdc,o>>>24,o>>>16,o>>>8,o,l[0],l[1],l[2],l[3],l[4],l[5],i.generalLevelIdc,240,0,252,252|i.chromaFormatIdc,248|i.bitDepthLumaMinus8,248|i.bitDepthChromaMinus8,0,0,i.numTemporalLayers<<3|i.temporalIdNested<<2|3,c];var u=function(e){var t;n.push(e.length>>8,e.length),(t=n).push.apply(t,Ze(e))};r.length&&(n.push(160,0,r.length),r.forEach(u)),s.length&&(n.push(161,0,s.length),s.forEach(u)),a.length&&(n.push(162,0,a.length),a.forEach(u))}else n=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return e.box(e.types.hvcC,new Uint8Array(n))}},{key:"pasp",value:function(t){var i=qe(t,2),n=i[0],r=i[1];return e.box(e.types.pasp,new Uint8Array([n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r]))}},{key:"mp4a",value:function(t){return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),t.config.length?e.esds(t.config):void 0)}},{key:"esds",value:function(t){var i=t.length;return e.box(e.types.esds,new Uint8Array([0,0,0,0,3,23+i,0,0,0,4,15+i,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([i]).concat(t).concat([6,1,2])))}},{key:"mvex",value:function(t){return e.box.apply(e,[e.types.mvex].concat(Ze(t.map((function(t){return e.trex(t.id)})))))}},{key:"trex",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trex1",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]))}},{key:"trex2",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]))}},{key:"moof",value:function(t){return e.box.apply(e,[e.types.moof,e.mfhd(t[0].samples?t[0].samples[0].gopId:0)].concat(Ze(t.map((function(t){return e.traf(t)})))))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"traf",value:function(t){var i=e.tfhd(t.id),n=e.tfdt(t,t.baseMediaDecodeTime),r=0;if(t.isVideo&&t.videoSenc&&t.videoSenc.forEach((function(e){r+=8,e.subsamples&&e.subsamples.length&&(r+=2,r+=6*e.subsamples.length)})),t.videoSencLength=r,t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)){if(t.isVideoEncryption){if(t.isVideo){var s=e.saiz(t),a=e.saio(t),o=e.trun1(t),l=e.senc(t);return e.box(e.types.traf,i,n,s,a,o,l)}if(t.isAudioEncryption){var c=e.sbgp(),u=e.saiz(t),d=e.saio(t),h=e.senc(t),f=e.trun1(t);return e.box(e.types.traf,i,n,c,u,d,h,f)}var p=e.sbgp(),v=e.trun1(t);return e.box(e.types.traf,i,n,p,v)}if(t.isVideo){var g=e.trun1(t);return e.box(e.types.traf,i,n,g)}var m=e.sbgp(),y=e.saiz(t),b=e.saio(t),_=e.senc(t),k=e.trun1(t);return e.box(e.types.traf,i,n,m,y,b,_,k)}var E=e.sdtp(t);return e.box(e.types.traf,i,n,E,e.trun(t.samples,E.byteLength+76))}},{key:"sdtp",value:function(t){var i=new Qt;return t.samples.forEach((function(e){i.write(new Uint8Array(t.isVideo?[e.keyframe?32:16]:[16]))})),e.box(e.types.sdtp,this.extension(0,0),i.buffer)}},{key:"trun1",value:function(t){var i=new Qt,n=Qt.writeUint32(t.samples.length),r=null;if(t.isVideo){var s=t.videoSencLength;r=Qt.writeUint32(16*t.samples.length+s+149),!t.isVideoEncryption&&t.isAudioEncryption&&(r=Qt.writeUint32(16*t.samples.length+92))}else{var a=12*t.samples.length+124;t.isAudioEncryption&&(a=12*t.samples.length+8*t.audioSenc.length+177),r=Qt.writeUint32(a)}return t.samples.forEach((function(e){i.write(Qt.writeUint32(e.duration)),i.write(Qt.writeUint32(e.size)),i.write(Qt.writeUint32(e.keyframe?33554432:65536)),t.isVideo&&i.write(Qt.writeUint32(e.cts?e.cts:0))})),e.box(e.types.trun,this.extension(0,t.flags),n,r,i.buffer)}},{key:"senc",value:function(t){var i=new Qt,n=t.samples.length,r=t.isVideo?16:8,s=t.isVideo?2:0,a=[],o=0;return t.isVideo?(a=t.videoSenc,o=t.videoSencLength):a=t.audioSenc,o=o||r*n,i.write(Qt.writeUint32(16+o),e.types.senc,this.extension(0,s)),i.write(Qt.writeUint32(n)),a.forEach((function(e){for(var t=0;t<e.InitializationVector.length;t++)i.write(new Uint8Array([e.InitializationVector[t]]));e.subsamples&&e.subsamples.length&&(i.write(Qt.writeUint16(e.subsamples.length)),e.subsamples.forEach((function(e){i.write(Qt.writeUint16(e.BytesOfClearData)),i.write(Qt.writeUint32(e.BytesOfProtectedData))})))})),i.buffer}},{key:"saio",value:function(t){var i=12*t.samples.length+141;!t.isVideo&&t.isAudioEncryption&&(i=149);var n=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,255&i]);return e.box(e.types.saio,n)}},{key:"saiz",value:function(t){var i=t.samples.length,n=new Uint8Array([0,0,0,0,16,i>>24&255,i>>16&255,i>>8&255,255&i]);return e.box(e.types.saiz,n)}},{key:"sbgp",value:function(){var t=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return e.box(e.types.sbgp,this.extension(0,0),t)}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"tfhd",value:function(t){return e.box(e.types.tfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"tfdt",value:function(t,i){var n=Math.floor(i/(ei+1)),r=Math.floor(i%(ei+1));return t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)?e.box(e.types.tfdt,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])):e.box(e.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r]))}},{key:"trun",value:function(t,i){var n=t.length,r=12+16*n;i+=8+r;var s=new Uint8Array(r);s.set([0,0,15,1,n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0);for(var a=0;a<n;a++){var o=t[a],l=o.duration,c=o.size,u=o.flag,d=void 0===u?{}:u,h=o.cts,f=void 0===h?0:h;s.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d.isLeading<<2|(null===d.dependsOn||void 0===d.dependsOn?1:d.dependsOn),d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|(null===d.isNonSyncSample||void 0===d.isNonSyncSample?1:d.isNonSyncSample),61440&d.degradationPriority,15&d.degradationPriority,f>>>24&255,f>>>16&255,f>>>8&255,255&f],12+16*a)}return e.box(e.types.trun,s)}},{key:"moovMP4",value:function(t){return e.box.apply(e,[e.types.moov,e.mvhd(t[0].duration,t[0].timescale)].concat(Ze(t.map((function(t){return e.trackMP4(t)})))))}},{key:"trackMP4",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.duration,t.width,t.height),e.mdiaMP4(t))}},{key:"mdiaMP4",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minfMP4(t))}},{key:"minfMP4",value:function(t){return e.box(e.types.minf,t.type===it?e.VMHD:e.SMHD,e.DINF,e.stblMP4(t))}},{key:"stblMP4",value:function(t){var i=t.ext,n=[e.stsd(t),e.stts(i.stts),e.stsc(i.stsc),e.stsz(i.stsz),e.stco(i.stco)];return i.stss.length&&n.push(e.stss(i.stss)),i.ctts.length&&n.push(e.ctts(i.ctts)),e.box.apply(e,[e.types.stbl].concat(n))}},{key:"stts",value:function(t){var i=t.length,n=new Uint8Array(8*i),r=0;return t.forEach((function(e){var t=e.value,i=e.count;n.set([i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t],r),r+=8})),e.box(e.types.stts,wt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]),n))}},{key:"stsc",value:function(t){var i=t.length,n=new Uint8Array(12*i),r=0;return t.forEach((function(e){var t=e.firstChunk,i=e.samplesPerChunk,s=e.sampleDescIndex;n.set([t>>24,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,s>>24,s>>16&255,s>>8&255,255&s],r),r+=12})),e.box(e.types.stsc,wt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]),n))}},{key:"stsz",value:function(t){var i=t.length,n=new Uint8Array(4*i),r=0;return t.forEach((function(e){n.set([e>>24,e>>16&255,e>>8&255,255&e],r),r+=4})),e.box(e.types.stsz,wt(new Uint8Array([0,0,0,0,0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]),n))}},{key:"stco",value:function(t){var i=t.length,n=new Uint8Array(4*i),r=0;return t.forEach((function(e){n.set([e>>24,e>>16&255,e>>8&255,255&e],r),r+=4})),e.box(e.types.stco,wt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]),n))}},{key:"stss",value:function(t){var i=t.length,n=new Uint8Array(4*i),r=0;return t.forEach((function(e){n.set([e>>24,e>>16&255,e>>8&255,255&e],r),r+=4})),e.box(e.types.stss,wt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]),n))}},{key:"ctts",value:function(t){var i=t.length,n=new Uint8Array(8*i),r=0;return t.forEach((function(e){var t=e.value,i=e.count;n.set([i>>24,i>>16&255,i>>8&255,255&i,t>>24,t>>16&255,t>>8&255,255&t],r),r+=8})),e.box(e.types.ctts,wt(new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i]),n))}},{key:"styp",value:function(){return e.box(e.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(t){var i=t.timescale,n=t.samples[0].duration,r=n*t.samples.length,s=t.samples[0].sampleOffset*n,a=8;t.samples.forEach((function(e){a+=e.size}));var o=0;if(t.isVideo){var l,c=0;t.videoSenc&&(l=t.videoSenc),t.isVideo&&l.forEach((function(e){c+=8,e.subsamples&&e.subsamples.length&&(c+=2,c+=6*e.subsamples.length)})),t.videoSencLength=c,o=a+141+16*t.samples.length+c,t.useEME&&t.isAudioEncryption&&!t.isVideoEncryption&&(o=a+16*t.samples.length+84)}else o=a+116+12*t.samples.length,t.useEME&&t.isAudioEncryption&&(o=a+169+12*t.samples.length+8*t.audioSenc.length);var u=new Uint8Array([0,0,0,0,0,0,0,255&t.id,i>>24&255,i>>16&255,i>>8&255,255&i,s>>24&255,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,1,0,o>>16&255,o>>8&255,255&o,r>>24&255,r>>16&255,r>>8&255,255&r,144,0,0,0]);return e.box(e.types.sidx,u)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}}]),e}();Ve(ti,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp"].reduce((function(e,t){return e[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)],e}),Object.create(null))),Ve(ti,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),Ve(ti,"FTYPAVC1",ti.box(ti.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))),Ve(ti,"FTYPHEV1",ti.box(ti.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49]))),Ve(ti,"DINF",ti.box(ti.types.dinf,ti.box(ti.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))),Ve(ti,"VMHD",ti.box(ti.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))),Ve(ti,"SMHD",ti.box(ti.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0]))),Ve(ti,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0])),Ve(ti,"STTS",ti.box(ti.types.stts,ti.StblTable)),Ve(ti,"STSC",ti.box(ti.types.stsc,ti.StblTable)),Ve(ti,"STSZ",ti.box(ti.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]))),Ve(ti,"STCO",ti.box(ti.types.stco,ti.StblTable));var ii=function(){function e(t,i){He(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),e.disabled=i}return Ge(e,[{key:"debug",value:function(){var t;if(!e.disabled){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];(t=console).debug.apply(t,[this._prefix].concat(n))}}},{key:"log",value:function(){var t;if(!e.disabled){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];(t=console).log.apply(t,[this._prefix].concat(n))}}},{key:"warn",value:function(){var t;if(!e.disabled){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];(t=console).warn.apply(t,[this._prefix].concat(n))}}},{key:"error",value:function(){var t;if(!e.disabled){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];(t=console).error.apply(t,[this._prefix].concat(n))}}},{key:"table",value:function(){var t;e.disabled||(console.group(this._prefix),(t=console).table.apply(t,arguments),console.groupEnd())}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();Ve(ii,"disabled",!0);var ni=function(){function e(t,i,n){He(this,e),this.videoTrack=t,this.audioTrack=i;var r=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=r&&Number(r[1])<50,this.log=new ii("FMP4Remuxer",!n||!n.openLog||!n.openLog)}return Ge(e,[{key:"remux",value:function(){var e,t,i,n,r,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.videoTrack,l=this.audioTrack,c=o.exist(),u=l.exist(),d=[];return s&&(a&&a.initMerge?(c&&d.push(this.videoTrack),u&&d.push(this.audioTrack),i=ti.initSegment(d)):(c&&(e=ti.initSegment([this.videoTrack])),u&&(t=ti.initSegment([this.audioTrack])))),c&&o.hasSample()&&(n=this._remuxVideo()),u&&l.hasSample()&&(r=this._remuxAudio()),o.samples=[],l.samples=[],{initSegment:i,videoInitSegment:e,audioInitSegment:t,videoSegment:n,audioSegment:r}}},{key:"_remuxVideo",value:function(){var e=this.videoTrack;this.forceFirstIDR&&(e.samples[0].flag={dependsOn:2,isNonSyncSample:0});var t=e.samples,i=0;t.forEach((function(e){i+=e.units.reduce((function(e,t){return e+t.byteLength}),0),i+=4*e.units.length}));for(var n,r=new Uint8Array(i),s=new DataView(r.buffer),a=function(e,i){i=t[o];var a=0;i.units.forEach((function(t){s.setUint32(e,t.byteLength),e+=4,r.set(t,e),e+=t.byteLength,a+=4+t.byteLength})),i.size=a,c=e,n=i},o=0,l=t.length,c=0;o<l;o++)a(c,n);var u=ti.mdat(r);return wt(ti.moof([e]),u)}},{key:"_remuxAudio",value:function(){var e=this.audioTrack,t=new Uint8Array(e.samples.reduce((function(e,t){return e+t.size}),0));e.samples.reduce((function(e,i){return t.set(i.data,e),e+i.size}),0);var i=ti.mdat(t);return wt(ti.moof([e]),i)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),e}(),ri=r(r({},Ie),{},{STREAM_PARSED:"core.streamparsed",NO_AUDIO_TRACK:"core.noaudiotrack",SUBTITLE_SEGMENTS:"core.subtitlesegments",SUBTITLE_PLAYLIST:"core.subtitleplaylist",SEI_PAYLOAD_TIME:"core.seipayloadtime",APPEND_COST:"core.appendcost"}),si=new be("Transmuxer"),ai=function(){function e(t,i,n){c(this,e),h(this,"_initSegmentId",""),this.hls=t,this._demuxer=i?new Zt:new zt,this._isMP4=i,n&&(this._remuxer=new ni(this._demuxer.videoTrack,this._demuxer.audioTrack))}return d(e,[{key:"transmux",value:function(e,t,i,n,s,a){var o=this._demuxer;try{this._isMP4?o.demux(e,t):o.demuxAndFix(Re(e,t),i,n,s)}catch(e){throw new ge(le,pe.HLS,e)}var l=o.videoTrack,c=o.audioTrack,u=o.metadataTrack,d={codec:l.codec,timescale:l.timescale,firstDts:l.firstDts/l.timescale,firstPts:l.firstPts/l.timescale,duration:l.samplesDuration/l.timescale},h={codec:c.codec,timescale:c.timescale,firstDts:c.firstDts/l.timescale,firstPts:c.firstPts/l.timescale,duration:c.samplesDuration/l.timescale},f="".concat(l.codec,"/").concat(l.width,"/").concat(l.height,"/").concat(c.codec,"/").concat(c.config);if(f!==this._initSegmentId&&(this._initSegmentId=f,a=!0),this._fireEvents(l,c,u,i||a),this.hls.emit(ri.DEMUXED_TRACK,{videoTrack:l,audioTrack:c}),!this._remuxer)return[l,c];a&&this.hls.isLive&&!this.hls.config.mseLowLatency&&(l.duration=this.hls.totalDuration*l.timescale,c.duration=this.hls.totalDuration*c.timescale);try{var p=this._remuxer.remux(a),v=p.videoInitSegment,g=p.videoSegment,m=p.audioInitSegment,y=p.audioSegment,b=Re(v,g),_=Re(m,y);return[b?r(r({},d),{},{data:b}):void 0,_?r(r({},h),{},{data:_}):void 0]}catch(e){throw new ge(ce,pe.FMP4,e)}}},{key:"_fireEvents",value:function(e,t,i,n){var s=this,a=[e,t],o="discontinuity: ".concat(n);a.forEach((function(e){var t;null!==(t=e.samples)&&void 0!==t&&t.length&&(o+="; ".concat(e.samples.length," ").concat(e.type===it?"video":"audio"," samples, firstDts/firstPts/duration: ").concat((e.firstDts/e.timescale).toFixed(3),"/").concat((e.firstPts/e.timescale).toFixed(3),"/").concat((e.samplesDuration/e.timescale).toFixed(3))),n&&e.exist()&&s.hls.emit(ri.METADATA_PARSED,{type:e.type,track:e,meta:r({codec:e.codec,timescale:e.timescale,baseDts:e.baseDts},e.type===it?{width:e.width,height:e.height,sarRatio:e.sarRatio}:{codec:e.codec,channelCount:e.channelCount,sampleRate:e.sampleRate})})})),si.debug(o),e.warnings.forEach((function(e){var t;switch(e.type){case ut:t=ri.LARGE_AV_FIRST_FRAME_GAP_DETECT;break;case dt:t=ri.LARGE_VIDEO_DTS_GAP_DETECT;break;case ht:t=ri.MAX_DTS_DELTA_WITH_NEXT_SEGMENT_DETECT}t&&s.hls.emit(ri.STREAM_EXCEPTION,r(r({},e),{},{type:t})),si.warn("video exception",e)})),t.warnings.forEach((function(e){var t;switch(e.type){case ft:t=ri.LARGE_AUDIO_DTS_GAP_DETECT;break;case pt:t=ri.AUDIO_GAP_DETECT;break;case vt:t=ri.AUDIO_OVERLAP_DETECT}t&&s.hls.emit(ri.STREAM_EXCEPTION,r(r({},e),{},{type:t})),si.warn("audio exception",e)})),e.samples.forEach((function(e){e.keyframe&&s.hls.emit(ri.KEYFRAME,{pts:e.pts})})),i.seiSamples.forEach((function(e){s.hls.emit(ri.SEI,r(r({},e),{},{originPts:e.originPts/90,sei:{code:e.data.type,content:e.data.payload,dts:e.pts}}))}))}}]),e}(),oi=["data"],li=["data"],ci=new be("BufferService"),ui=function(){function e(t){var i=this;c(this,e),h(this,"_decryptor",new qt),h(this,"_transmuxer",null),h(this,"_mse",null),h(this,"_softVideo",null),h(this,"_sourceCreated",!1),h(this,"_needInitSegment",!0),h(this,"_directAppend",!1),this.hls=t,t.config.softDecode?this._softVideo=t.media:(this._mse=new Le(null,{preferMMS:t.config.preferMMS}),t.config.url&&this._mse.bindMedia(t.media).then((function(e){i.hls.emit(Ie.MEDIASOURCE_OPENED,e)}))),t.config.decryptor&&(this._decryptor.externalDecryptor=t.config.decryptor)}var t,i,n,r,a,o,u,f,p;return d(e,[{key:"baseDts",get:function(){var e,t,i;return null===(e=this._transmuxer)||void 0===e||null===(t=e._demuxer)||void 0===t||null===(i=t._fixer)||void 0===i?void 0:i._baseDts}},{key:"nbSb",get:function(){var e;return null!==(e=this._mse)&&void 0!==e&&e._sourceBuffer?Object.keys(this._mse._sourceBuffer).length:0}},{key:"msIsOpened",get:function(){var e;return null===(e=this._mse)||void 0===e?void 0:e.isOpened}},{key:"msHasOpTasks",get:function(){var e;return null===(e=this._mse)||void 0===e?void 0:e.hasOpTasks}},{key:"msStreaming",get:function(){var e;return null===(e=this._mse)||void 0===e?void 0:e.streaming}},{key:"updateDuration",value:(p=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ci.debug("update duration",t),!this._mse){e.next=9;break}if(this._mse.isOpened){e.next=5;break}return e.next=5,this._mse.open();case 5:return e.next=7,this._mse.updateDuration(t);case 7:e.next=10;break;case 9:this._softVideo&&(this._softVideo.duration=t);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"createSource",value:function(e,t,i,n){if(!this._sourceCreated){var r=e||t;if(r){if(zt.probe(r))this._transmuxer||(this._transmuxer=new ai(this.hls,!1,!this._softVideo));else{if(!Gt.probe(r))throw new ge(he,null,null,null,"unsupported stream");if(this._softVideo)this._transmuxer||(this._transmuxer=new ai(this.hls,!0));else{this._directAppend=!0;var s=!1;e&&!i&&Gt.findBox(e,["moov","trak"]).forEach((function(e){var t=Gt.findBox(e.data,["trak","mdia","minf","stbl","stsd"])[0];if(t){var r=Gt.stsd(t).entries[0];if(r)if(r.hvcC)i=r.hvcC.codec||"hev1.1.6.L93.B0";else if(r.avcC)i=r.avcC.codec;else if(r.sampleRate||r.esds){var a;n=(null===(a=r.esds)||void 0===a?void 0:a.codec)||"mp4a.40.2",s=!0}}})),t&&!n&&Gt.findBox(t,["moov","trak","mdia","minf","stbl","stsd"]).forEach((function(e){var t=Gt.stsd(e).entries[0];t&&t.esds&&(n=t.esds.codec)})),e&&!i&&(i="avc1.42e01e"),t&&!n&&(n="mp4a.40.2"),s&&(i+=", ".concat(n),n=""),this._createMseSource(i,n)}}this._softVideo&&(this._sourceCreated=!0)}}}},{key:"appendBuffer",value:(f=l(s().mark((function e(t,i,n,r,a,o,l){var c,u,d,h,f,p,v,m,y,b,k,E,S;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n&&n.length||null!=r&&r.length){e.next=2;break}return e.abrupt("return");case 2:if(!this._directAppend){e.next=7;break}return c=[],n&&c.push(this._mse.append(Le.VIDEO,n)),r&&c.push(this._mse.append(Le.AUDIO,r)),e.abrupt("return",Promise.all(c));case 7:if(u=this._needInitSegment||a,d=this._transmuxer.transmux(n,r,u,o,l,this._needInitSegment||a),h=_(d,2),f=h[0],p=h[1],r&&i&&(null==i||i.setTrackExist(!1,!0)),r&&t&&(null==t||t.setTrackExist(!0,!1)),i||null==t||t.setTrackExist(!!f,!!p),f&&!p&&this.hls.emit(ri.NO_AUDIO_TRACK),!this._softVideo){e.next=18;break}this._softVideo.appendBuffer(f,p),this._needInitSegment=!1,e.next=28;break;case 18:if(!this._mse){e.next=28;break}return(v=!this._sourceCreated)&&this._createMseSource(null==f?void 0:f.codec,null==p?void 0:p.codec),this._needInitSegment=!1,m=this._mse,y=[],u&&!v&&this._handleCodecChange(f,p),f&&(b=f.data,k=g(f,oi),y.push(m.append(Le.VIDEO,b,k))),p&&(E=p.data,S=g(p,li),y.push(m.append(Le.AUDIO,E,S))),e.abrupt("return",Promise.all(y));case 28:case"end":return e.stop()}}),e,this)}))),function(e,t,i,n,r,s,a){return f.apply(this,arguments)})},{key:"removeBuffer",value:(u=l(s().mark((function e(){var t,i,n,r=this,a=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:0,i=a.length>1&&void 0!==a[1]?a[1]:1/0,n=this.hls.media,!(!this._mse||!n||t<0||i<t||t>=this._mse.duration)){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",this._mse.clearBuffer(t,i).then((function(){return r.hls.emit(Ie.REMOVE_BUFFER,{start:t,end:i,removeEnd:i})})));case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"evictBuffer",value:(o=l(s().mark((function e(t){var i,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.hls.media,this._mse&&i&&t&&!(t<0)){e.next=3;break}return e.abrupt("return");case 3:if(n=i.currentTime,!((r=n-t)<=0)){e.next=7;break}return e.abrupt("return");case 7:if(!(ee.start(ee.get(i))+1>=r)){e.next=10;break}return e.abrupt("return");case 10:return e.abrupt("return",this.removeBuffer(0,r));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"clearAllBuffer",value:(a=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._mse){e.next=2;break}return e.abrupt("return",this._mse.clearAllBuffer());case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"decryptBuffer",value:function(e,t){return this._decryptor.decrypt(e,t)}},{key:"reset",value:(r=l(s().mark((function e(){var t,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],!this._mse||t){e.next=8;break}return this._transmuxer=null,this._sourceCreated=!1,e.next=6,this._mse.unbindMedia();case 6:return e.next=8,this._mse.bindMedia(this.hls.media);case 8:this._needInitSegment=!0,this._directAppend=!1;case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"endOfStream",value:(n=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._mse){e.next=5;break}if(!this._sourceCreated){e.next=5;break}return e.next=4,this._mse.endOfStream();case 4:this.hls.emit(Ie.BUFFEREOS);case 5:this._softVideo&&this._softVideo.endOfStream();case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setLiveSeekableRange",value:(i=l(s().mark((function e(t,i){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._mse&&this._mse.setLiveSeekableRange(t,i);case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"destroy",value:(t=l(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=this._decryptor)||void 0===t||t.destroy(),!this._mse){e.next=4;break}return e.next=4,this._mse.unbindMedia();case 4:this._decryptor=null,this._mse=null,this._softVideo=null;case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_createMseSource",value:function(e,t){ci.debug("create mse source, videoCodec=".concat(e,", audioCodec=").concat(t));var i=this._mse;i&&(e&&(i.createSource(Le.VIDEO,"video/mp4;codecs=".concat(e)),this._sourceCreated=!0),t&&(i.createSource(Le.AUDIO,"audio/mp4;codecs=".concat(t)),this._sourceCreated=!0),this.hls.emit(Ie.SOURCEBUFFER_CREATED))}},{key:"_handleCodecChange",value:function(e,t){var i=this._mse;[{type:Le.VIDEO,codecs:null==e?void 0:e.codec},{type:Le.AUDIO,codecs:null==t?void 0:t.codec}].filter((function(e){return!!e.codecs})).forEach((function(e){var t=e.type,n=e.codecs,r=i.getSourceBuffer(t);if(r){var s=n.split(",")[0];new RegExp(s,"ig").test(r.mimeType)||i.changeType(t,"".concat(t,"/mp4;codecs=").concat(n))}}))}},{key:"seamlessSwitch",value:function(){this._needInitSegment=!0}},{key:"isFull",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le.VIDEO;return null===(e=this._mse)||void 0===e?void 0:e.isFull(t)}}]),e}();var di="fetch",hi="xhr",fi="arraybuffer",pi="text",vi="json",gi=function(e){B(i,e);var t=W(i);function i(e,n,r,s){var a;return M(this,i),N($(a=t.call(this,s)),"retryCount",0),N($(a),"isTimeout",!1),N($(a),"loaderType",di),N($(a),"startTime",0),N($(a),"endTime",0),N($(a),"options",{}),a.url=e,a.request=n,a.response=r,a}return j(i)}(G(Error)),mi=Object.prototype.toString;function yi(e){if("[object Object]"!==mi.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function bi(e){if(e&&null!==e[0]&&void 0!==e[0]&&(0!==e[0]||null!==e[1]&&void 0!==e[1])){var t="bytes="+e[0]+"-";return e[1]&&(t+=e[1]),t}}function _i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ki(e,t){if(e){if(!t)return e;var i,n=Object.keys(t).map((function(e){if(null!=(i=t[e]))return Array.isArray(i)?e+="[]":i=[i],i.map((function(t){var i;return i=t,"[object Date]"===mi.call(i)?t=t.toISOString():function(e){return null!==e&&"object"===L(e)}(t)&&(t=JSON.stringify(t)),"".concat(_i(e),"=").concat(_i(t))})).join("&")})).filter(Boolean).join("&");if(n){var r=e.indexOf("#");-1!==r&&(e=e.slice(0,r)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}}function Ei(e,t,i,n,r,s,a,o,l,c,u){return r=null!=r?parseFloat(r):null,n=parseInt(n||"0",10),Number.isNaN(n)&&(n=0),{data:e,done:t,options:{range:l,vid:c,index:o,contentLength:n,age:r,startTime:s,firstByteTime:a,endTime:Date.now(),priOptions:u},response:i}}function Si(e,t){return Math.round(8*e*1e3/t/1024)}var wi=function(e){B(n,e);var t,i=W(n);function n(){var e;return M(this,n),N($(e=i.call(this)),"_abortController",null),N($(e),"_timeoutTimer",null),N($(e),"_reader",null),N($(e),"_response",null),N($(e),"_aborted",!1),N($(e),"_index",-1),N($(e),"_range",null),N($(e),"_receivedLength",0),N($(e),"_running",!1),N($(e),"_logger",null),N($(e),"_vid",""),N($(e),"_onProcessMinLen",0),N($(e),"_onCancel",null),N($(e),"_priOptions",null),e}return j(n,[{key:"load",value:function(e){var t,i=this,n=e.url,r=e.vid,s=e.timeout,a=e.responseType,o=e.onProgress,l=e.index,c=e.onTimeout,u=e.onCancel,d=e.range,h=e.transformResponse,f=e.request,p=e.params,v=e.logger,g=e.method,m=e.headers,y=e.body,b=e.mode,_=e.credentials,k=e.cache,E=e.redirect,S=e.referrer,w=e.referrerPolicy,T=e.onProcessMinLen,x=e.priOptions;this._logger=v,this._aborted=!1,this._onProcessMinLen=T,this._onCancel=u,this._abortController="undefined"!=typeof AbortController&&new AbortController,this._running=!0,this._index=l,this._range=d||[0,0],this._vid=r||n,this._priOptions=x||{};var C={method:g,headers:m,body:y,mode:b,credentials:_,cache:k,redirect:E,referrer:S,referrerPolicy:w,signal:null===(t=this._abortController)||void 0===t?void 0:t.signal},O=!1;clearTimeout(this._timeoutTimer),n=ki(n,p);var P=bi(d);P&&(m=f?f.headers:C.headers=C.headers||(Headers?new Headers:{}),Headers&&m instanceof Headers?m.append("Range",P):m.Range=P),s&&(this._timeoutTimer=setTimeout((function(){if(O=!0,i.cancel(),c){var e=new gi(n,C,null,"timeout");e.isTimeout=!0,c(e,{index:i._index,range:i._range,vid:i._vid,priOptions:i._priOptions})}}),s));var L=Date.now();return this._logger.debug("[fetch load start], index,",l,",range,",d),new Promise((function(e,t){fetch(f||n,f?void 0:C).then(function(){var r=D(A().mark((function r(s){var c,u,f,p;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(clearTimeout(i._timeoutTimer),i._response=s,!i._aborted&&i._running){r.next=4;break}return r.abrupt("return");case 4:if(h&&(s=h(s,n)||s),s.ok){r.next=7;break}throw new gi(n,C,s,"bad network response");case 7:if(c=Date.now(),a!==pi){r.next=15;break}return r.next=11,s.text();case 11:u=r.sent,i._running=!1,r.next=37;break;case 15:if(a!==vi){r.next=22;break}return r.next=18,s.json();case 18:u=r.sent,i._running=!1,r.next=37;break;case 22:if(!o){r.next=29;break}return i.resolve=e,i.reject=t,i._loadChunk(s,o,L,c),r.abrupt("return");case 29:return r.next=31,s.arrayBuffer();case 31:u=r.sent,u=new Uint8Array(u),i._running=!1,f=Date.now()-L,p=Si(u.byteLength,f),i.emit(Ie.REAL_TIME_SPEED,{speed:p,len:u.byteLength,time:f,vid:i._vid,index:i._index,range:i._range,priOptions:i._priOptions});case 37:i._logger.debug("[fetch load end], index,",l,",range,",d),e(Ei(u,!0,s,s.headers.get("Content-Length"),s.headers.get("age"),L,c,l,d,i._vid,i._priOptions));case 39:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){var r;clearTimeout(i._timeoutTimer),i._running=!1,i._aborted&&!O||((e=e instanceof gi?e:new gi(n,C,null,null===(r=e)||void 0===r?void 0:r.message)).startTime=L,e.endTime=Date.now(),e.isTimeout=O,e.options={index:i._index,range:i._range,vid:i._vid,priOptions:i._priOptions},t(e))}))}))}},{key:"cancel",value:(t=D(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._aborted){e.next=2;break}return e.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){e.next=14;break}if(e.prev=5,!this._reader){e.next=9;break}return e.next=9,this._reader.cancel();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch(e){}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return t.apply(this,arguments)})},{key:"_loadChunk",value:function(e,t,i,n){var r=this;if(!e.body||!e.body.getReader){this._running=!1;var s=new gi(e.url,"",e,"onProgress of bad response.body.getReader");return s.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},void this.reject(s)}this._onProcessMinLen>0&&(this._cache=new Uint8Array(2097152),this._writeIdx=0);var a,o,l,c=this._reader=e.body.getReader(),u=function(){var s=D(A().mark((function s(){var d,h,f,p,v,g,m,y;return A().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return o=Date.now(),s.prev=1,s.next=4,c.read();case 4:a=s.sent,l=Date.now(),s.next=13;break;case 8:return s.prev=8,s.t0=s.catch(1),l=Date.now(),r._aborted||(r._running=!1,s.t0.options={index:r._index,range:r._range,vid:r._vid,priOptions:r._priOptions},r.reject(s.t0)),s.abrupt("return");case 13:if(h=(null===(d=r._range)||void 0===d?void 0:d.length)>0?r._range[0]:0,f=h+r._receivedLength,!r._aborted){s.next=19;break}return r._running=!1,t(void 0,!1,{range:[f,f],vid:r._vid,index:r._index,startTime:o,endTime:l,st:i,firstByteTime:n,priOptions:r._priOptions},e),s.abrupt("return");case 19:p=a.value?a.value.byteLength:0,r._receivedLength+=p,r._logger.debug("【fetchLoader,onProgress call】,task,",r._range,", start,",f,", end,",h+r._receivedLength,", done,",a.done),r._onProcessMinLen>0?r._writeIdx+p>=r._onProcessMinLen||a.done?((v=new Uint8Array(r._writeIdx+p)).set(r._cache.slice(0,r._writeIdx),0),p>0&&v.set(a.value,r._writeIdx),r._writeIdx=0,r._logger.debug("【fetchLoader,onProgress enough】,done,",a.done,",len,",v.byteLength,", writeIdx,",r._writeIdx)):p>0&&r._writeIdx+p<2097152?(r._cache.set(a.value,r._writeIdx),r._writeIdx+=p,r._logger.debug("【fetchLoader,onProgress cache】,len,",p,", writeIdx,",r._writeIdx)):p>0&&(g=new Uint8Array(r._writeIdx+p+2048),r._logger.debug("【fetchLoader,onProgress extra start】,size,",r._writeIdx+p+2048,", datalen,",p,", writeIdx,",r._writeIdx),g.set(r._cache.slice(0,r._writeIdx),0),p>0&&g.set(a.value,r._writeIdx),r._writeIdx+=p,delete r._cache,r._cache=g,r._logger.debug("【fetchLoader,onProgress extra end】,len,",p,", writeIdx,",r._writeIdx)):v=a.value,(v&&v.byteLength>0||a.done)&&t(v,a.done,{range:[r._range[0]+r._receivedLength-(v?v.byteLength:0),r._range[0]+r._receivedLength],vid:r._vid,index:r._index,startTime:o,endTime:l,st:i,firstByteTime:n,priOptions:r._priOptions},e),a.done?(m=Date.now()-i,y=Si(r._receivedLength,m),r.emit(Ie.REAL_TIME_SPEED,{speed:y,len:r._receivedLength,time:m,vid:r._vid,index:r._index,range:r._range,priOptions:r._priOptions}),r._running=!1,r._logger.debug("[fetchLoader onProgress end],task,",r._range,",done,",a.done),r.resolve(Ei(a,!0,e,e.headers.get("Content-Length"),e.headers.get("age"),i,n,r._index,r._range,r._vid,r._priOptions))):u();case 25:case"end":return s.stop()}}),s,null,[[1,8]])})));return function(){return s.apply(this,arguments)}}();u()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}}],[{key:"isSupported",value:function(){return!("undefined"==typeof fetch)}}]),n}(Me.a);var Ti=function(e){B(i,e);var t=W(i);function i(){var e;return M(this,i),N($(e=t.call(this)),"_xhr",null),N($(e),"_aborted",!1),N($(e),"_timeoutTimer",null),N($(e),"_range",null),N($(e),"_receivedLength",0),N($(e),"_url",null),N($(e),"_onProgress",null),N($(e),"_index",-1),N($(e),"_headers",null),N($(e),"_currentChunkSizeKB",384),N($(e),"_timeout",null),N($(e),"_xhr",null),N($(e),"_withCredentials",null),N($(e),"_startTime",-1),N($(e),"_loadCompleteResolve",null),N($(e),"_loadCompleteReject",null),N($(e),"_runing",!1),N($(e),"_logger",!1),N($(e),"_vid",""),N($(e),"_responseType",void 0),N($(e),"_credentials",void 0),N($(e),"_method",void 0),N($(e),"_transformResponse",void 0),N($(e),"_firstRtt",void 0),N($(e),"_onCancel",null),N($(e),"_priOptions",null),e}return j(i,[{key:"load",value:function(e){var t=this;clearTimeout(this._timeoutTimer),this._logger=e.logger,this._range=e.range,this._onProgress=e.onProgress,this._index=e.index,this._headers=e.headers,this._withCredentials="include"===e.credentials||"same-origin"===e.credentials,this._body=e.body||null,e.method&&(this._method=e.method),this._timeout=e.timeout||null,this._runing=!0,this._vid=e.vid||e.url,this._responseType=e.responseType,this._firstRtt=-1,this._onTimeout=e.onTimeout,this._onCancel=e.onCancel,this._request=e.request,this._priOptions=e.priOptions||{},this._logger.debug("【xhrLoader task】, range",this._range),this._url=ki(e.url,e.params);var i=Date.now();return new Promise((function(e,i){t._loadCompleteResolve=e,t._loadCompleteReject=i,t._startLoad()})).catch((function(e){if(clearTimeout(t._timeoutTimer),t._runing=!1,!t._aborted)throw(e=e instanceof gi?e:new gi(t._url,t._request)).startTime=i,e.endTime=Date.now(),e.options={index:t._index,vid:t._vid,priOptions:t._priOptions},e}))}},{key:"_startLoad",value:function(){var e=null;if(this._responseType===fi&&this._range&&this._range.length>1)if(this._onProgress){this._firstRtt=-1;var t=1024*this._currentChunkSizeKB,i=this._range[0]+this._receivedLength,n=this._range[1];t<this._range[1]-i&&(n=i+t),e=[i,n],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",e)}else e=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",e);this._internalOpen(e)}},{key:"_internalOpen",value:function(e){var t=this;try{this._startTime=Date.now();var i=this._xhr=new XMLHttpRequest;i.open(this._method||"GET",this._url,!0),i.responseType=this._responseType,this._timeout&&(i.timeout=this._timeout),i.withCredentials=this._withCredentials,i.onload=this._onLoad.bind(this),i.onreadystatechange=this._onReadyStatechange.bind(this),i.onerror=function(e){var i,n,r;t._running=!1;var s=new gi(t._url,t._request,null==e||null===(i=e.currentTarget)||void 0===i?void 0:i.response,"xhr.onerror.status:"+(null==e||null===(n=e.currentTarget)||void 0===n?void 0:n.status)+",statusText,"+(null==e||null===(r=e.currentTarget)||void 0===r?void 0:r.statusText));s.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(s)},i.ontimeout=function(e){t.cancel();var i=new gi(t._url,t._request,{status:408},"timeout");t._onTimeout&&(i.isTimeout=!0,t._onTimeout(i,{index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions})),i.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(i)};var n=this._headers||{},r=bi(e);r&&(n.Range=r),n&&Object.keys(n).forEach((function(e){i.setRequestHeader(e,n[e])})),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",e),i.send(this._body)}catch(t){t.options={index:this._index,range:e,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(t)}}},{key:"_onReadyStatechange",value:function(e){2===e.target.readyState&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(e){var t,i=e.target.status;if(i<200||i>299){var n=new gi(this._url,null,P(P({},e.target.response),{},{status:i}),"bad response,status:"+i);return n.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(n)}var r,s=null,a=!1,o=(null===(t=this._range)||void 0===t?void 0:t.length)>0?this._range[0]:0;if(this._responseType===fi){var l,c=new Uint8Array(e.target.response);if(r=o+this._receivedLength,c&&c.byteLength>0){this._receivedLength+=c.byteLength;var u=Date.now()-this._startTime,d=Si(this._receivedLength,u);this.emit(Ie.REAL_TIME_SPEED,{speed:d,len:this._receivedLength,time:u,vid:this._vid,index:this._index,range:[r,o+this._receivedLength],priOptions:this._priOptions})}s=c,a=!((null===(l=this._range)||void 0===l?void 0:l.length)>1&&this._range[1]&&this._receivedLength<this._range[1]-this._range[0]),this._logger.debug("[xhr load done->], tast :",this._range,", start",r,"end ",o+this._receivedLength,",dataLen,",c?c.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",a)}else a=!0,s=e.target.response;var h={ok:i>=200&&i<300,status:i,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(h=this._transformResponse(h,this._url)||h),this._onProgress&&this._onProgress(s,a,{index:this._index,vid:this._vid,range:[r,o+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},h),a?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve(Ei(this._onProgress?null:s,a,h,h.headers["content-length"],h.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted)return this._aborted=!0,this._runing=!1,K(F(i.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr?this._xhr.abort():void 0}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}},{key:"_getHeaders",value:function(e){var t,i={},n=Z(e.getAllResponseHeaders().trim().split("\r\n"));try{for(n.s();!(t=n.n()).done;){var r=t.value.split(": ");i[r[0].toLowerCase()]=r.slice(1).join(": ")}}catch(e){n.e(e)}finally{n.f()}return i}}],[{key:"isSupported",value:function(){return"undefined"!=typeof XMLHttpRequest}}]),i}(Me.a),xi=["retry","retryDelay","onRetryError","transformError"],Ci=function(){function e(t,i){M(this,e),this.promise=Se(),this.alive=!!i.onProgress,!i.logger&&(i.logger=new be("Loader")),this._loaderType=t,this._loader=t===di&&"undefined"!=typeof fetch?new wi:new Ti,this._config=i,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=i.retryCheckFunc,this._logger=i.logger}var t;return j(e,[{key:"exec",value:function(){var e=this,t=this._config,i=t.retry,n=t.retryDelay,r=t.onRetryError,s=t.transformError,a=V(t,xi),o=function(){var t=D(A().mark((function t(){var l,c,u;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._loader.load(a);case 3:l=t.sent,e.promise.resolve(l),t.next=27;break;case 7:if(t.prev=7,t.t0=t.catch(0),e._loader.running=!1,e._logger.debug("[task request catch err]",t.t0),!e._canceled){t.next=13;break}return t.abrupt("return");case 13:if(t.t0.loaderType=e._loaderType,t.t0.retryCount=e._retryCount,c=t.t0,s&&(c=s(c)||c),r&&e._retryCount>0&&r(c,e._retryCount,{index:a.index,vid:a.vid,range:a.range,priOptions:a.priOptions}),e._retryCount++,u=!0,e._retryCheckFunc&&(u=e._retryCheckFunc(t.t0)),!(u&&e._retryCount<=i)){t.next=26;break}return clearTimeout(e._retryTimer),e._logger.debug("[task request setTimeout],retry",e._retryCount,",retry range,",a.range),e._retryTimer=setTimeout(o,n),t.abrupt("return");case 26:e.promise.reject(c);case 27:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return o(),this.promise}},{key:"cancel",value:(t=D(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,e.abrupt("return",this._loader.cancel());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),e}(),Oi=function(e){B(n,e);var t,i=W(n);function n(e){var t;return M(this,n),N($(t=i.call(this,e)),"type",di),N($(t),"_queue",[]),N($(t),"_alive",[]),N($(t),"_currentTask",null),N($(t),"_finnalUrl",""),N($(t),"_config",void 0),t._config=function(e){return P({loaderType:di,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:pi,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},e)}(e),t._config.loaderType!==hi&&wi.isSupported()||(t.type=hi),t.log=e.logger,t}return j(n,[{key:"isFetch",value:function(){return this.type===di}},{key:"load",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"!=typeof e&&e?i=e:i.url=e||i.url||this._config.url,(i=Object.assign({},this._config,i)).params&&(i.params=Object.assign({},i.params)),i.headers&&yi(i.headers)&&(i.headers=Object.assign({},i.headers)),i.body&&yi(i.body)&&(i.body=Object.assign({},i.body)),i.transformRequest&&(i=i.transformRequest(i)||i),i.logger=this.log;var n=new Ci(this.type,i);return n.loader.on(Ie.REAL_TIME_SPEED,(function(e){t.emit(Ie.REAL_TIME_SPEED,e)})),this._queue.push(n),1!==this._queue.length||this._currentTask&&this._currentTask.running||this._processTask(),n.promise}},{key:"cancel",value:(t=D(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._queue.map((function(e){return e.cancel()})).concat(this._alive.map((function(e){return e.cancel()}))),this._currentTask&&t.push(this._currentTask.cancel()),this._queue=[],this._alive=[],e.next=6,Promise.all(t);case 6:return e.next=8,je();case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_processTask",value:function(){var e=this;if(this._currentTask=this._queue.shift(),this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var t=this._currentTask.exec().catch((function(e){}));t&&"function"==typeof t.finally&&t.finally((function(){var t,i;null!==(t=e._currentTask)&&void 0!==t&&t.alive&&(null===(i=e._alive)||void 0===i?void 0:i.length)>0&&(e._alive=e._alive.filter((function(t){return t&&t!==e._currentTask}))),e._processTask()}))}}}],[{key:"isFetchSupport",value:function(){return wi.isSupported()}}]),n}(Me.a),Pi=d((function e(){c(this,e),h(this,"version",0),h(this,"streams",[]),h(this,"isMaster",!0)})),Ai="AUDIO",Li="SUBTITLE",Ii={CLEAR_KEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY:"com.microsoft.playready"},Di=d((function e(){c(this,e),h(this,"id",0),h(this,"url",""),h(this,"default",!1),h(this,"autoSelect",!1),h(this,"forced",!1),h(this,"group",""),h(this,"name",""),h(this,"lang",""),h(this,"segments",[]),h(this,"endSN",0)})),Mi=function(e){f(i,e);var t=b(i);function i(){var e;c(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return h(m(e=t.call.apply(t,[this].concat(r))),"mediaType",Ai),h(m(e),"channels",0),e}return d(i)}(Di),Ri=function(e){f(i,e);var t=b(i);function i(){var e;c(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return h(m(e=t.call.apply(t,[this].concat(r))),"mediaType",Li),e}return d(i)}(Di),ji=d((function e(){c(this,e),h(this,"id",0),h(this,"bitrate",0),h(this,"width",0),h(this,"height",0),h(this,"name",""),h(this,"url",""),h(this,"audioCodec",""),h(this,"videoCodec",""),h(this,"textCodec",""),h(this,"audioGroup",""),h(this,"audioStreams",[]),h(this,"subtitleStreams",[]),h(this,"closedCaptionsStream",[])})),Ni=d((function e(){c(this,e),h(this,"version",0),h(this,"url",""),h(this,"type",""),h(this,"startCC",0),h(this,"endCC",0),h(this,"startSN",0),h(this,"endSN",0),h(this,"totalDuration",0),h(this,"targetDuration",0),h(this,"partTargetDuration",0),h(this,"canSkipUntil",0),h(this,"canSkipDateRanges",!1),h(this,"skippedSegments",0),h(this,"canBlockReload",!1),h(this,"partHoldBack",0),h(this,"live",!0),h(this,"lowLatency",!1),h(this,"endPartIndex",0),h(this,"segments",[])})),Bi=function(){function e(t){c(this,e),h(this,"sn",0),h(this,"cc",0),h(this,"url",""),h(this,"parentUrl",""),h(this,"title",""),h(this,"start",0),h(this,"duration",0),h(this,"dataTime",""),h(this,"key",null),h(this,"byteRange",null),h(this,"isInitSegment",!1),h(this,"initSegment",null),h(this,"isLast",!1),h(this,"hasAudio",!1),h(this,"hasVideo",!1),h(this,"independent",!1),h(this,"partIndex",0),this.parentUrl=t}return d(e,[{key:"end",get:function(){return this.start+this.duration}},{key:"setTrackExist",value:function(e,t){this.hasVideo=e,this.hasAudio=t}},{key:"setByteRange",value:function(e,t){this.byteRange=[0];var i=e.split("@");1===i.length&&t&&t.byteRange?(this.byteRange[0]=t.byteRange[1]||0,this.byteRange[0]&&(this.byteRange[0]+=1)):this.byteRange[0]=parseInt(i[1]),this.byteRange[1]=this.byteRange[0]+parseInt(i[0])-1}}]),e}(),Fi=function(){function e(t){c(this,e),h(this,"method",""),h(this,"url",""),h(this,"iv",null),h(this,"keyFormat",""),h(this,"keyFormatVersions",""),t instanceof e&&(this.method=t.method,this.url=t.url,this.keyFormat=t.keyFormat,this.keyFormatVersions=t.keyFormatVersions,t.iv&&(this.iv=new Uint8Array(t.iv)))}return d(e,[{key:"clone",value:function(t){var i=new e(this);return null!=t&&i.setIVFromSN(t),i}},{key:"setIVFromSN",value:function(e){if(!this.iv&&"AES-128"===this.method&&"number"==typeof e&&this.url){this.iv=new Uint8Array(16);for(var t=12;t<16;t++)this.iv[t]=e>>8*(15-t)&255}}},{key:"isSegmentEncrypted",value:function(){return"AES-128"===this.method}},{key:"isValidKeySystem",value:function(){return[Ii.CLEAR_KEY,Ii.FAIRPLAY,Ii.WIDEVINE,Ii.PLAYREADY].indexOf(this.keyFormat)>-1&&!!(["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)>-1)}},{key:"isSupported",value:function(){return!!this.method&&(!!this.isSegmentEncrypted()||!!this.isValidKeySystem())}}]),e}(),Ui=/^#(EXT[^:]*)(?::(.*))?$/,Hi=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,zi=/^(?:[a-zA-Z0-9+\-.]+:)?\/\//,Gi=/^((?:[a-zA-Z0-9+\-.]+:)?\/\/[^/?#]*)?([^?#]*\/)?/;function Vi(e){return e.split(/[\r\n]/).map((function(e){return e.trim()})).filter(Boolean)}function $i(e){var t=e.match(Ui);if(t&&t[1])return[t[1].replace("EXT-X-",""),t[2]]}function Yi(e){for(var t={},i=Hi.exec(e);i;)t[i[1]]=i[2]||i[3],i=Hi.exec(e);return t}function Wi(e,t){if(!t||!e||zi.test(e))return e;var i=Gi.exec(t);return i?"/"===e[0]?i[1]+e:i[1]+i[2]+e:e}var Xi={audio:[/^mp4a/,/^vorbis$/,/^opus$/,/^flac$/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Ki(e,t){var i=Xi[e];if(i&&t&&t.length)for(var n=0;n<i.length;n++)for(var r=0;r<t.length;r++)if(i[n].test(t[r]))return t[r]}function qi(e,t){for(var i,n=new Pi,r=0,s=[],a=[];i=e[r++];){var o=$i(i);if(o){var l=_(o,2),c=l[0],u=l[1];if("VERSION"===c)n.version=parseInt(u);else if("MEDIA"===c&&u){var d=Yi(u),h=void 0;switch(d.TYPE){case"AUDIO":h=new Mi;break;case"SUBTITLES":h=new Ri;break;default:h=new Di}h.url=Wi(d.URI,t),h.default="YES"===d.DEFAULT,h.autoSelect="YES"===d.AUTOSELECT,h.group=d["GROUP-ID"],h.name=d.NAME,h.lang=d.LANGUAGE,d.CHANNELS&&(h.channels=Number(d.CHANNELS.split("/")[0]),Number.isNaN(h.channels)&&(h.channels=0)),"AUDIO"===d.TYPE&&d.URI&&s.push(h),"SUBTITLES"===d.TYPE&&a.push(h)}else if("STREAM-INF"===c&&u){var f=new ji,p=Yi(u);if(f.bitrate=parseInt(p["AVERAGE-BANDWIDTH"]||p.BANDWIDTH),f.name=p.NAME,f.url=Wi(e[r++],t),p.RESOLUTION){var v=_(p.RESOLUTION.split("x"),2),g=v[0],m=v[1];f.width=parseInt(g),f.height=parseInt(m)}if(p.CODECS){var y=p.CODECS.split(/[ ,]+/).filter(Boolean);f.videoCodec=Ki("video",y),f.audioCodec=Ki("audio",y),f.textCodec=Ki("text",y)}f.audioGroup=p.AUDIO,f.subtitleGroup=p.SUBTITLES,n.streams.push(f)}}}return n.streams.forEach((function(e,t){e.id=t})),s.length&&(s.forEach((function(e,t){e.id=t})),n.streams.forEach((function(e){e.audioGroup&&(e.audioStreams=s.filter((function(t){return t.group===e.audioGroup})))}))),a.length&&(a.forEach((function(e,t){e.id=t})),n.streams.forEach((function(e){e.subtitleGroup&&(e.subtitleStreams=a.filter((function(t){return t.group===e.subtitleGroup})))}))),n}function Zi(e,t,i){var n=new Ni;n.url=t;for(var r,s=new Bi(t),a=null,o=null,l=0,c=0,u=0,d=0,h=!1,f=0;(r=e[d++])&&!h;)if("#"===r[0]){var p=$i(r);if(p){var v=_(p,2),g=v[0],m=v[1];switch(g){case"VERSION":n.version=parseInt(m);break;case"PLAYLIST-TYPE":n.type=null==m?void 0:m.toUpperCase();break;case"TARGETDURATION":n.targetDuration=parseFloat(m);break;case"PART-INF":i&&(n.lowLatency=!0);var y=Yi(m);y["PART-TARGET"]&&(n.partTargetDuration=parseFloat(y["PART-TARGET"]));break;case"SERVER-CONTROL":var b=Yi(m);n.canBlockReload="YES"===b["CAN-BLOCK-RELOAD"],n.partHoldBack=parseFloat(b["PART-HOLD-BACK"]||0),n.canSkipUntil=parseFloat(b["CAN-SKIP-UNTIL"]||0),n.canSkipDateRanges="YES"===b["CAN-SKIP-DATERANGES"];break;case"ENDLIST":var k=n.segments[n.segments.length-1];k&&(k.isLast=!0),n.live=!1,h=!0;break;case"MEDIA-SEQUENCE":c=n.startSN=parseInt(m);break;case"DISCONTINUITY-SEQUENCE":u=n.startCC=parseInt(m);break;case"DISCONTINUITY":u++;break;case"BYTERANGE":s.setByteRange(m,n.segments[n.segments.length-1]);break;case"PART":if(!n.lowLatency)break;var E=Yi(m);s.duration=parseFloat(E.DURATION),s.independent="YES"===E.INDEPENDENT,s.sn=c,s.cc=u,s.partIndex=f,s.start=l,s.duration=parseFloat(E.DURATION),l+=s.duration,s.url=Wi(E.URI,t),o&&(s.key=o.clone(c)),a&&(s.initSegment=a),n.segments.push(s),s=new Bi(t),f++;break;case"PRELOAD-HINT":break;case"PROGRAM-DATE-TIME":s.dataTime=m;break;case"EXTINF":if(n.lowLatency){f=0;break}var S=_(m.split(","),2),w=S[0],T=S[1];s.start=l,s.duration=parseFloat(w),l+=s.duration,s.title=T;break;case"KEY":var x=Yi(m);if("NONE"===x.METHOD){o=null;break}if((o=new Fi).method=x.METHOD,o.url=/^blob:/.test(x.URI)?x.URI:Wi(x.URI,t),o.keyFormat=x.KEYFORMAT||"identity",o.keyFormatVersions=x.KEYFORMATVERSIONS,!o.isSupported())throw new Error("encrypt ".concat(x.METHOD,"/").concat(x.KEYFORMAT," is not supported"));if(x.IV){var C=x.IV.slice(2);C=(1&C.length?"0":"")+C,o.iv=new Uint8Array(C.length/2);for(var O=0,P=C.length/2;O<P;O++)o.iv[O]=parseInt(C.slice(2*O,2*O+2),16)}break;case"MAP":var A=Yi(m);s.url=Wi(A.URI,t),A.BYTERANGE&&s.setByteRange(A.BYTERANGE),s.isInitSegment=!0,s.sn=0,o&&(s.key=o.clone(0)),a=s,s=new Bi(t)}}}else{if(n.lowLatency){c++;continue}s.sn=c,s.cc=u,s.url=Wi(r,t),o&&(s.key=o.clone(c)),a&&(s.initSegment=a),n.segments.push(s),s=new Bi(t),c++}n.segments=n.segments.filter((function(e){return 0!==e.duration}));var L=n.segments[n.segments.length-1];return L&&(n.endSN=L.sn,n.endPartIndex=L.partIndex,h&&!L.isLast&&(L.isLast=!0)),n.totalDuration=l,n.endCC=u,n}var Ji=function(){function e(){c(this,e)}return d(e,null,[{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!t.includes("#EXTM3U"))throw new Error("Invalid m3u8 file");var r=Vi(t);return e.isMediaPlaylist(t)?Zi(r,i,n):qi(r,i)}},{key:"isMediaPlaylist",value:function(e){return e.includes("#EXTINF:")||e.includes("#EXT-X-TARGETDURATION:")}}]),e}(),Qi=function(){function e(t){var i=this;c(this,e),h(this,"_emitOnLoaded",(function(e,t){var n=e.response,r=e.options||{},s=r.firstByteTime,a=r.startTime,o=r.endTime,l=r.contentLength,c=o-a;i.hls.emit(Ie.SPEED,{time:c,byteLength:l,url:t}),i.hls.emit(Ie.LOAD_COMPLETE,{url:t,elapsed:c||0}),i.hls.emit(Ie.TTFB,{url:t,responseUrl:n.url,elapsed:s-a}),i.hls.emit(Ie.LOAD_RESPONSE_HEADERS,{headers:n.headers,url:t})})),h(this,"_onLoaderRetry",(function(e,t){i.hls.emit(ri.LOAD_RETRY,{error:ge.network(e),retryTime:t})})),this.hls=t,this._timer=null,this._useLowLatency=t.config.useLowLatency;var n=this.hls.config,s=n.retryCount,a=n.retryDelay,o=n.manifestLoadTimeout,l=n.fetchOptions;this._loader=new Oi(r(r({},l),{},{responseType:"text",retry:s,retryDelay:a,timeout:o,onRetryError:this._onLoaderRetry})),this._audioLoader=new Oi(r(r({},l),{},{responseType:"text",retry:s,retryDelay:a,timeout:o,onRetryError:this._onLoaderRetry})),this._subtitleLoader=new Oi(r(r({},l),{},{responseType:"text",retry:s,retryDelay:a,timeout:o,onRetryError:this._onLoaderRetry}))}var t;return d(e,[{key:"load",value:(t=l(s().mark((function e(t,i,n){var r,a,o,l,c,u,d,h,f,p,v,g,m,y,b,k,E,S,w,T;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[this._loader.load(t)],i&&r.push(this._audioLoader.load(i)),n&&r.push(this._subtitleLoader.load(n)),e.prev=3,e.next=6,Promise.all(r);case 6:if(h=e.sent,f=_(h,3),p=f[0],v=f[1],g=f[2],p){e.next=13;break}return e.abrupt("return",[]);case 13:this._emitOnLoaded(p,t),a=p.data,c=p.response.url||t,i?(o=null==v?void 0:v.data,l=null==g?void 0:g.data,u=(null==v||null===(m=v.response)||void 0===m?void 0:m.url)||i,d=(null==g||null===(y=g.response)||void 0===y?void 0:y.url)||n,o&&this._emitOnLoaded(v,i),l&&this._emitOnLoaded(g,n)):(l=null==v?void 0:v.data,d=(null==v||null===(b=v.response)||void 0===b?void 0:b.url)||n,l&&this._emitOnLoaded(v,n)),e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(3),ge.network(e.t0);case 22:if(k=this.hls.config.onPreM3U8Parse,e.prev=23,k&&(a=k(a)||a,o&&(o=k(o,!0)||o),l&&(l=k(l,!0)||l)),E=Ji.parse(a,c,this._useLowLatency),!1!==(null===(T=E)||void 0===T?void 0:T.live)||!E.segments||E.segments.length){e.next=28;break}throw new Error("empty segments list");case 28:o&&(S=Ji.parse(o,u,this._useLowLatency)),l&&(w=Ji.parse(l,d,this._useLowLatency)),e.next=35;break;case 32:throw e.prev=32,e.t1=e.catch(23),new ge(ie,pe.HLS,e.t1);case 35:return E&&(E.isMaster?this.hls.emit(ri.HLS_MANIFEST_LOADED,{playlist:E}):this.hls.emit(ri.HLS_LEVEL_LOADED,{playlist:E})),e.abrupt("return",[E,S,w]);case 37:case"end":return e.stop()}}),e,this,[[3,19],[23,32]])}))),function(e,i,n){return t.apply(this,arguments)})},{key:"parseText",value:function(e,t){var i,n=this.hls.config.onPreM3U8Parse;try{var r;if(n&&(e=n(e)||e),!1===(null===(r=i=Ji.parse(e,t,this._useLowLatency))||void 0===r?void 0:r.live)&&i.segments&&!i.segments.length)throw new Error("empty segments list")}catch(e){throw new ge(ie,pe.HLS,e)}return i&&(i.isMaster?this.hls.emit(ri.HLS_MANIFEST_LOADED,{playlist:i}):this.hls.emit(ri.HLS_LEVEL_LOADED,{playlist:i})),[i]}},{key:"poll",value:function(e,t,i,n,r,a){var o=this;clearTimeout(this._timer),a=a||3e3;var c=this.hls.config.pollRetryCount,u=function(){var d=l(s().mark((function l(){var d;return s().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return clearTimeout(o._timer),s.prev=1,s.next=4,o.load(e,t,i);case 4:if((d=s.sent)[0]){s.next=7;break}return s.abrupt("return");case 7:c=o.hls.config.pollRetryCount,n(d[0],d[1],d[2]),s.next=15;break;case 11:s.prev=11,s.t0=s.catch(1),--c<=0&&r(s.t0);case 15:o._timer=setTimeout(u,a);case 16:case"end":return s.stop()}}),l,null,[[1,11]])})));return function(){return d.apply(this,arguments)}}();this._timer=setTimeout(u,a)}},{key:"stopPoll",value:function(){return clearTimeout(this._timer),this.cancel()}},{key:"cancel",value:function(){return Promise.all([this._loader.cancel(),this._audioLoader.cancel()])}}]),e}();function en(e,t,i){return t>i&&(i=t),Math.min(Math.max(e,t),i)}var tn=new be("playlist"),nn=function(){function e(t,i,n){c(this,e),h(this,"live",void 0),h(this,"id",0),h(this,"bitrate",0),h(this,"width",0),h(this,"height",0),h(this,"name",""),h(this,"url",""),h(this,"audioCodec",""),h(this,"videoCodec",""),h(this,"textCodec",""),h(this,"startCC",0),h(this,"endCC",0),h(this,"startSN",0),h(this,"endSN",-1),h(this,"totalDuration",0),h(this,"targetDuration",0),h(this,"partTargetDuration",0),h(this,"canSkipUntil",0),h(this,"canSkipDateRanges",!1),h(this,"skippedSegments",0),h(this,"canBlockReload",!1),h(this,"partHoldBack",0),h(this,"lowLatency",!1),h(this,"endPartIndex",0),h(this,"snDiff",null),h(this,"segments",[]),h(this,"audioStreams",[]),h(this,"subtitleStreams",[]),h(this,"closedCaptions",[]),h(this,"currentAudioStream",null),h(this,"currentSubtitleStream",null),this.update(this._setLLPlaybackPoint(t),i,n)}return d(e,[{key:"lastSegment",get:function(){return this.segments.length?this.segments[this.segments.length-1]:null}},{key:"segmentDuration",get:function(){var e;return this.targetDuration||(null===(e=this.segments[0])||void 0===e?void 0:e.duration)||0}},{key:"liveEdge",get:function(){return this.endTime},set:function(e){this.endTime=e}},{key:"endTime",get:function(){var e;return(null===(e=this.lastSegment)||void 0===e?void 0:e.end)||0},set:function(e){var t=this.lastSegment;t&&(t.duration=e-t.start)}},{key:"currentSubtitleEndSn",get:function(){var e;return(null===(e=this.currentSubtitleStream)||void 0===e?void 0:e.endSN)||0}},{key:"clearOldSegment",value:function(e,t){return this.currentAudioStream&&this._clearSegments(e,t),this._clearSegments(e,t)}},{key:"getAudioSegment",value:function(e){if(e&&this.currentAudioStream){var t=e.sn-this.snDiff;return this.currentAudioStream.segments.find((function(e){return e.sn===t}))}}},{key:"update",value:function(e,t){this.url=e.url,Array.isArray(e.segments)?(null!==this.live&&void 0!==this.live||(this.live=e.live),this._updateSegments(e,this),this.startCC=e.startCC,this.endCC=e.endCC,this.startSN=e.startSN,this.endSN=e.endSN||-1,this.totalDuration=e.totalDuration,this.targetDuration=e.targetDuration,this.live=e.live,this.lowLatency=e.lowLatency,this.canBlockReload=e.canBlockReload,this.canSkipDateRanges=e.canSkipDateRanges,this.canSkipUntil=e.canSkipUntil,this.partHoldBack=e.partHoldBack,this.partTargetDuration=e.partTargetDuration,this.skippedSegments=e.skippedSegments,this.endPartIndex=e.endPartIndex,t&&this.currentAudioStream&&Array.isArray(t.segments)&&(this._updateSegments(t,this.currentAudioStream),(null===this.snDiff||void 0===this.snDiff)&&e.segments.length&&t.segments.length&&(this.snDiff=e.segments[0].sn-t.segments[0].sn))):(this.id=e.id,this.bitrate=e.bitrate,this.width=e.width,this.height=e.height,this.name=e.name,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.textCodec=e.textCodec,this.audioStreams=e.audioStreams,this.subtitleStreams=e.subtitleStreams,!this.currentAudioStream&&this.audioStreams.length&&(this.currentAudioStream=this.audioStreams.find((function(e){return e.default}))||this.audioStreams[0]),!this.currentSubtitleStream&&this.subtitleStreams.length&&(this.currentSubtitleStream=this.subtitleStreams.find((function(e){return e.default}))||this.subtitleStreams[0]))}},{key:"updateSubtitle",value:function(e){var t=this;if(e&&this.currentSubtitleStream&&Array.isArray(e.segments)){var i=this._updateSegments(e,this.currentSubtitleStream),n=this.currentSubtitleStream.segments;if(n.length>100&&(this.currentSubtitleStream.segments=n.slice(100)),i)return i.map((function(e){return{sn:e.sn,url:e.url,duration:e.duration,start:e.start,end:e.end,lang:t.currentSubtitleStream.lang}}))}}},{key:"switchSubtitle",value:function(e){var t=this.subtitleStreams.find((function(t){return t.lang===e})),i=this.currentSubtitleStream;t&&(this.currentSubtitleStream=t,i.segments=[])}},{key:"_setLLPlaybackPoint",value:function(e){if(!e.lowLatency||!e.segments.length)return e;for(var t=e.totalDuration-e.partHoldBack,i=e.segments,n=0,r=0,s=i.length;r<s;r++)i[r].start<=t&&i[r].independent&&(n=r);var a=i.slice(n),o=0;return a.forEach((function(e){e.start=o,o=e.end})),e.segments=a,e.totalDuration=o,e.startSN=a[0].sn,e.startCC=a[0].cc,tn.log("set ll-hls playback point: SN=".concat(e.startSN," partIndex=").concat(a[0].partIndex,", duration=").concat(o)),e}},{key:"_clearSegments",value:function(e,t){for(var i=0,n=this.segments,r=0,s=n.length;r<s;r++)if(n[r].end>=e){i=r;break}return i>t&&(i=t),i&&(this.segments=this.segments.slice(i),this.currentAudioStream&&(this.currentAudioStream.segments=this.currentAudioStream.segments.slice(i))),t-i}},{key:"_updateSegments",value:function(e,t){var i=t.segments;if(this.live){var n,r=e.lowLatency,s=i[i.length-1],a=null!==(n=null==s?void 0:s.sn)&&void 0!==n?n:-1,o=(null==s?void 0:s.partIndex)||0,l=a<e.endSN&&e.segments.length;if(r&&(l=l||o<e.endPartIndex),l){tn.log("update segments: endSN:".concat(a,", partIndex:").concat(o," --\x3e endSN:").concat(e.endSN,", partIndex:").concat(e.endPartIndex));var c=e.segments.findIndex((function(e){return e.sn===a&&e.partIndex===o})),u=c<0?e.segments:e.segments.slice(c+1);if(i.length&&u.length){var d=s.end,h=d;u.forEach((function(e){e.start=d,d=e.end})),tn.log("liveEdge: ".concat(h," -> ").concat(d));var f=(null==s?void 0:s.cc)||-1;f>u[0].cc&&u.forEach((function(e){return e.cc+=f}))}return t.endSN=e.endSN,t.segments=i.concat(u),u}}else t.segments=e.segments}}]),e}(),rn=function(){function e(t){c(this,e),h(this,"streams",[]),h(this,"currentStream",null),h(this,"dvrWindow",0),h(this,"_segmentPointer",-1),this.hls=t}return d(e,[{key:"lowLatency",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.lowLatency}},{key:"lastSegment",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.lastSegment}},{key:"currentSegment",get:function(){var e;return null===(e=this.currentSegments)||void 0===e?void 0:e[this._segmentPointer]}},{key:"nextSegment",get:function(){var e;return null===(e=this.currentSegments)||void 0===e?void 0:e[this._segmentPointer+1]}},{key:"currentSegments",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.segments}},{key:"currentSubtitleEndSn",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.currentSubtitleEndSn}},{key:"liveEdge",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.liveEdge},set:function(e){this.currentStream&&(this.currentStream.liveEdge=e)}},{key:"totalDuration",get:function(){var e;return(null===(e=this.currentStream)||void 0===e?void 0:e.totalDuration)||0}},{key:"seekRange",get:function(){var e=this.currentSegments;if(e&&e.length)return[e[0].start,e[e.length-1].end]}},{key:"nbSegments",get:function(){var e;return(null===(e=this.currentSegments)||void 0===e?void 0:e.length)||0}},{key:"isEmpty",get:function(){var e;return!(null!==(e=this.currentSegments)&&void 0!==e&&e.length)}},{key:"isLive",get:function(){var e;return null===(e=this.currentStream)||void 0===e?void 0:e.live}},{key:"hadSegmentLoaded",get:function(){return-1!==this._segmentPointer}},{key:"hasSubtitle",get:function(){var e;return!(null===(e=this.currentStream)||void 0===e||!e.currentSubtitleStream)}},{key:"getAudioSegment",value:function(e){var t;return null===(t=this.currentStream)||void 0===t?void 0:t.getAudioSegment(e)}},{key:"moveSegmentPointer",value:function(e){var t;null==e&&(e=this._segmentPointer+1),this._segmentPointer=en(e,-1,null===(t=this.currentSegments)||void 0===t?void 0:t.length)}},{key:"reset",value:function(){this.streams=[],this.currentStream=null,this.dvrWindow=0,this._segmentPointer=-1}},{key:"getSegmentByIndex",value:function(e){var t;return null===(t=this.currentSegments)||void 0===t?void 0:t[e]}},{key:"setNextSegmentByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._segmentPointer=e-1}},{key:"setNextSegmentBySN",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=null===(e=this.currentSegments)||void 0===e?void 0:e.findIndex((function(e){return e.sn===t}));return-1!==i&&this.setNextSegmentByIndex(i+1),i}},{key:"findSegmentIndexByTime",value:function(e){var t=this.currentSegments;if(t){for(var i,n=0,r=t.length;n<r;n++)if(e>=(i=t[n]).start&&e<i.end)return n;var s=t[t.length-1];if(Math.abs(e-(null==s?void 0:s.end))<.2)return t.length-1}}},{key:"upsertPlaylist",value:function(e,t,i){var n=this;if(e){if(e.isMaster)this.streams.length=e.streams.length,e.streams.filter((function(e){return e.url})).forEach((function(e,t){n.streams[t]?n.streams[t].update(e):n.streams[t]=new nn(e)})),this.currentStream=this.streams[0];else if(Array.isArray(e.segments)){var r=this.currentStream;if(r){r.update(e,t,i);var s=r.updateSubtitle(i);s&&this.hls.emit(ri.SUBTITLE_SEGMENTS,{list:s})}else this.reset(),this.currentStream=this.streams[0]=new nn(e,t,i)}this.currentStream&&this.hls.isLive&&!this.dvrWindow&&(this.dvrWindow=this.currentSegments.reduce((function(e,t){return e+=t.duration}),0))}}},{key:"updateSegmentsRanges",value:function(e,t){var i;(null===(i=this.currentSegments)||void 0===i?void 0:i.filter((function(t){return t.sn>=e}))).forEach((function(e){e.start=t,t=e.end}))}},{key:"switchSubtitle",value:function(e){var t;null===(t=this.currentStream)||void 0===t||t.switchSubtitle(e)}},{key:"clearOldSegment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=this.currentStream;if(this.dvrWindow&&t){var i=t.endTime-this.dvrWindow;if(!(i<=0)){var n=t.segments;n.length<=e||(this._segmentPointer=t.clearOldSegment(i,this._segmentPointer))}}}},{key:"checkSegmentTrackChange",value:function(e,t){var i=this.findSegmentIndexByTime(e),n=this.getSegmentByIndex(i);if(n&&(n.hasAudio||n.hasVideo)){if(2!==t&&n.hasAudio&&n.hasVideo)return n;if(!(n.end-e>.3)){var r=this.getSegmentByIndex(i+1);if(r&&(r.hasAudio||r.hasVideo))return r.hasAudio!==n.hasAudio||r.hasVideo!==n.hasVideo?r:void 0}}}},{key:"feedbackLiveEdge",value:function(e,t){var i;this.currentSegments&&((null===(i=this.lastSegment)||void 0===i?void 0:i.sn)===e.sn?this.liveEdge=t:this.updateSegmentsRanges(e.sn+1,t))}}]),e}(),sn=function(){function e(){M(this,e),N(this,"_chunkSpeeds",[]),N(this,"_speeds",[])}return j(e,[{key:"addRecord",value:function(e,t){e&&t&&(this._speeds.push(8e3*e/t),this._speeds=this._speeds.slice(-3))}},{key:"addChunkRecord",value:function(e,t){e&&t&&(this._chunkSpeeds.push(8e3*e/t),this._chunkSpeeds=this._chunkSpeeds.slice(-100))}},{key:"getAvgSpeed",value:function(){return this._chunkSpeeds.length||this._speeds.length?this._speeds.length?this._speeds.reduce((function(e,t){return e+t}))/this._speeds.length:this._chunkSpeeds.reduce((function(e,t){return e+t}))/this._chunkSpeeds.length:0}},{key:"getLatestSpeed",value:function(){return this._chunkSpeeds.length||this._speeds.length?this._speeds.length?this._speeds[this._speeds.length-1]:this._chunkSpeeds[this._chunkSpeeds.length-1]:0}},{key:"reset",value:function(){this._chunkSpeeds=[],this._speeds=[]}}]),e}(),an=function(){function e(t){var i=this;c(this,e),h(this,"error",null),h(this,"_emitOnLoaded",(function(e,t){var n=e.data,r=e.response,s=e.options||{},a=s.firstByteTime,o=s.startTime,l=s.endTime,c=s.contentLength,u=l-o;i._bandwidthService.addRecord(c||n.byteLength,u),i.hls.emit(Ie.SPEED,{time:u,byteLength:c,url:t}),i.hls.emit(Ie.LOAD_COMPLETE,{url:t,elapsed:u||0}),i.hls.emit(Ie.TTFB,{url:t,responseUrl:r.url,elapsed:a-o}),i.hls.emit(Ie.LOAD_RESPONSE_HEADERS,{headers:r.headers,url:t})})),h(this,"_onLoaderRetry",(function(e,t){i.hls.emit(Ie.LOAD_RETRY,{error:ge.network(e),retryTime:t})})),this.hls=t,this._bandwidthService=new sn,this._mapCache={},this._keyCache={};var n=this.hls.config,s=n.retryCount,a=n.retryDelay,o=n.loadTimeout,l=n.fetchOptions;this._segmentLoader=new Oi(r(r({},l),{},{responseType:"arraybuffer",retry:s,retryDelay:a,timeout:o,onRetryError:this._onLoaderRetry})),this._audioSegmentLoader=new Oi(r(r({},l),{},{responseType:"arraybuffer",retry:s,retryDelay:a,timeout:o,onRetryError:this._onLoaderRetry})),this._keyLoader=new Oi(r(r({},l),{},{responseType:"arraybuffer",retry:s,retryDelay:a,timeout:o,onRetryError:this._onLoaderRetry}))}var t,i;return d(e,[{key:"speedInfo",value:function(){return{speed:this._bandwidthService.getLatestSpeed(),avgSpeed:this._bandwidthService.getAvgSpeed()}}},{key:"load",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,r=[];return e&&(r[0]=this.loadVideoSegment(e,i)),t&&(r[1]=this.loadAudioSegment(t,n)),Promise.all(r)}},{key:"loadVideoSegment",value:function(e,t){return this._loadSegment(this._segmentLoader,e,t)}},{key:"loadAudioSegment",value:function(e,t){return this._loadSegment(this._audioSegmentLoader,e,t)}},{key:"_loadSegment",value:(i=l(s().mark((function e(t,i,n){var r,a,o,l,c,u,d,h,f,p,v,g,m,y,b,k=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=[],this.hls.emit(Ie.LOAD_START,{url:i.url}),d[0]=t.load(i.url),n&&i.initSegment&&(f=i.initSegment.url,(a=this._mapCache[f])||(this.hls.emit(Ie.LOAD_START,{url:f}),d[1]=t.load(f).then((function(e){e&&(Object.keys(k._mapCache)>30&&(k._mapCache={}),a=k._mapCache[f]=e.data,k._emitOnLoaded(e,f))}))),(p=null===(h=i.initSegment.key)||void 0===h?void 0:h.url)&&(u=i.initSegment.key.iv,(c=this._keyCache[p])||(this.hls.emit(Ie.LOAD_START,{url:p}),d[2]=this._keyLoader.load(p).then((function(e){e&&(c=k._keyCache[p]=e.data,k._emitOnLoaded(e,p))}))))),(v=null===(r=i.key)||void 0===r?void 0:r.url)&&i.key.isSegmentEncrypted()&&(l=i.key.iv,(o=this._keyCache[v])||(this.hls.emit(Ie.LOAD_START,{url:v}),d[3]=this._keyLoader.load(v).then((function(e){e&&(o=k._keyCache[v]=e.data,k._emitOnLoaded(e,v))})))),e.next=8,Promise.all(d);case 8:if(g=e.sent,m=_(g,1),y=m[0]){e.next=13;break}return e.abrupt("return");case 13:return b=y.data,this._emitOnLoaded(y,i.url),e.abrupt("return",{data:b,map:a,key:o,mapKey:c,keyIv:l,mapKeyIv:u});case 16:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"reset",value:function(){this.error=null,this._mapCache={},this._keyCache={},this._bandwidthService.reset()}},{key:"cancel",value:(t=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._keyLoader.cancel(),this._segmentLoader.cancel(),this._audioSegmentLoader.cancel()]);case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),on=new be("hls"),ln=function(e){f(O,e);var t,i,n,o,u,p,v,g,y,E,S,w,T,x,C=b(O);function O(e){var t,i,n;return c(this,O),h(m(t=C.call(this)),"version",O.version),h(m(t),"media",null),h(m(t),"config",null),h(m(t),"_manifestLoader",null),h(m(t),"_segmentLoader",null),h(m(t),"_playlist",null),h(m(t),"_bufferService",null),h(m(t),"_gapService",null),h(m(t),"_seiService",null),h(m(t),"_stats",null),h(m(t),"_prevSegSn",null),h(m(t),"_prevSegCc",null),h(m(t),"_tickTimer",null),h(m(t),"_tickInterval",500),h(m(t),"_segmentProcessing",!1),h(m(t),"_reloadOnPlay",!1),h(m(t),"_switchUrlOpts",null),h(m(t),"_isProcessQuotaExceeded",!1),h(m(t),"_loadSegment",l(s().mark((function e(){var i,n,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._segmentProcessing&&t.media){e.next=2;break}return e.abrupt("return");case 2:if(i=t._playlist.nextSegment,n=m(t),r=n.config,i){e.next=6;break}return e.abrupt("return");case 6:if(t.isLive){e.next=16;break}if(a=t.bufferInfo(),t.media.paused&&!t.media.currentTime&&(a=t.bufferInfo(a.nextStart||.5)),o=Math.abs(a.end-t.media.duration)<.1,!(a.remaining>=r.preloadTime||o)){e.next=13;break}return t._tryEos(),e.abrupt("return");case 13:if(!r.preferMMSStreaming||t._bufferService.msStreaming){e.next=15;break}return e.abrupt("return");case 15:!t._urlSwitching&&t._prevSegSn!==i.sn-1&&a.end&&Math.abs(i.start-a.end)>1&&t._playlist.setNextSegmentByIndex(t._playlist.findSegmentIndexByTime(a.end+.1));case 16:return e.abrupt("return",t._loadSegmentDirect());case 17:case"end":return e.stop()}}),e)})))),h(m(t),"_onLoadeddata",(function(){t.isLive&&!t.config.mseLowLatency&&t.media.duration!==1/0&&t._bufferService.updateDuration(1/0).catch((function(e){}))})),h(m(t),"_onPlay",l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.media.seeking||0!==t.media.currentTime){e.next=3;break}return on.debug("replay currentTime 0, return"),e.abrupt("return");case 3:if(clearTimeout(t._disconnectTimer),!t._reloadOnPlay){e.next=9;break}t._reloadOnPlay=!1,t.replay(!0),e.next=12;break;case 9:return e.next=11,t._loadSegment();case 11:t._startTick();case 12:case"end":return e.stop()}}),e)})))),h(m(t),"_onPause",(function(){if(t.isLive){if(!t._reloadOnPlay){var e=t.config.disconnectTime;if(null==e&&(e=t._playlist.dvrWindow),!Number.isFinite(e))return;clearTimeout(t._disconnectTimer),t._disconnectTimer=setTimeout((function(){t._reloadOnPlay=!0,t._clear()}),e||0)}}else t._stopTick()})),h(m(t),"_onSeeking",l(s().mark((function e(){var i,n,r,a,o,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.media){e.next=2;break}return e.abrupt("return");case 2:if(t._onCheckQuotaExceeded(),i=t.media.currentTime,!(n=t._playlist.seekRange)){e.next=10;break}if(!((r=en(i,n[0],t.isLive?n[1]:t.media.duration))>=0&&Math.abs(i-r)>=.1)){e.next=10;break}return t.media.currentTime=r,e.abrupt("return");case 10:if(a=t._playlist.currentSegment,o=ee.info(ee.get(t.media),i,.1),!a){e.next=17;break}if(!(o.end&&Math.abs(o.end-a.end)<.2)){e.next=15;break}return e.abrupt("return");case 15:if(!t.isLive||!o.end){e.next=17;break}return e.abrupt("return");case 17:if(l=t._playlist.findSegmentIndexByTime(i),c=t._playlist.getSegmentByIndex(l),null!=l&&c&&(!t._segmentProcessing||c!==t._playlist.nextSegment)){e.next=21;break}return e.abrupt("return");case 21:return on.debug("seek to",i,c),t._playlist.setNextSegmentByIndex(l),t._stopTick(),e.next=26,t._segmentLoader.cancel();case 26:if(t._segmentProcessing=!1,o.end&&!t.isLive){e.next=30;break}return e.next=30,t._loadSegmentDirect(!0);case 30:t._startTick();case 31:case"end":return e.stop()}}),e)})))),h(m(t),"_onTimeupdate",(function(){if(t.media){var e,i=t.config;if(i.isLive&&i.maxLatency&&i.targetLatency&&t.media){var n=t._playlist.liveEdge;if(!n)return;var r=n-t.media.currentTime;r>=i.maxLatency&&(on.debug("latency jump, currentTime:".concat(t.media.currentTime,", liveEdge:").concat(n,",  latency=").concat(r)),t.media.currentTime=n-i.targetLatency)}if(i.seiInTime)null===(e=t._seiService)||void 0===e||e.throw(t.media.currentTime);t.config.allowedStreamTrackChange&&!t.config.softDecode&&t._checkStreamTrackChange(t.media.currentTime)}})),h(m(t),"_tick",(function(){if(t.media){t._startTick();var e=t.media,i=ee.get(e),n=t._segmentLoader.error;if(t._onCheckQuotaExceeded(),t._isProcessQuotaExceeded&&(t._bufferService.isFull()||(t._isProcessQuotaExceeded=!1,t._segmentProcessing=!1)),n){(!e.readyState||t.bufferInfo(.5).remaining<1)&&(n.fatal=!0,t._emitError(ge.network(n)))}else ee.end(i)>=.1&&e.readyState&&(!function(e){return e&&!e.paused&&!e.ended&&0!==e.playbackRate&&0!==e.readyState}(e)?e.readyState<2&&t._gapService&&t._gapService.do(e,t.config.maxJumpDistance,!e.currentTime||t.isLive):(t._loadSegment(),t._gapService&&t._gapService.do(e,t.config.maxJumpDistance,t.isLive))),t.isLive||t._tryEos()}})),t.config=(n=(null==(i=e)?void 0:i.media)||document.createElement("video"),e=r(r({maxPlaylistSize:50,retryCount:3,retryDelay:1e3,pollRetryCount:2,loadTimeout:1e4,manifestLoadTimeout:1e4,preloadTime:30,softDecode:!1,bufferBehind:10,maxJumpDistance:3,startTime:0,useLowLatency:!0,targetLatency:10,maxLatency:20,allowedStreamTrackChange:!0,seiInTime:!1,manifestList:[],minSegmentsStartPlay:3,preferMMS:!1,preferMMSStreaming:!1,mseLowLatency:!0},i),{},{media:n})),t.media=t.config.media,t._manifestLoader=new Qi(m(t)),t._segmentLoader=new an(m(t)),t._playlist=new rn(m(t)),t._bufferService=new ui(m(t)),e.seiInTime&&(t._seiService=new Ne(m(t))),e.softDecode||(t._gapService=new Be),t._stats=new Ue(m(t),9e4),t.media.addEventListener("loadeddata",t._onLoadeddata),t.media.addEventListener("play",t._onPlay),t.media.addEventListener("pause",t._onPause),t.media.addEventListener("seeking",t._onSeeking),t.media.addEventListener("timeupdate",t._onTimeupdate),t}return d(O,[{key:"isLive",get:function(){return this._playlist.isLive}},{key:"streams",get:function(){return this._playlist.streams}},{key:"currentStream",get:function(){return this._playlist.currentStream}},{key:"hasSubtitle",get:function(){return this._playlist.hasSubtitle}},{key:"totalDuration",get:function(){return this._playlist.totalDuration}},{key:"baseDts",get:function(){var e;return null===(e=this._bufferService)||void 0===e?void 0:e.baseDts}},{key:"speedInfo",value:function(){return this._segmentLoader.speedInfo()}},{key:"bufferInfo",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return ee.info(ee.get(this.media),null===(e=this.media)||void 0===e?void 0:e.currentTime,t)}},{key:"getStats",value:function(){return this._stats.getStats()}},{key:"playbackQuality",value:function(){return function(e){if(!e)return{};if("function"==typeof e.getVideoPlaybackQuality){var t=e.getVideoPlaybackQuality();return{droppedVideoFrames:t.droppedVideoFrames||t.corruptedVideoFrames,totalVideoFrames:t.totalVideoFrames,creationTime:t.creationTime}}return{droppedVideoFrames:e.webkitDroppedFrameCount,totalVideoFrames:e.webkitDecodedFrameCount,creationTime:performance.now()}}(this.media)}},{key:"load",value:(x=l(s().mark((function e(t){var i,n=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.length>1&&void 0!==n[1]&&n[1],t&&(this.config.url=t),t=this.config.url,e.next=5,this._reset(i);case 5:return e.next=7,this._loadData(t);case 7:this._startTick();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"_loadData",value:(T=l(s().mark((function e(t){var i,n,r,a,o,l,c,u,d,h,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t&&(t=t.trim())}catch(e){}if(t){e.next=3;break}throw this._emitError(new ge(he,pe.OPTION,null,null,"m3u8 url is missing"));case 3:return e.next=5,this._loadM3U8(t);case 5:if(i=e.sent,n=this._playlist.currentStream,!this._urlSwitching||this.isLive){e.next=17;break}if(0===n.bitrate&&null!==(r=this._switchUrlOpts)&&void 0!==r&&r.bitrate&&(n.bitrate=null===(a=this._switchUrlOpts)||void 0===a?void 0:a.bitrate),o=this._getSeamlessSwitchPoint(),this.config.startTime=o,l=this._playlist.findSegmentIndexByTime(o),!(c=this._playlist.getSegmentByIndex(l+1))){e.next=17;break}return u=c.start,e.next=17,this._bufferService.removeBuffer(u);case 17:if(this._urlSwitching&&this.isLive&&(d=this._playlist.setNextSegmentBySN(this._prevSegSn),on.log("segment nb=".concat(this._prevSegSn," index of ").concat(d," in the new playlist")),-1===d&&(this._prevSegCc=null,this._prevSegSn=null)),i){e.next=20;break}return e.abrupt("return");case 20:if(!this.isLive){e.next=31;break}if(this._bufferService.setLiveSeekableRange(0,4294967295),on.log("totalDuration first time got:",this._playlist.totalDuration),on.log("nb segments got:",this._playlist.nbSegments),this.config.targetLatency<this._playlist.totalDuration&&(this.config.targetLatency=this._playlist.totalDuration,this.config.maxLatency=1.5*this.config.targetLatency),i.isMaster||this._pollM3U8(t),!(this._playlist.nbSegments<this.config.minSegmentsStartPlay)){e.next=28;break}return e.abrupt("return");case 28:return e.next=30,this._loadSegment();case 30:return e.abrupt("return");case 31:return e.next=33,this._bufferService.updateDuration(n.totalDuration);case 33:return(h=this.config.startTime)&&(null!==(f=this._switchUrlOpts)&&void 0!==f&&f.seamless||(this.media.currentTime=h),this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(h)||0)),e.next=37,this._loadSegment();case 37:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"replay",value:(w=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.config.startTime=0,e.next=3,this.load();case 3:return this._reloadOnPlay=!1,e.abrupt("return",this.media.play(!t));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"switchURL",value:(S=l(s().mark((function e(t){var i,n,r,o,l,c,u,d=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=d.length>1&&void 0!==d[1]?d[1]:{},n={seamless:!1,startTime:0,bitrate:0},e.t0=a(i),e.next="number"===e.t0?5:"boolean"===e.t0?7:"object"===e.t0?9:11;break;case 5:return i={startTime:i},e.abrupt("break",12);case 7:return i={seamless:i},e.abrupt("break",12);case 9:for(r in i)void 0!==i[r]&&null!==i[r]||delete i[r];return e.abrupt("break",12);case 11:throw"unsupported switchURL args: ".concat(i);case 12:if(i=Object.assign({},n,i),l=(o=i).seamless,c=o.startTime,this.config.url=t,this.config.startTime=c,this._switchUrlOpts=i,l){e.next=38;break}if(e.prev=18,!this.config.softDecode){e.next=23;break}e.t1=this.load(t),e.next=26;break;case 23:return e.next=25,this.load(t);case 25:e.t1=e.sent;case 26:u=e.t1,e.next=33;break;case 29:throw e.prev=29,e.t2=e.catch(18),this.emit(ri.SWITCH_URL_FAILED,e.t2),e.t2;case 33:return this._reloadOnPlay=!1,u&&this.emit(ri.SWITCH_URL_SUCCESS,{url:t}),e.abrupt("return",this.media.play(!0));case 38:return this._urlSwitching=!0,this.isLive||(this._prevSegSn=null,this._prevSegCc=null),this._playlist.reset(),this._bufferService.seamlessSwitch(),e.next=44,this._clear();case 44:return e.next=46,this._loadData(t);case 46:this._startTick();case 47:this._switchUrlOpts=null;case 48:case"end":return e.stop()}}),e,this,[[18,29]])}))),function(e){return S.apply(this,arguments)})},{key:"switchStream",value:(E=l(s().mark((function e(t){var i,n,r,a,o,l=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(l.length>1&&void 0!==l[1])||l[1],n=this.currentStream,r=this.streams,n&&n.id!==t&&r&&!(r.length<2)){e.next=5;break}return e.abrupt("return");case 5:if(a=r.find((function(e){return e.id===t}))){e.next=8;break}return e.abrupt("return");case 8:return e.prev=8,e.next=11,this._clear();case 11:if(!i){e.next=14;break}return e.next=14,this._bufferService.clearAllBuffer();case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(8),this._emitError(ge.create(e.t0));case 19:if(n.currentAudioStream&&a.audioStreams.length>2&&(o=n.currentAudioStream.id,a.currentAudioStream=a.audioStreams.find((function(e){return e.id===o}))||a.currentAudioStream),this._playlist.currentStream=a,e.prev=21,!this.isLive&&a.segments.length){e.next=25;break}return e.next=25,this._refreshM3U8();case 25:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,e.next=29,this._loadSegmentDirect();case 29:e.next=35;break;case 31:throw e.prev=31,e.t1=e.catch(21),this._playlist.currentStream=n,e.t1;case 35:return this._startTick(),e.abrupt("return",a);case 37:case"end":return e.stop()}}),e,this,[[8,16],[21,31]])}))),function(e){return E.apply(this,arguments)})},{key:"switchAudioStream",value:(y=l(s().mark((function e(t){var i,n,r,a,o=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(o.length>1&&void 0!==o[1])||o[1],n=this.currentStream){e.next=4;break}return e.abrupt("return");case 4:if((r=n.currentAudioStream)&&r.id!==t&&!(n.audioStreams.length<2)){e.next=7;break}return e.abrupt("return");case 7:if(a=n.audioStreams.find((function(e){return e.id===t}))){e.next=10;break}return e.abrupt("return");case 10:return e.prev=10,e.next=13,this._clear();case 13:if(!i){e.next=16;break}return e.next=16,this._bufferService.clearAllBuffer();case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(10),this._emitError(ge.create(e.t0));case 21:if(n.currentAudioStream=a,e.prev=22,!this.isLive&&a.segments.length){e.next=26;break}return e.next=26,this._refreshM3U8();case 26:return this._playlist.setNextSegmentByIndex(this._playlist.findSegmentIndexByTime(this.media.currentTime)||0),this._prevSegCc=null,e.next=30,this._loadSegmentDirect();case 30:e.next=36;break;case 32:throw e.prev=32,e.t1=e.catch(22),n.currentAudioStream=r,e.t1;case 36:return this._startTick(),e.abrupt("return",a);case 38:case"end":return e.stop()}}),e,this,[[10,18],[22,32]])}))),function(e){return y.apply(this,arguments)})},{key:"switchSubtitleStream",value:(g=l(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._playlist.switchSubtitle(t),e.next=3,this._manifestLoader.stopPoll();case 3:return e.next=5,this._refreshM3U8();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"destroy",value:(v=l(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.media){e.next=2;break}return e.abrupt("return");case 2:return this.removeAllListeners(),this._playlist.reset(),this._segmentLoader.reset(),null===(t=this._seiService)||void 0===t||t.reset(),this.media.removeEventListener("loadeddata",this._onLoadeddata),this.media.removeEventListener("play",this._onPlay),this.media.removeEventListener("pause",this._onPause),this.media.removeEventListener("seeking",this._onSeeking),this.media.removeEventListener("timeupdate",this._onTimeupdate),e.next=13,Promise.all([this._clear(),this._bufferService.destroy()]);case 13:this.media=null;case 14:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"_loadM3U8",value:(p=l(s().mark((function e(t){var i,n,r,a,o,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=null===(n=this.config.manifestList)||void 0===n||null===(r=n.filter((function(e){return e.url===t}))[0])||void 0===r?void 0:r.manifest)){e.next=6;break}e.t0=this._manifestLoader.parseText(a,t),e.next=9;break;case 6:return e.next=8,this._manifestLoader.load(t);case 8:e.t0=e.sent;case 9:o=e.t0,l=_(o,1),i=l[0],e.next=17;break;case 14:throw e.prev=14,e.t1=e.catch(0),this._emitError(ge.create(e.t1));case 17:if(i){e.next=19;break}return e.abrupt("return");case 19:if(this._playlist.upsertPlaylist(i),!i.isMaster){e.next=24;break}return null!==(c=this._playlist.currentStream.subtitleStreams)&&void 0!==c&&c.length&&this.emit(ri.SUBTITLE_PLAYLIST,{list:this._playlist.currentStream.subtitleStreams}),e.next=24,this._refreshM3U8();case 24:return this.emit(ri.STREAM_PARSED),e.abrupt("return",i);case 26:case"end":return e.stop()}}),e,this,[[0,14]])}))),function(e){return p.apply(this,arguments)})},{key:"_refreshM3U8",value:function(){var e,t,i=this,n=this._playlist.currentStream;if(!n||!n.url)throw this._emitError(ge.create(null,null,new Error("m3u8 url is not defined")));var r=n.url,s=null===(e=n.currentAudioStream)||void 0===e?void 0:e.url,a=null===(t=n.currentSubtitleStream)||void 0===t?void 0:t.url;return this._manifestLoader.load(r,s,a).then((function(e){var t=_(e,3),n=t[0],o=t[1],l=t[2];n&&(i._playlist.upsertPlaylist(n,o,l),i.isLive&&i._pollM3U8(r,s,a))})).catch((function(e){throw i._emitError(ge.create(e))}))}},{key:"_pollM3U8",value:function(e,t,i){var n,r,s=this,a=this._playlist.isEmpty;this._playlist.lowLatency?n=1e3*(2*this._playlist.currentStream.partTargetDuration||0):n=1e3*((null===(r=this._playlist.lastSegment)||void 0===r?void 0:r.duration)||0);this._manifestLoader.poll(e,t,i,(function(e,t,i){s._playlist.upsertPlaylist(e,t,i),s._playlist.clearOldSegment(),(e&&a&&!s._playlist.isEmpty||!s._playlist.hadSegmentLoaded&&s._playlist.nbSegments>=s.config.minSegmentsStartPlay)&&s._loadSegment(),a&&(a=s._playlist.isEmpty)}),(function(e){s._emitError(ge.create(e))}),n)}},{key:"_loadSegmentDirect",value:(u=l(s().mark((function e(t){var i,n,r,a,o,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._playlist.nextSegment){e.next=3;break}return e.abrupt("return");case 3:return n=!1,r=null,e.prev=5,this._segmentProcessing=!0,on.log("load segment, sn:".concat(i.sn,", [").concat(i.start,", ").concat(i.end,"], partIndex:").concat(i.partIndex)),e.next=10,this._reqAndBufferSegment(i,this._playlist.getAudioSegment(i));case 10:n=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),r=e.t0;case 16:return e.prev=16,this._segmentProcessing=!1,e.finish(16);case 19:if(!r){e.next=26;break}if(!this._bufferService.isFull()){e.next=25;break}return on.log("load segment, sn:".concat(i.sn,", partIndex:").concat(i.partIndex)),this._segmentProcessing=!0,this._isProcessQuotaExceeded=!0,e.abrupt("return",!1);case 25:return e.abrupt("return",this._emitError(ge.create(r)));case 26:return n&&(o=this.bufferInfo().end,this.isLive&&!this.media.seeking&&o&&Math.abs(i.end-o)>1&&(on.warn("segment: ".concat(i.sn," expected end=").concat(i.end,", real end=").concat(o)),this._playlist.feedbackLiveEdge(i,o)),l=(null===(a=this._playlist.currentStream)||void 0===a?void 0:a.url)===i.parentUrl,this._urlSwitching&&!l&&(on.warn("pre playlist segment appended!"),this._bufferService.seamlessSwitch()),this.isLive&&this._urlSwitching&&l&&(this._urlSwitching=!1,this.emit(ri.SWITCH_URL_SUCCESS,{url:this.config.url})),this._playlist.moveSegmentPointer(),i.isLast?this._end():t||this._loadSegment()),e.abrupt("return",n);case 28:case"end":return e.stop()}}),e,this,[[5,13,16,19]])}))),function(e){return u.apply(this,arguments)})},{key:"_reqAndBufferSegment",value:(o=l(s().mark((function e(t,i){var n,r,a,o,l,c,u,d,h,f,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?t.cc:i.cc,a=this._prevSegCc!==r,o=[],e.prev=3,e.next=6,this._segmentLoader.load(t,i,a);case 6:o=e.sent,e.next=14;break;case 9:throw e.prev=9,e.t0=e.catch(3),e.t0.fatal=!1,this._segmentLoader.error=e.t0,e.t0;case 14:if(o[0]){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,(n=this._bufferService).decryptBuffer.apply(n,k(o));case 18:if(l=e.sent){e.next=21;break}return e.abrupt("return");case 21:return c=t?t.sn:i.sn,u=t?t.start:i.start,d=this._playlist.currentStream,this._bufferService.createSource(l[0],l[1],null==d?void 0:d.videoCodec,null==d?void 0:d.audioCodec),h=Date.now(),f=this._prevSegSn===c-1,this.isLive&&this._urlSwitching&&(p=this.bufferInfo().end,this._playlist.updateSegmentsRanges(c,p),on.warn("update the new playlist liveEdge, segment id=".concat(c,", buffer start=").concat(p,", liveEdge=").concat(this._playlist.liveEdge)),u=p),e.next=30,this._bufferService.appendBuffer(t,i,l[0],l[1],a,f,u);case 30:return this.emit(ri.APPEND_COST,{elapsed:Date.now()-h,url:t.url}),e.next=33,this._bufferService.evictBuffer(this.config.bufferBehind);case 33:return this._prevSegCc=r,this._prevSegSn=c,e.abrupt("return",!0);case 36:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e,t){return o.apply(this,arguments)})},{key:"_onCheckQuotaExceeded",value:(n=l(s().mark((function e(){var t,i,n,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.media.currentTime,i=this.media.buffered,n=!1,r=0;case 4:if(!(r<i.length)){e.next=11;break}if(!(i.start(0)>=t&&t<i.end(r))){e.next=8;break}return n=!0,e.abrupt("break",11);case 8:r++,e.next=4;break;case 11:if(!this._bufferService.isFull()){e.next=17;break}if(a=n?this.config.bufferBehind:5,!((o=this.media.currentTime)-a>0)){e.next=17;break}return e.next=17,this._bufferService.removeBuffer(0,o-a);case 17:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_checkStreamTrackChange",value:function(e){var t=this._playlist.checkSegmentTrackChange(e,this._bufferService.nbSb);t&&this.switchURL(this.config.url,t.start+.2)}},{key:"_clear",value:(i=l(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(this._disconnectTimer),this._stopTick(),e.next=4,Promise.all([this._segmentLoader.cancel(),this._manifestLoader.stopPoll()]);case 4:this._segmentProcessing=!1;case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"_reset",value:(t=l(s().mark((function e(){var t,i,n=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.length>0&&void 0!==n[0]&&n[0],this._reloadOnPlay=!1,this._prevSegSn=null,this._prevSegCc=null,this._switchUrlOpts=null,this._playlist.reset(),this._segmentLoader.reset(),null===(t=this._seiService)||void 0===t||t.reset(),this._stats.reset(),e.next=11,this._clear();case 11:return e.abrupt("return",this._bufferService.reset(i));case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_end",value:function(){this._clear(),this._bufferService.endOfStream(),(this.media.readyState<=2||this.media.buffered.length>1)&&this._startTick()}},{key:"_stopTick",value:function(){this._tickTimer&&clearTimeout(this._tickTimer),this._tickTimer=null}},{key:"_startTick",value:function(){this._stopTick(),this._tickTimer=setTimeout(this._tick,this._tickInterval)}},{key:"_emitError",value:function(e){var t,i,n,r,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!1===(null===(t=e.originError)||void 0===t?void 0:t.fatal)?on.warn(e):(on.table(e),on.error(e),on.error(null===(i=this.media)||void 0===i?void 0:i.error),null!==(n=this.media)&&void 0!==n&&n.readyState&&this.media.pause(),this._stopTick(),this._urlSwitching&&(this._urlSwitching=!1,this.emit(ri.SWITCH_URL_FAILED,e)),this.emit(ri.ERROR,e),s&&this._end(),null===(r=this._seiService)||void 0===r||r.reset());return e}},{key:"_getSeamlessSwitchPoint",value:function(){var e=this.media,t=e.currentTime;if(!e.paused){var i,n=this._playlist.findSegmentIndexByTime(e.currentTime),r=this._playlist.getSegmentByIndex(n),s=null===(i=this._stats)||void 0===i?void 0:i.getStats().downloadSpeed;if(s&&r)t+=r.duration*this._playlist.currentStream.bitrate/s+1;else t+=5}return t}},{key:"_tryEos",value:function(){var e,t,i=this.media,n=this._playlist,r=n.nextSegment,s=n.lastSegment;if(!r&&i.readyState&&i.duration>0&&(null===(e=this._bufferService)||void 0===e?void 0:e.msIsOpened)&&!(null!==(t=this._bufferService)&&void 0!==t&&t.msHasOpTasks)){var a=this.bufferInfo();i.paused&&!i.currentTime&&(a=this.bufferInfo(a.nextStart||.5)),(Math.abs(a.end-i.duration)<.1||!this.isLive&&s&&a.end>=s.start+s.duration)&&this._bufferService.endOfStream()}}}],[{key:"isSupported",value:function(e){return e&&"video"!==e&&"audio"!==e?"undefined"!=typeof WebAssembly:Le.isSupported()}},{key:"enableLogger",value:function(){be.enable(),tt.enable()}},{key:"disableLogger",value:function(){be.disable(),tt.disable()}}]),O}(Me.a);h(ln,"version","3.0.17");try{localStorage.getItem("xgd")?ln.enableLogger():ln.disableLogger()}catch(e){}var cn=function(){function e(t,i){var n=this;c(this,e),h(this,"_opts",null),h(this,"_plugin",null),h(this,"_onLowDecode",(function(){var e,t,i,s,a=n._opts,o=a.media,l=a.innerDegrade;null===(e=n._plugin)||void 0===e||null===(t=e.player)||void 0===t||t.emit("lowdecode",o.degradeInfo),null===(i=n._plugin)||void 0===i||null===(s=i.player)||void 0===s||s.emit("core_event",r(r({},o.degradeInfo),{},{eventName:ri.LOWDECODE})),1===l&&n._degrade(o.src)})),h(this,"_degrade",(function(e){var t=n._plugin.player,i=t.video;if(!i||"MVideo"===i.TAG){var r=t.video.degradeVideo;t.video=r,i.degrade(e),e&&(t.config.url=e);var s=t.root.firstChild;"MVideo"===s.TAG&&t.root.replaceChild(r,s);var a=n._plugin.constructor.pluginName.toLowerCase();t.unRegisterPlugin(a),t.once("canplay",(function(){t.play()}))}})),h(this,"forceDegradeToVideo",(function(e){1===n._opts.innerDegrade&&n._degrade(e)})),this._opts=t,this._plugin=i,this._init()}return d(e,[{key:"_init",value:function(){var e=this._opts,t=e.media,i=e.preloadTime,n=e.innerDegrade,r=e.isLive;t&&(r||!t.setPlayMode?(n&&t.setAttribute("innerdegrade",n),i&&t.setAttribute("preloadtime",i),this._bindEvents()):t.setPlayMode("VOD"))}},{key:"_bindEvents",value:function(){this._opts.media.addEventListener("lowdecode",this._onLowDecode)}},{key:"destroy",value:function(){var e,t;null===(e=this._opts)||void 0===e||null===(t=e.media)||void 0===t||t.removeEventListener("lowdecode",this._onLowDecode),this._plugin=null}}]),e}();function un(e,t){var i={startTime:t.player.currentTime};switch(a(e)){case"boolean":i.seamless=e;break;case"object":Object.assign(i,e)}return i}var dn=function(e){f(i,e);var t=b(i);function i(){var e;c(this,i);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return h(m(e=t.call.apply(t,[this].concat(r))),"hls",null),h(m(e),"pluginExtension",null),h(m(e),"getStats",(function(){var t;return null===(t=e.hls)||void 0===t?void 0:t.getStats()})),h(m(e),"_onSwitchSubtitle",(function(t){var i,n=t.lang;null===(i=e.hls)||void 0===i||i.switchSubtitleStream(n)})),h(m(e),"_onSwitchURL",(function(t,i){return new Promise((function(n,r){var s=m(e),a=s.player,o=s.hls;if(o){var l,c,u=un(i,m(e));a.config.url=t,o.switchURL(t,u).then((function(){return n(!0)})).catch(r),!u.seamless&&null!==(l=e.player.config)&&void 0!==l&&null!==(c=l.hls)&&void 0!==c&&c.keepStatusAfterSwitch&&e._keepPauseStatus()}else r()}))})),h(m(e),"_keepPauseStatus",(function(){e.player.paused&&e.player.once("canplay",(function(){e.player.pause()}))})),e}return d(i,[{key:"core",get:function(){return this.hls}},{key:"version",get:function(){var e;return null===(e=this.hls)||void 0===e?void 0:e.version}},{key:"softDecode",get:function(){var e,t,i=null===(e=this.player)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.mediaType;return!!i&&"video"!==i&&"audio"!==i}},{key:"beforePlayerInit",value:function(){var e=this,t=this.player.config,i=t.hls||{};if((t.url||t.__allowHlsEmptyUrl__)&&(i.preferMMS||!Le.isMMSOnly())){var n;if(this.hls&&this.hls.destroy(),this.player.switchURL=this._onSwitchURL,this.player.handleSource=!1,i.innerDegrade=i.innerDegrade||t.innerDegrade,null!==i.disconnectTime&&void 0!==i.disconnectTime||(i.disconnectTime=0),this.hls=new ln(r({softDecode:this.softDecode,isLive:t.isLive,media:this.player.media||this.player.video,startTime:t.startTime,url:t.url},i)),this.softDecode||T.a.defineGetterOrSetter(this.player,{url:{get:function(){var t,i;return null===(t=e.hls)||void 0===t||null===(i=t.media)||void 0===i?void 0:i.src},configurable:!0}}),this.softDecode&&(this.pluginExtension=new cn(r({isLive:t.isLive,media:this.player.video},i),this),this.player.forceDegradeToVideo=function(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return null===(t=e.pluginExtension)||void 0===t?void 0:t.forceDegradeToVideo.apply(t,n)}),t.isLive)null===(n=this.player)||void 0===n||n.useHooks("replay",(function(){var t;return null===(t=e.hls)||void 0===t?void 0:t.replay()}));this.on(x.a.SWITCH_SUBTITLE||"switch_subtitle",this._onSwitchSubtitle),this.on(x.a.URL_CHANGE,this._onSwitchURL),this.on(x.a.DESTROY,this.destroy.bind(this)),this._transError(),this._transCoreEvent(Ie.TTFB),this._transCoreEvent(Ie.LOAD_START),this._transCoreEvent(Ie.LOAD_RESPONSE_HEADERS),this._transCoreEvent(Ie.LOAD_COMPLETE),this._transCoreEvent(Ie.LOAD_RETRY),this._transCoreEvent(Ie.SOURCEBUFFER_CREATED),this._transCoreEvent(Ie.MEDIASOURCE_OPENED),this._transCoreEvent(Ie.REMOVE_BUFFER),this._transCoreEvent(Ie.BUFFEREOS),this._transCoreEvent(Ie.KEYFRAME),this._transCoreEvent(Ie.METADATA_PARSED),this._transCoreEvent(Ie.DEMUXED_TRACK),this._transCoreEvent(Ie.SEI),this._transCoreEvent(Ie.SEI_IN_TIME),this._transCoreEvent(Ie.SPEED),this._transCoreEvent(Ie.HLS_MANIFEST_LOADED),this._transCoreEvent(Ie.HLS_LEVEL_LOADED),this._transCoreEvent(Ie.STREAM_EXCEPTION),this._transCoreEvent(Ie.SWITCH_URL_SUCCESS),this._transCoreEvent(Ie.SWITCH_URL_FAILED),this._transCoreEvent(ri.NO_AUDIO_TRACK),this._transCoreEvent(ri.STREAM_PARSED),this._transCoreEvent(ri.SUBTITLE_SEGMENTS),this._transCoreEvent(ri.SUBTITLE_PLAYLIST),this._transCoreEvent(ri.APPEND_COST),t.url&&this.hls.load(t.url,!0).catch((function(e){}))}}},{key:"destroy",value:function(){var e;this.hls&&(this.hls.destroy(),this.hls=null),null===(e=this.pluginExtension)||void 0===e||e.destroy(),this.pluginExtension=null}},{key:"_transError",value:function(){var e=this;this.hls.on(ri.ERROR,(function(t){e.player&&e.player.emit(x.a.ERROR,new C.b(e.player,t))}))}},{key:"_transCoreEvent",value:function(e){var t=this;this.hls.on(e,(function(i){t.player&&(t.player.emit("core_event",r(r({},i),{},{eventName:e})),e===Ie.SEI_IN_TIME&&t.hls.hasSubtitle&&t._emitSeiPaylodTime(i))}))}},{key:"_emitSeiPaylodTime",value:function(e){try{var t=JSON.parse(Array.from(e.data.payload).map((function(e){return String.fromCharCode(e)})).join("").slice(0,-1));if(!t.rtmp_dts)return;this.player.emit("core_event",{eventName:ri.SEI_PAYLOAD_TIME,time:t.rtmp_dts})}catch(e){}}}],[{key:"pluginName",get:function(){return"hls"}},{key:"isSupported",value:function(e,t){return ln.isSupported(e,t)}}]),i}(T.a);h(dn,"Hls",ln),h(dn,"EVENT",ri)}}]);